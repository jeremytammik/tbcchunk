[
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>\n<link href=\"bc.css\" rel=\"stylesheet\" type=\"text/css\"/>\n</head>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Room Editor Project Overview and CouchDB Configuration",
    "local_header_href": "#room-editor-project-overview-and-couchdb-configuration",
    "chunk_text": "<h3>Room Editor Project Overview and CouchDB Configuration</h3><p>Continuing the research and development for my\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/cloud-mobile-extensible-storage-data-use-in-schedules.html#3\">\ncloud-based round-trip 2D Revit model editing project</a>,\n\nhere are some issues I tackled since my last report:\n\n<ul>\n<li><a href=\"#2\">Project Overview</a></li>\n<li><a href=\"#3\">Replicating a CouchDB with Python</a></li>\n<li><a href=\"#4\">Same origin policy snag and resolution</a></li>\n<li><a href=\"#5\">Learning and struggling with CouchApps</a></li>\n<li><a href=\"#6\">Relief moving to Kanso</a></li>\n<li><a href=\"#7\">Next steps</a></li>\n</ul>\n<a name=\"2\"></a>\n<h4>Project Overview</h4>\n<p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p>\n<center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center>\n<p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p>\n<center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center>\n<p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p>\n<p>I already addressed a number of issues in realising this project and am documenting my progress here on the blog, in the three categories\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/desktop\">desktop</a>,\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/cloud\">cloud</a> and\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/mobile\">mobile</a>.\n\n<p>Here is an overview of the results presented so far, both for this project and some previous related topics, classified into those three categories:</p>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/cloud-mobile-extensible-storage-data-use-in-schedules.html\">Project overview and Tech Summit proposal</a>\n<li>Desktop</li>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/revit-2014-api-and-room-plan-view-boundary-polygon-loops.html\">Room plan view boundary loops</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/sort-and-orient-curves-to-form-a-contiguous-loop.html\">Sort and orient curves to form a contiguous loop</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/extrusion-analyser-and-plan-view-boundaries.html\">Extrusion analyser and plan view boundaries</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/curve-following-face-and-bounding-box-implementation.html\">Curve following face and bounding box implementation</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/geosnoop-net-boundary-curve-loop-visualisation.html\">GeoSnoop boundary curve loop visualisation</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/desktop-to-cloud-via-dreamseat-couchdb-client.html\">Desktop to cloud via DreamSeat CouchDB Client</a>\n</li></ul>\n<li>Cloud</li>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/06/getting-going-with-the-cloud.html\">Getting Going with the Cloud</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/09/apollonian-packing-of-spheres-via-web-service-and-avf.html\">Apollonian Sphere Packing Web Service and AVF</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/12/the-bim-360-glue-viewer-and-rest-api.html\">The BIM 360 Glue Viewer and REST API</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/12/bim-360-glue-rest-api-authentication-using-python.html\">BIM 360 Glue REST API Authentication Using Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/relax-simple-free-cloud-based-data-repository-with-nosql-couchdb-and-iriscouch.html\">Free Cloud Based Data Repository with NoSQL, CouchDB, and IrisCouch</a></li>\n</ul>\n<li>Mobile</li>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/08/validate-roof-type-and-view-obj-on-android.html\">Testing my OBJ exporter on Android</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/09/mobile-device-room-location.html\">Mobile Device Room Location</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/10/room-polygon-and-furniture-picker-in-svg.html\">Room Polygon and Furniture Picker in SVG</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/02/2d-svg-editing-on-mobile-device-with-rapha%C3%ABl.html\">2D SVG Editing on Mobile Device with Raphael</a></li>\n</ul>\n</li></ul>\n<a name=\"3\"></a>\n<h4>Replicating a CouchDB with Python</h4>\n<p>In my last step, I determined the room, furniture and equipment plan view boundary polygons and uploaded them to a CouchDB database in the cloud, hosted on IrisCouch.</p>\n<p>To play around interactively with that data, I would prefer to store it locally instead of on the server.</p>\n<p>The easiest way to achieve this is to replicate the database.</p>\n<p>Replicating a CouchDB repository is trivial, since it has built-in support for that.</p>\n<p>All you need to do is specify the source and target database name and URL.</p>\n<p>Also, as you may know, I love Python for command-line scripting.</p>\n<p>Happily, several\n\n<a href=\"http://wiki.apache.org/couchdb/Getting_started_with_Python\">\nCouchDB interfaces for Python</a> are\n\navailable.\nAs you can see on that page, they can be pretty simple.</p>\n<p><a href=\"http://couchdbkit.org\">\nCouchdbkit</a> seems\n\nwell supported and does the job.</p>\n<p>Here is a little Python script that replicates the database 'rooms' created by my Revit add-in in IrisCouch from the web to a new database 'rooms2' my local CouchDB installation:</p>\n<pre class=\"code\">\n<span style=\"color: #808080\">#!/usr/bin/python</span>\n<span style=\"color: #008000; font-weight: bold\">import</span> <span style=\"color: #0e84b5; font-weight: bold\">couchdb</span>\n\nserver <span style=\"color: #303030\">=</span> couchdb<span style=\"color: #303030\">.</span>Server()\nserver<span style=\"color: #303030\">.</span>create( <span style=\"background-color: #fff0f0\">'rooms2'</span> )\nserver<span style=\"color: #303030\">.</span>replicate(\n  <span style=\"background-color: #fff0f0\">'http://jt.iriscouch.com/rooms'</span>,\n  <span style=\"background-color: #fff0f0\">'rooms2'</span> )\n</pre>\n<p>You cannot make it much shorter or simpler than that, can you?</p>\n<a name=\"4\"></a>\n<h4>Same Origin Policy Snag and Resolution</h4>\n<p>I was originally envisioning a simple architecture composed of three components on the desktop, in the cloud, and on the mobile device, respectively, as illustrated above.</p>\n<p>I started looking at how to access the cloud-based data repository from the mobile device and closed my last foray into this area mentioning that I had a nasty surprise discovering that the strict\n\n<a href=\"http://www.w3.org/Security/wiki/Same_Origin_Policy\">\nsame origin policy</a> prevents\n\nmy simple JavaScript application from accessing my IrisCouch domain, so I cannot easily read the data on the mobile device in the manner I had expected.\n\n<p>The discovery cost me a few grey hairs and some sleep, but I found a good and obvious solution for that which you are probably all aware of already:\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.\n\n<p>In fact, this even simplifies things, in the end, since I really have nothing at all to install or implement on the mobile device, and my list of components to implement is reduced from three to two.\nOk, it adds some complication to the cloud stuff, of course... or actually just additional learning opportunities.</p>\n<p>I had already decided that NoSQL and the CouchDB implementation look like good candidates for my data repository requirements, and that I can test and host them in the cloud for free using the IrisCouch server.\nPlease refer to the link in the overview above for more info on these.</p>\n<p>Happily, CouchDB offers full support for server-side scripting.\nThe same-origin policy effectively requires that the HTML from which the JavaScript is loaded must be served up from CouchDB.\nThis can be done by attaching an HTML document to a CouchDB document.\nYou can do this manually, or through the use of CouchApps.\n\n\n<a name=\"5\"></a>\n<h4>Learning and Struggling with CouchApps</h4>\n<p>CouchApps are CouchDB generation environments and tools for web application developers interested in creating database-driven applications using nothing but HTML, CSS, and JavaScript.\n\n<p>A CouchApp is simply a collection of files that completely defines a CouchDB database to simplify development, deployment and maintenance.\nSimple command-line tools are used to synchronise the file collection with the real live CouchDB implementation.</p>\n<p>I dived into several of the numerous CouchApp tutorials and was so excited I ended up spending entire nights at it, once with no sleep at all.</p>\n<p>Here are some of the things I looked at:</p>\n<ul>\n<li><a href=\"http://www.couchapp.org/page/getting-started\">Getting started</a></li>\n<li><a href=\"http://blog.edparcell.com/using-jquery-and-couchdb-to-build-a-simple-we\">Build a simple CouchApp</a></li>\n<li><a href=\"http://www.ibm.com/developerworks/opensource/tutorials/os-couchapp/index.html\">Good IBM CouchApp tutorial</a></li>\n<li><a href=\"http://railsware.com/blog/2012/03/12/couchdb-and-couchapp-part-1\">A short and effective CouchApp and JavaScript tutorial</a></li>\n<li><a href=\"http://couchapp.org/page/index\">A better introduction and some more modern alternatives</a></li>\n<li><a href=\"http://daleharvey.github.io/jquery.couch.js-docs/symbols/index.html\">Documentation for jquery.couch.js</a></li>\n<li><a href=\"http://vimeo.com/26147136\">A very clear and impressive CouchApp video tutorial</a> by Max Ogden</li>\n<li><a href=\"https://github.com/mikeal/node.couchapp.js\">Very impressive node CouchApp JavaScript library node.couchapp.js</a></li>\n<li><a href=\"https://github.com/maxogden/art-of-node\">Using node.js for effective asynchronous processing</a></li>\n<li><a href=\"http://jsconf.eu/2010/speaker/nodejs_couchdb_crazy_delicious.html\">node.js + CouchDB == Crazy Delicious</a> video presentation</li>\n</ul>\n<p>Unfortunately, I found it pretty confusing.\nI learned a huge amount and achieved very little, partly due to the fact that several different CouchApp implementations exist and are used in parallel, and the tutorials do not specify exactly which version they are based on.</p>\n<p>Still, I learned enough to continue feeling very enthusiastic about this approach, and then found an easier solution.</p>\n<a name=\"6\"></a>\n<h4>Relief Moving to Kanso</h4>\n<p>After struggling with different CouchApp implementations, I discovered\n\n<a href=\"http://kan.so\">Kanso</a>,\n\ntoting itself \"the best way to create and share apps on CouchDB\".\n\n<p>With the little that I know so far, I fully agree with that.\nApparently, kanso is the Japanese phrase for simplicity, or, more specifically, simplifying the complex.</p>\n<p>So easy!\nEverything works!\nThe\n\n<a href=\"http://kan.so/docs\">\ndocumentation</a>\n\nincludes a short and succinct getting started tutorial that explains a lot.</p>\n<!--\n<p>Before showing you my first use of Kanso to read and present my room loops uploaded from the Revit add-in, stored in CouchDB on the cloud, via server-side scripting, I'll just update my add-in a bit to export the model and levl data as well as the room and furniture, then replicate the IrisCouch cloud hosted database on my local machine using a short Python script for easier access.</p>\n-->\n<p>Later I found\n\n<a href=\"http://caolan.github.io/kanso/guides/getting_started.html\">\nanother tutorial</a> that\n\ngoes further faster than the one included in the documentation pages.\n\n<p>Later still, I found this extremely well documented\n\n<a href=\"https://github.com/mauget/opto3-couchapp\">\ncomplete application</a> that\n\ncan be\n\n<a href=\"http://mauget.cloudant.com/opto3/_design/opto/index.html\">\ntested online</a> and\n\ndemonstrates numerous additional important new features.</p>\n<p>After studying these samples and trying to reuse some of the powerful functionality they provide, I am returning more and more often to the\n\n<a href=\"http://guide.couchdb.org\">Definite Guide for CouchDB</a> and\n\nfinally starting to understand the basics of view, show and list functions, etc.</p>\n<p>Bit by bit, I am managing to get some SVG graphics to display in my server-side scripts.\nMaking use of the Raphael library, as I was planning to do, may prove hard, since there is no ready-built Kanso package for it.\nI may therefore revert to implementing my room furniture placement editor in pure SVG instead.</p>\n<a name=\"7\"></a>\n<h4>Next Steps</h4>\n<p>My next steps will be:</p>\n<ul>\n<li>Separation of symbol and instance data in my add-in and database structure: currently, the furniture loops are placed absolutely, and multiple instances of a symbol duplicate the same loop over and over again at different locations. I will rewrite this to separate the furniture loop definition, defined by the family symbol, and its placement, defined by the instance. This needs to be done anyway to enable editing the placement data through the editor interaction on the mobile device.</li>\n<li>Learn how to use templates in Kanso.</li>\n<li>Implement server-side generated SVG code to display the room and furniture plan in CouchDB using Kanso.</li>\n<li>Implement editing of SVG on the mobile device and reflect changes back to CouchDB (I do not know how yet).</li>\n<li>Implement Idling event handler and polling of CouchDB in the desktop add-in to reflect the changes back to the BIM in real-time.</li>\n<li>Implement an external application wrapper for the add-in providing four commands:</li>\n<ul>\n<li>Upload to cloud</li>\n<li>Refresh from cloud</li>\n<li>Subscribe to cloud</li>\n<li>Unsubscribe from cloud</li>\n</ul>\n</ul>\n<p>I know exactly how to address all these points now, except for reflecting back the SVG editor changes to the CouchDB.</p>\n<p>I remain excited and optimistic and look forward to hearing your comments and suggestions.</p>\n<hr/>\n<h1>Cloud and Mobile</h1>\n<h3>Room Editor Project Overview and CouchDB Configuration</h3>\n<p>By\n\n<a href=\"http://adndevblog.typepad.com/cloud_and_mobile/jeremy-tammik.html\">\nJeremy</a>\n<a href=\"http://thebuildingcoder.typepad.com/blog/about-the-author.html\">\nTammik</a>.</p>\n<p>I am continuing the research and development for my cloud-based round-trip 2D Revit model editing project.\n\n<p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p>\n<center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center>\n<p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p>\n<center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center>\n<p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p>\n<p>Here are some issues I tackled since my last report:\n\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#2\">Project Overview</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#3\">Replicating a CouchDB with Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#4\">Same origin policy snag and resolution</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#5\">Learning and struggling with CouchApps</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#6\">Relief moving to Kanso</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#7\">Next steps</a></li>\n</ul>\n<p>Check it out, and please let us know what you think!</p>\n</p></p></p></p></p></p></p></p></p></p>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Project Overview",
    "local_header_href": "#project-overview",
    "chunk_text": "<h4>Project Overview</h4><p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p><center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center><p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p><center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center><p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p><p>I already addressed a number of issues in realising this project and am documenting my progress here on the blog, in the three categories\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/desktop\">desktop</a>,\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/cloud\">cloud</a> and\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/mobile\">mobile</a>.\n\n<p>Here is an overview of the results presented so far, both for this project and some previous related topics, classified into those three categories:</p>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/cloud-mobile-extensible-storage-data-use-in-schedules.html\">Project overview and Tech Summit proposal</a>\n<li>Desktop</li>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/revit-2014-api-and-room-plan-view-boundary-polygon-loops.html\">Room plan view boundary loops</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/sort-and-orient-curves-to-form-a-contiguous-loop.html\">Sort and orient curves to form a contiguous loop</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/extrusion-analyser-and-plan-view-boundaries.html\">Extrusion analyser and plan view boundaries</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/curve-following-face-and-bounding-box-implementation.html\">Curve following face and bounding box implementation</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/geosnoop-net-boundary-curve-loop-visualisation.html\">GeoSnoop boundary curve loop visualisation</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/desktop-to-cloud-via-dreamseat-couchdb-client.html\">Desktop to cloud via DreamSeat CouchDB Client</a>\n</li></ul>\n<li>Cloud</li>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/06/getting-going-with-the-cloud.html\">Getting Going with the Cloud</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/09/apollonian-packing-of-spheres-via-web-service-and-avf.html\">Apollonian Sphere Packing Web Service and AVF</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/12/the-bim-360-glue-viewer-and-rest-api.html\">The BIM 360 Glue Viewer and REST API</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/12/bim-360-glue-rest-api-authentication-using-python.html\">BIM 360 Glue REST API Authentication Using Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/03/relax-simple-free-cloud-based-data-repository-with-nosql-couchdb-and-iriscouch.html\">Free Cloud Based Data Repository with NoSQL, CouchDB, and IrisCouch</a></li>\n</ul>\n<li>Mobile</li>\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/08/validate-roof-type-and-view-obj-on-android.html\">Testing my OBJ exporter on Android</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/09/mobile-device-room-location.html\">Mobile Device Room Location</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2012/10/room-polygon-and-furniture-picker-in-svg.html\">Room Polygon and Furniture Picker in SVG</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/02/2d-svg-editing-on-mobile-device-with-rapha%C3%ABl.html\">2D SVG Editing on Mobile Device with Raphael</a></li>\n</ul>\n</li></ul>\n<a name=\"3\"></a>\n<h4>Replicating a CouchDB with Python</h4>\n<p>In my last step, I determined the room, furniture and equipment plan view boundary polygons and uploaded them to a CouchDB database in the cloud, hosted on IrisCouch.</p>\n<p>To play around interactively with that data, I would prefer to store it locally instead of on the server.</p>\n<p>The easiest way to achieve this is to replicate the database.</p>\n<p>Replicating a CouchDB repository is trivial, since it has built-in support for that.</p>\n<p>All you need to do is specify the source and target database name and URL.</p>\n<p>Also, as you may know, I love Python for command-line scripting.</p>\n<p>Happily, several\n\n<a href=\"http://wiki.apache.org/couchdb/Getting_started_with_Python\">\nCouchDB interfaces for Python</a> are\n\navailable.\nAs you can see on that page, they can be pretty simple.</p>\n<p><a href=\"http://couchdbkit.org\">\nCouchdbkit</a> seems\n\nwell supported and does the job.</p>\n<p>Here is a little Python script that replicates the database 'rooms' created by my Revit add-in in IrisCouch from the web to a new database 'rooms2' my local CouchDB installation:</p>\n<pre class=\"code\">\n<span style=\"color: #808080\">#!/usr/bin/python</span>\n<span style=\"color: #008000; font-weight: bold\">import</span> <span style=\"color: #0e84b5; font-weight: bold\">couchdb</span>\n\nserver <span style=\"color: #303030\">=</span> couchdb<span style=\"color: #303030\">.</span>Server()\nserver<span style=\"color: #303030\">.</span>create( <span style=\"background-color: #fff0f0\">'rooms2'</span> )\nserver<span style=\"color: #303030\">.</span>replicate(\n  <span style=\"background-color: #fff0f0\">'http://jt.iriscouch.com/rooms'</span>,\n  <span style=\"background-color: #fff0f0\">'rooms2'</span> )\n</pre>\n<p>You cannot make it much shorter or simpler than that, can you?</p>\n<a name=\"4\"></a>\n<h4>Same Origin Policy Snag and Resolution</h4>\n<p>I was originally envisioning a simple architecture composed of three components on the desktop, in the cloud, and on the mobile device, respectively, as illustrated above.</p>\n<p>I started looking at how to access the cloud-based data repository from the mobile device and closed my last foray into this area mentioning that I had a nasty surprise discovering that the strict\n\n<a href=\"http://www.w3.org/Security/wiki/Same_Origin_Policy\">\nsame origin policy</a> prevents\n\nmy simple JavaScript application from accessing my IrisCouch domain, so I cannot easily read the data on the mobile device in the manner I had expected.\n\n<p>The discovery cost me a few grey hairs and some sleep, but I found a good and obvious solution for that which you are probably all aware of already:\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.\n\n<p>In fact, this even simplifies things, in the end, since I really have nothing at all to install or implement on the mobile device, and my list of components to implement is reduced from three to two.\nOk, it adds some complication to the cloud stuff, of course... or actually just additional learning opportunities.</p>\n<p>I had already decided that NoSQL and the CouchDB implementation look like good candidates for my data repository requirements, and that I can test and host them in the cloud for free using the IrisCouch server.\nPlease refer to the link in the overview above for more info on these.</p>\n<p>Happily, CouchDB offers full support for server-side scripting.\nThe same-origin policy effectively requires that the HTML from which the JavaScript is loaded must be served up from CouchDB.\nThis can be done by attaching an HTML document to a CouchDB document.\nYou can do this manually, or through the use of CouchApps.\n\n\n<a name=\"5\"></a>\n<h4>Learning and Struggling with CouchApps</h4>\n<p>CouchApps are CouchDB generation environments and tools for web application developers interested in creating database-driven applications using nothing but HTML, CSS, and JavaScript.\n\n<p>A CouchApp is simply a collection of files that completely defines a CouchDB database to simplify development, deployment and maintenance.\nSimple command-line tools are used to synchronise the file collection with the real live CouchDB implementation.</p>\n<p>I dived into several of the numerous CouchApp tutorials and was so excited I ended up spending entire nights at it, once with no sleep at all.</p>\n<p>Here are some of the things I looked at:</p>\n<ul>\n<li><a href=\"http://www.couchapp.org/page/getting-started\">Getting started</a></li>\n<li><a href=\"http://blog.edparcell.com/using-jquery-and-couchdb-to-build-a-simple-we\">Build a simple CouchApp</a></li>\n<li><a href=\"http://www.ibm.com/developerworks/opensource/tutorials/os-couchapp/index.html\">Good IBM CouchApp tutorial</a></li>\n<li><a href=\"http://railsware.com/blog/2012/03/12/couchdb-and-couchapp-part-1\">A short and effective CouchApp and JavaScript tutorial</a></li>\n<li><a href=\"http://couchapp.org/page/index\">A better introduction and some more modern alternatives</a></li>\n<li><a href=\"http://daleharvey.github.io/jquery.couch.js-docs/symbols/index.html\">Documentation for jquery.couch.js</a></li>\n<li><a href=\"http://vimeo.com/26147136\">A very clear and impressive CouchApp video tutorial</a> by Max Ogden</li>\n<li><a href=\"https://github.com/mikeal/node.couchapp.js\">Very impressive node CouchApp JavaScript library node.couchapp.js</a></li>\n<li><a href=\"https://github.com/maxogden/art-of-node\">Using node.js for effective asynchronous processing</a></li>\n<li><a href=\"http://jsconf.eu/2010/speaker/nodejs_couchdb_crazy_delicious.html\">node.js + CouchDB == Crazy Delicious</a> video presentation</li>\n</ul>\n<p>Unfortunately, I found it pretty confusing.\nI learned a huge amount and achieved very little, partly due to the fact that several different CouchApp implementations exist and are used in parallel, and the tutorials do not specify exactly which version they are based on.</p>\n<p>Still, I learned enough to continue feeling very enthusiastic about this approach, and then found an easier solution.</p>\n<a name=\"6\"></a>\n<h4>Relief Moving to Kanso</h4>\n<p>After struggling with different CouchApp implementations, I discovered\n\n<a href=\"http://kan.so\">Kanso</a>,\n\ntoting itself \"the best way to create and share apps on CouchDB\".\n\n<p>With the little that I know so far, I fully agree with that.\nApparently, kanso is the Japanese phrase for simplicity, or, more specifically, simplifying the complex.</p>\n<p>So easy!\nEverything works!\nThe\n\n<a href=\"http://kan.so/docs\">\ndocumentation</a>\n\nincludes a short and succinct getting started tutorial that explains a lot.</p>\n<!--\n<p>Before showing you my first use of Kanso to read and present my room loops uploaded from the Revit add-in, stored in CouchDB on the cloud, via server-side scripting, I'll just update my add-in a bit to export the model and levl data as well as the room and furniture, then replicate the IrisCouch cloud hosted database on my local machine using a short Python script for easier access.</p>\n-->\n<p>Later I found\n\n<a href=\"http://caolan.github.io/kanso/guides/getting_started.html\">\nanother tutorial</a> that\n\ngoes further faster than the one included in the documentation pages.\n\n<p>Later still, I found this extremely well documented\n\n<a href=\"https://github.com/mauget/opto3-couchapp\">\ncomplete application</a> that\n\ncan be\n\n<a href=\"http://mauget.cloudant.com/opto3/_design/opto/index.html\">\ntested online</a> and\n\ndemonstrates numerous additional important new features.</p>\n<p>After studying these samples and trying to reuse some of the powerful functionality they provide, I am returning more and more often to the\n\n<a href=\"http://guide.couchdb.org\">Definite Guide for CouchDB</a> and\n\nfinally starting to understand the basics of view, show and list functions, etc.</p>\n<p>Bit by bit, I am managing to get some SVG graphics to display in my server-side scripts.\nMaking use of the Raphael library, as I was planning to do, may prove hard, since there is no ready-built Kanso package for it.\nI may therefore revert to implementing my room furniture placement editor in pure SVG instead.</p>\n<a name=\"7\"></a>\n<h4>Next Steps</h4>\n<p>My next steps will be:</p>\n<ul>\n<li>Separation of symbol and instance data in my add-in and database structure: currently, the furniture loops are placed absolutely, and multiple instances of a symbol duplicate the same loop over and over again at different locations. I will rewrite this to separate the furniture loop definition, defined by the family symbol, and its placement, defined by the instance. This needs to be done anyway to enable editing the placement data through the editor interaction on the mobile device.</li>\n<li>Learn how to use templates in Kanso.</li>\n<li>Implement server-side generated SVG code to display the room and furniture plan in CouchDB using Kanso.</li>\n<li>Implement editing of SVG on the mobile device and reflect changes back to CouchDB (I do not know how yet).</li>\n<li>Implement Idling event handler and polling of CouchDB in the desktop add-in to reflect the changes back to the BIM in real-time.</li>\n<li>Implement an external application wrapper for the add-in providing four commands:</li>\n<ul>\n<li>Upload to cloud</li>\n<li>Refresh from cloud</li>\n<li>Subscribe to cloud</li>\n<li>Unsubscribe from cloud</li>\n</ul>\n</ul>\n<p>I know exactly how to address all these points now, except for reflecting back the SVG editor changes to the CouchDB.</p>\n<p>I remain excited and optimistic and look forward to hearing your comments and suggestions.</p>\n<hr/>\n<h1>Cloud and Mobile</h1>\n<h3>Room Editor Project Overview and CouchDB Configuration</h3>\n<p>By\n\n<a href=\"http://adndevblog.typepad.com/cloud_and_mobile/jeremy-tammik.html\">\nJeremy</a>\n<a href=\"http://thebuildingcoder.typepad.com/blog/about-the-author.html\">\nTammik</a>.</p>\n<p>I am continuing the research and development for my cloud-based round-trip 2D Revit model editing project.\n\n<p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p>\n<center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center>\n<p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p>\n<center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center>\n<p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p>\n<p>Here are some issues I tackled since my last report:\n\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#2\">Project Overview</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#3\">Replicating a CouchDB with Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#4\">Same origin policy snag and resolution</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#5\">Learning and struggling with CouchApps</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#6\">Relief moving to Kanso</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#7\">Next steps</a></li>\n</ul>\n<p>Check it out, and please let us know what you think!</p>\n</p></p></p></p></p></p></p></p></p>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Replicating a CouchDB with Python",
    "local_header_href": "#replicating-a-couchdb-with-python",
    "chunk_text": "<h4>Replicating a CouchDB with Python</h4><p>In my last step, I determined the room, furniture and equipment plan view boundary polygons and uploaded them to a CouchDB database in the cloud, hosted on IrisCouch.</p><p>To play around interactively with that data, I would prefer to store it locally instead of on the server.</p><p>The easiest way to achieve this is to replicate the database.</p><p>Replicating a CouchDB repository is trivial, since it has built-in support for that.</p><p>All you need to do is specify the source and target database name and URL.</p><p>Also, as you may know, I love Python for command-line scripting.</p><p>Happily, several\n\n<a href=\"http://wiki.apache.org/couchdb/Getting_started_with_Python\">\nCouchDB interfaces for Python</a> are\n\navailable.\nAs you can see on that page, they can be pretty simple.</p><p><a href=\"http://couchdbkit.org\">\nCouchdbkit</a> seems\n\nwell supported and does the job.</p><p>Here is a little Python script that replicates the database 'rooms' created by my Revit add-in in IrisCouch from the web to a new database 'rooms2' my local CouchDB installation:</p><pre class=\"code\">\n<span style=\"color: #808080\">#!/usr/bin/python</span>\n<span style=\"color: #008000; font-weight: bold\">import</span> <span style=\"color: #0e84b5; font-weight: bold\">couchdb</span>\n\nserver <span style=\"color: #303030\">=</span> couchdb<span style=\"color: #303030\">.</span>Server()\nserver<span style=\"color: #303030\">.</span>create( <span style=\"background-color: #fff0f0\">'rooms2'</span> )\nserver<span style=\"color: #303030\">.</span>replicate(\n  <span style=\"background-color: #fff0f0\">'http://jt.iriscouch.com/rooms'</span>,\n  <span style=\"background-color: #fff0f0\">'rooms2'</span> )\n</pre><p>You cannot make it much shorter or simpler than that, can you?</p><a name=\"4\"></a>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Same Origin Policy Snag and Resolution",
    "local_header_href": "#same-origin-policy-snag-and-resolution",
    "chunk_text": "<h4>Same Origin Policy Snag and Resolution</h4><p>I was originally envisioning a simple architecture composed of three components on the desktop, in the cloud, and on the mobile device, respectively, as illustrated above.</p><p>I started looking at how to access the cloud-based data repository from the mobile device and closed my last foray into this area mentioning that I had a nasty surprise discovering that the strict\n\n<a href=\"http://www.w3.org/Security/wiki/Same_Origin_Policy\">\nsame origin policy</a> prevents\n\nmy simple JavaScript application from accessing my IrisCouch domain, so I cannot easily read the data on the mobile device in the manner I had expected.\n\n<p>The discovery cost me a few grey hairs and some sleep, but I found a good and obvious solution for that which you are probably all aware of already:\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.\n\n<p>In fact, this even simplifies things, in the end, since I really have nothing at all to install or implement on the mobile device, and my list of components to implement is reduced from three to two.\nOk, it adds some complication to the cloud stuff, of course... or actually just additional learning opportunities.</p>\n<p>I had already decided that NoSQL and the CouchDB implementation look like good candidates for my data repository requirements, and that I can test and host them in the cloud for free using the IrisCouch server.\nPlease refer to the link in the overview above for more info on these.</p>\n<p>Happily, CouchDB offers full support for server-side scripting.\nThe same-origin policy effectively requires that the HTML from which the JavaScript is loaded must be served up from CouchDB.\nThis can be done by attaching an HTML document to a CouchDB document.\nYou can do this manually, or through the use of CouchApps.\n\n\n<a name=\"5\"></a>\n<h4>Learning and Struggling with CouchApps</h4>\n<p>CouchApps are CouchDB generation environments and tools for web application developers interested in creating database-driven applications using nothing but HTML, CSS, and JavaScript.\n\n<p>A CouchApp is simply a collection of files that completely defines a CouchDB database to simplify development, deployment and maintenance.\nSimple command-line tools are used to synchronise the file collection with the real live CouchDB implementation.</p>\n<p>I dived into several of the numerous CouchApp tutorials and was so excited I ended up spending entire nights at it, once with no sleep at all.</p>\n<p>Here are some of the things I looked at:</p>\n<ul>\n<li><a href=\"http://www.couchapp.org/page/getting-started\">Getting started</a></li>\n<li><a href=\"http://blog.edparcell.com/using-jquery-and-couchdb-to-build-a-simple-we\">Build a simple CouchApp</a></li>\n<li><a href=\"http://www.ibm.com/developerworks/opensource/tutorials/os-couchapp/index.html\">Good IBM CouchApp tutorial</a></li>\n<li><a href=\"http://railsware.com/blog/2012/03/12/couchdb-and-couchapp-part-1\">A short and effective CouchApp and JavaScript tutorial</a></li>\n<li><a href=\"http://couchapp.org/page/index\">A better introduction and some more modern alternatives</a></li>\n<li><a href=\"http://daleharvey.github.io/jquery.couch.js-docs/symbols/index.html\">Documentation for jquery.couch.js</a></li>\n<li><a href=\"http://vimeo.com/26147136\">A very clear and impressive CouchApp video tutorial</a> by Max Ogden</li>\n<li><a href=\"https://github.com/mikeal/node.couchapp.js\">Very impressive node CouchApp JavaScript library node.couchapp.js</a></li>\n<li><a href=\"https://github.com/maxogden/art-of-node\">Using node.js for effective asynchronous processing</a></li>\n<li><a href=\"http://jsconf.eu/2010/speaker/nodejs_couchdb_crazy_delicious.html\">node.js + CouchDB == Crazy Delicious</a> video presentation</li>\n</ul>\n<p>Unfortunately, I found it pretty confusing.\nI learned a huge amount and achieved very little, partly due to the fact that several different CouchApp implementations exist and are used in parallel, and the tutorials do not specify exactly which version they are based on.</p>\n<p>Still, I learned enough to continue feeling very enthusiastic about this approach, and then found an easier solution.</p>\n<a name=\"6\"></a>\n<h4>Relief Moving to Kanso</h4>\n<p>After struggling with different CouchApp implementations, I discovered\n\n<a href=\"http://kan.so\">Kanso</a>,\n\ntoting itself \"the best way to create and share apps on CouchDB\".\n\n<p>With the little that I know so far, I fully agree with that.\nApparently, kanso is the Japanese phrase for simplicity, or, more specifically, simplifying the complex.</p>\n<p>So easy!\nEverything works!\nThe\n\n<a href=\"http://kan.so/docs\">\ndocumentation</a>\n\nincludes a short and succinct getting started tutorial that explains a lot.</p>\n<!--\n<p>Before showing you my first use of Kanso to read and present my room loops uploaded from the Revit add-in, stored in CouchDB on the cloud, via server-side scripting, I'll just update my add-in a bit to export the model and levl data as well as the room and furniture, then replicate the IrisCouch cloud hosted database on my local machine using a short Python script for easier access.</p>\n-->\n<p>Later I found\n\n<a href=\"http://caolan.github.io/kanso/guides/getting_started.html\">\nanother tutorial</a> that\n\ngoes further faster than the one included in the documentation pages.\n\n<p>Later still, I found this extremely well documented\n\n<a href=\"https://github.com/mauget/opto3-couchapp\">\ncomplete application</a> that\n\ncan be\n\n<a href=\"http://mauget.cloudant.com/opto3/_design/opto/index.html\">\ntested online</a> and\n\ndemonstrates numerous additional important new features.</p>\n<p>After studying these samples and trying to reuse some of the powerful functionality they provide, I am returning more and more often to the\n\n<a href=\"http://guide.couchdb.org\">Definite Guide for CouchDB</a> and\n\nfinally starting to understand the basics of view, show and list functions, etc.</p>\n<p>Bit by bit, I am managing to get some SVG graphics to display in my server-side scripts.\nMaking use of the Raphael library, as I was planning to do, may prove hard, since there is no ready-built Kanso package for it.\nI may therefore revert to implementing my room furniture placement editor in pure SVG instead.</p>\n<a name=\"7\"></a>\n<h4>Next Steps</h4>\n<p>My next steps will be:</p>\n<ul>\n<li>Separation of symbol and instance data in my add-in and database structure: currently, the furniture loops are placed absolutely, and multiple instances of a symbol duplicate the same loop over and over again at different locations. I will rewrite this to separate the furniture loop definition, defined by the family symbol, and its placement, defined by the instance. This needs to be done anyway to enable editing the placement data through the editor interaction on the mobile device.</li>\n<li>Learn how to use templates in Kanso.</li>\n<li>Implement server-side generated SVG code to display the room and furniture plan in CouchDB using Kanso.</li>\n<li>Implement editing of SVG on the mobile device and reflect changes back to CouchDB (I do not know how yet).</li>\n<li>Implement Idling event handler and polling of CouchDB in the desktop add-in to reflect the changes back to the BIM in real-time.</li>\n<li>Implement an external application wrapper for the add-in providing four commands:</li>\n<ul>\n<li>Upload to cloud</li>\n<li>Refresh from cloud</li>\n<li>Subscribe to cloud</li>\n<li>Unsubscribe from cloud</li>\n</ul>\n</ul>\n<p>I know exactly how to address all these points now, except for reflecting back the SVG editor changes to the CouchDB.</p>\n<p>I remain excited and optimistic and look forward to hearing your comments and suggestions.</p>\n<hr/>\n<h1>Cloud and Mobile</h1>\n<h3>Room Editor Project Overview and CouchDB Configuration</h3>\n<p>By\n\n<a href=\"http://adndevblog.typepad.com/cloud_and_mobile/jeremy-tammik.html\">\nJeremy</a>\n<a href=\"http://thebuildingcoder.typepad.com/blog/about-the-author.html\">\nTammik</a>.</p>\n<p>I am continuing the research and development for my cloud-based round-trip 2D Revit model editing project.\n\n<p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p>\n<center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center>\n<p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p>\n<center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center>\n<p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p>\n<p>Here are some issues I tackled since my last report:\n\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#2\">Project Overview</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#3\">Replicating a CouchDB with Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#4\">Same origin policy snag and resolution</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#5\">Learning and struggling with CouchApps</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#6\">Relief moving to Kanso</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#7\">Next steps</a></li>\n</ul>\n<p>Check it out, and please let us know what you think!</p>\n</p></p></p></p></p></p></p></p>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Learning and Struggling with CouchApps",
    "local_header_href": "#learning-and-struggling-with-couchapps",
    "chunk_text": "<h4>Learning and Struggling with CouchApps</h4><p>CouchApps are CouchDB generation environments and tools for web application developers interested in creating database-driven applications using nothing but HTML, CSS, and JavaScript.\n\n<p>A CouchApp is simply a collection of files that completely defines a CouchDB database to simplify development, deployment and maintenance.\nSimple command-line tools are used to synchronise the file collection with the real live CouchDB implementation.</p>\n<p>I dived into several of the numerous CouchApp tutorials and was so excited I ended up spending entire nights at it, once with no sleep at all.</p>\n<p>Here are some of the things I looked at:</p>\n<ul>\n<li><a href=\"http://www.couchapp.org/page/getting-started\">Getting started</a></li>\n<li><a href=\"http://blog.edparcell.com/using-jquery-and-couchdb-to-build-a-simple-we\">Build a simple CouchApp</a></li>\n<li><a href=\"http://www.ibm.com/developerworks/opensource/tutorials/os-couchapp/index.html\">Good IBM CouchApp tutorial</a></li>\n<li><a href=\"http://railsware.com/blog/2012/03/12/couchdb-and-couchapp-part-1\">A short and effective CouchApp and JavaScript tutorial</a></li>\n<li><a href=\"http://couchapp.org/page/index\">A better introduction and some more modern alternatives</a></li>\n<li><a href=\"http://daleharvey.github.io/jquery.couch.js-docs/symbols/index.html\">Documentation for jquery.couch.js</a></li>\n<li><a href=\"http://vimeo.com/26147136\">A very clear and impressive CouchApp video tutorial</a> by Max Ogden</li>\n<li><a href=\"https://github.com/mikeal/node.couchapp.js\">Very impressive node CouchApp JavaScript library node.couchapp.js</a></li>\n<li><a href=\"https://github.com/maxogden/art-of-node\">Using node.js for effective asynchronous processing</a></li>\n<li><a href=\"http://jsconf.eu/2010/speaker/nodejs_couchdb_crazy_delicious.html\">node.js + CouchDB == Crazy Delicious</a> video presentation</li>\n</ul>\n<p>Unfortunately, I found it pretty confusing.\nI learned a huge amount and achieved very little, partly due to the fact that several different CouchApp implementations exist and are used in parallel, and the tutorials do not specify exactly which version they are based on.</p>\n<p>Still, I learned enough to continue feeling very enthusiastic about this approach, and then found an easier solution.</p>\n<a name=\"6\"></a>\n<h4>Relief Moving to Kanso</h4>\n<p>After struggling with different CouchApp implementations, I discovered\n\n<a href=\"http://kan.so\">Kanso</a>,\n\ntoting itself \"the best way to create and share apps on CouchDB\".\n\n<p>With the little that I know so far, I fully agree with that.\nApparently, kanso is the Japanese phrase for simplicity, or, more specifically, simplifying the complex.</p>\n<p>So easy!\nEverything works!\nThe\n\n<a href=\"http://kan.so/docs\">\ndocumentation</a>\n\nincludes a short and succinct getting started tutorial that explains a lot.</p>\n<!--\n<p>Before showing you my first use of Kanso to read and present my room loops uploaded from the Revit add-in, stored in CouchDB on the cloud, via server-side scripting, I'll just update my add-in a bit to export the model and levl data as well as the room and furniture, then replicate the IrisCouch cloud hosted database on my local machine using a short Python script for easier access.</p>\n-->\n<p>Later I found\n\n<a href=\"http://caolan.github.io/kanso/guides/getting_started.html\">\nanother tutorial</a> that\n\ngoes further faster than the one included in the documentation pages.\n\n<p>Later still, I found this extremely well documented\n\n<a href=\"https://github.com/mauget/opto3-couchapp\">\ncomplete application</a> that\n\ncan be\n\n<a href=\"http://mauget.cloudant.com/opto3/_design/opto/index.html\">\ntested online</a> and\n\ndemonstrates numerous additional important new features.</p>\n<p>After studying these samples and trying to reuse some of the powerful functionality they provide, I am returning more and more often to the\n\n<a href=\"http://guide.couchdb.org\">Definite Guide for CouchDB</a> and\n\nfinally starting to understand the basics of view, show and list functions, etc.</p>\n<p>Bit by bit, I am managing to get some SVG graphics to display in my server-side scripts.\nMaking use of the Raphael library, as I was planning to do, may prove hard, since there is no ready-built Kanso package for it.\nI may therefore revert to implementing my room furniture placement editor in pure SVG instead.</p>\n<a name=\"7\"></a>\n<h4>Next Steps</h4>\n<p>My next steps will be:</p>\n<ul>\n<li>Separation of symbol and instance data in my add-in and database structure: currently, the furniture loops are placed absolutely, and multiple instances of a symbol duplicate the same loop over and over again at different locations. I will rewrite this to separate the furniture loop definition, defined by the family symbol, and its placement, defined by the instance. This needs to be done anyway to enable editing the placement data through the editor interaction on the mobile device.</li>\n<li>Learn how to use templates in Kanso.</li>\n<li>Implement server-side generated SVG code to display the room and furniture plan in CouchDB using Kanso.</li>\n<li>Implement editing of SVG on the mobile device and reflect changes back to CouchDB (I do not know how yet).</li>\n<li>Implement Idling event handler and polling of CouchDB in the desktop add-in to reflect the changes back to the BIM in real-time.</li>\n<li>Implement an external application wrapper for the add-in providing four commands:</li>\n<ul>\n<li>Upload to cloud</li>\n<li>Refresh from cloud</li>\n<li>Subscribe to cloud</li>\n<li>Unsubscribe from cloud</li>\n</ul>\n</ul>\n<p>I know exactly how to address all these points now, except for reflecting back the SVG editor changes to the CouchDB.</p>\n<p>I remain excited and optimistic and look forward to hearing your comments and suggestions.</p>\n<hr/>\n<h1>Cloud and Mobile</h1>\n<h3>Room Editor Project Overview and CouchDB Configuration</h3>\n<p>By\n\n<a href=\"http://adndevblog.typepad.com/cloud_and_mobile/jeremy-tammik.html\">\nJeremy</a>\n<a href=\"http://thebuildingcoder.typepad.com/blog/about-the-author.html\">\nTammik</a>.</p>\n<p>I am continuing the research and development for my cloud-based round-trip 2D Revit model editing project.\n\n<p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p>\n<center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center>\n<p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p>\n<center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center>\n<p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p>\n<p>Here are some issues I tackled since my last report:\n\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#2\">Project Overview</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#3\">Replicating a CouchDB with Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#4\">Same origin policy snag and resolution</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#5\">Learning and struggling with CouchApps</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#6\">Relief moving to Kanso</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#7\">Next steps</a></li>\n</ul>\n<p>Check it out, and please let us know what you think!</p>\n</p></p></p></p></p>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Relief Moving to Kanso",
    "local_header_href": "#relief-moving-to-kanso",
    "chunk_text": "<h4>Relief Moving to Kanso</h4><p>After struggling with different CouchApp implementations, I discovered\n\n<a href=\"http://kan.so\">Kanso</a>,\n\ntoting itself \"the best way to create and share apps on CouchDB\".\n\n<p>With the little that I know so far, I fully agree with that.\nApparently, kanso is the Japanese phrase for simplicity, or, more specifically, simplifying the complex.</p>\n<p>So easy!\nEverything works!\nThe\n\n<a href=\"http://kan.so/docs\">\ndocumentation</a>\n\nincludes a short and succinct getting started tutorial that explains a lot.</p>\n<!--\n<p>Before showing you my first use of Kanso to read and present my room loops uploaded from the Revit add-in, stored in CouchDB on the cloud, via server-side scripting, I'll just update my add-in a bit to export the model and levl data as well as the room and furniture, then replicate the IrisCouch cloud hosted database on my local machine using a short Python script for easier access.</p>\n-->\n<p>Later I found\n\n<a href=\"http://caolan.github.io/kanso/guides/getting_started.html\">\nanother tutorial</a> that\n\ngoes further faster than the one included in the documentation pages.\n\n<p>Later still, I found this extremely well documented\n\n<a href=\"https://github.com/mauget/opto3-couchapp\">\ncomplete application</a> that\n\ncan be\n\n<a href=\"http://mauget.cloudant.com/opto3/_design/opto/index.html\">\ntested online</a> and\n\ndemonstrates numerous additional important new features.</p>\n<p>After studying these samples and trying to reuse some of the powerful functionality they provide, I am returning more and more often to the\n\n<a href=\"http://guide.couchdb.org\">Definite Guide for CouchDB</a> and\n\nfinally starting to understand the basics of view, show and list functions, etc.</p>\n<p>Bit by bit, I am managing to get some SVG graphics to display in my server-side scripts.\nMaking use of the Raphael library, as I was planning to do, may prove hard, since there is no ready-built Kanso package for it.\nI may therefore revert to implementing my room furniture placement editor in pure SVG instead.</p>\n<a name=\"7\"></a>\n<h4>Next Steps</h4>\n<p>My next steps will be:</p>\n<ul>\n<li>Separation of symbol and instance data in my add-in and database structure: currently, the furniture loops are placed absolutely, and multiple instances of a symbol duplicate the same loop over and over again at different locations. I will rewrite this to separate the furniture loop definition, defined by the family symbol, and its placement, defined by the instance. This needs to be done anyway to enable editing the placement data through the editor interaction on the mobile device.</li>\n<li>Learn how to use templates in Kanso.</li>\n<li>Implement server-side generated SVG code to display the room and furniture plan in CouchDB using Kanso.</li>\n<li>Implement editing of SVG on the mobile device and reflect changes back to CouchDB (I do not know how yet).</li>\n<li>Implement Idling event handler and polling of CouchDB in the desktop add-in to reflect the changes back to the BIM in real-time.</li>\n<li>Implement an external application wrapper for the add-in providing four commands:</li>\n<ul>\n<li>Upload to cloud</li>\n<li>Refresh from cloud</li>\n<li>Subscribe to cloud</li>\n<li>Unsubscribe from cloud</li>\n</ul>\n</ul>\n<p>I know exactly how to address all these points now, except for reflecting back the SVG editor changes to the CouchDB.</p>\n<p>I remain excited and optimistic and look forward to hearing your comments and suggestions.</p>\n<hr/>\n<h1>Cloud and Mobile</h1>\n<h3>Room Editor Project Overview and CouchDB Configuration</h3>\n<p>By\n\n<a href=\"http://adndevblog.typepad.com/cloud_and_mobile/jeremy-tammik.html\">\nJeremy</a>\n<a href=\"http://thebuildingcoder.typepad.com/blog/about-the-author.html\">\nTammik</a>.</p>\n<p>I am continuing the research and development for my cloud-based round-trip 2D Revit model editing project.\n\n<p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p>\n<center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center>\n<p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p>\n<center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center>\n<p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p>\n<p>Here are some issues I tackled since my last report:\n\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#2\">Project Overview</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#3\">Replicating a CouchDB with Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#4\">Same origin policy snag and resolution</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#5\">Learning and struggling with CouchApps</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#6\">Relief moving to Kanso</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#7\">Next steps</a></li>\n</ul>\n<p>Check it out, and please let us know what you think!</p>\n</p></p></p></p>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Next Steps",
    "local_header_href": "#next-steps",
    "chunk_text": "<h4>Next Steps</h4><p>My next steps will be:</p><ul>\n<li>Separation of symbol and instance data in my add-in and database structure: currently, the furniture loops are placed absolutely, and multiple instances of a symbol duplicate the same loop over and over again at different locations. I will rewrite this to separate the furniture loop definition, defined by the family symbol, and its placement, defined by the instance. This needs to be done anyway to enable editing the placement data through the editor interaction on the mobile device.</li>\n<li>Learn how to use templates in Kanso.</li>\n<li>Implement server-side generated SVG code to display the room and furniture plan in CouchDB using Kanso.</li>\n<li>Implement editing of SVG on the mobile device and reflect changes back to CouchDB (I do not know how yet).</li>\n<li>Implement Idling event handler and polling of CouchDB in the desktop add-in to reflect the changes back to the BIM in real-time.</li>\n<li>Implement an external application wrapper for the add-in providing four commands:</li>\n<ul>\n<li>Upload to cloud</li>\n<li>Refresh from cloud</li>\n<li>Subscribe to cloud</li>\n<li>Unsubscribe from cloud</li>\n</ul>\n</ul><p>I know exactly how to address all these points now, except for reflecting back the SVG editor changes to the CouchDB.</p><p>I remain excited and optimistic and look forward to hearing your comments and suggestions.</p><hr/>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Cloud and Mobile",
    "local_header_href": "#cloud-and-mobile",
    "chunk_text": "<h1>Cloud and Mobile</h1>"
  },
  {
    "original_filename": "0932_room_edit_couchdb_conf",
    "header_text": "Room Editor Project Overview and CouchDB Configuration",
    "local_header_href": "#room-editor-project-overview-and-couchdb-configuration",
    "chunk_text": "<h3>Room Editor Project Overview and CouchDB Configuration</h3><p>By\n\n<a href=\"http://adndevblog.typepad.com/cloud_and_mobile/jeremy-tammik.html\">\nJeremy</a>\n<a href=\"http://thebuildingcoder.typepad.com/blog/about-the-author.html\">\nTammik</a>.</p><p>I am continuing the research and development for my cloud-based round-trip 2D Revit model editing project.\n\n<p>To recapitulate, the grand plan is to grab a 2D floor plan with furniture and equipment layout from the BIM, upload it to the cloud, and make it accessible for viewing on mobile devices:</p>\n<center>\n<img alt=\"Upload from desktop to cloud and view on mobile device\" src=\"img/desktop_cloud_mobile_2_upload.png\" width=\"200\"/>\n</center>\n<p>Furthermore, I am enabling some simple editing operations on the mobile device, e.g. to move the furniture and equipment around in the room a bit, update the cloud-based data repository, and reflect these changes back into the desktop BIM:</p>\n<center>\n<img alt=\"Edit on mobile device, update data repository and BIM\" src=\"img/desktop_cloud_mobile_3_edit_and_download.png\" width=\"200\"/>\n</center>\n<p>All of this with absolutely nil installation on the mobile device, and thus totally ubiquitous, using\n\n<a href=\"http://en.wikipedia.org/wiki/Scalable_Vector_Graphics\">\nSVG</a> and\n\n<a href=\"http://en.wikipedia.org/wiki/Server-side_scripting\">\nserver-side scripting</a>.</p>\n<p>Here are some issues I tackled since my last report:\n\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#2\">Project Overview</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#3\">Replicating a CouchDB with Python</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#4\">Same origin policy snag and resolution</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#5\">Learning and struggling with CouchApps</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#6\">Relief moving to Kanso</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/04/room-editor-project-overview-and-couchdb-configuration.html#7\">Next steps</a></li>\n</ul>\n<p>Check it out, and please let us know what you think!</p>\n</p></p>"
  }
]