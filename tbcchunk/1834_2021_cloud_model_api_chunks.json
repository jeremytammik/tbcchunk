[
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n<script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</head>\n\n<!---\n\nPhil Xia \nIn Revit 2021, our team updated the Revit API to support multi-region, including US and Europe, and also changed the SaveAsCloudModel interface, which accept more arguments from ForgeDM. I am wondering if you can add a new page in your blog to explain the new Cloud Model API and its changes to support Multi-Region in 2021?\nI wrote one here, and maybe we can refine it to fit the public standard.\nhttps://wiki.autodesk.com/pages/viewpage.action?pageId=629756479\n\n- BIM 360 Docs - Folder Permission API \n  The blog is published. Tiny tuning and a table is for those six permissions.\n  https://forge.autodesk.com/blog/folder-permission-api-bim-360-released\n\n- version 2021 is now available for Design Automation for Revit as well.\n \n- Revit 2021 SDK (Update April 6, 2020)\n  https://www.autodesk.com/developer-network/platform-technologies/revit\n  REVIT_2021_SDK.msi (369348608 bytes)\n\n\ntwitter:\n\nHappy Easter with Revit 2021 and its SDK, an new BIM 360 Docs folder permissions API and powerful new cloud model API functionality in the #RevitAPI #DynamoBim @AutodeskForge @AutodeskRevit #bim #ForgeDevCon https://bit.ly/cloudmodelapi\n\nA nice big egg has been laid just in time for Easter, with the beautiful springtime in full bloom\n&ndash; Revit 2021\n&ndash; BIM 360 Docs folder permission API\n&ndash; Revit 2021 multi-region cloud model API\n&ndash; Cloud model API changes\n&ndash; How to open a cloud model\n&ndash; How to save a local file to a non-workshared cloud model\n&ndash; <code>SaveAsCloudModel</code> information in web browser and via the Forge DM API...\n\nlinkedin:\n\nHappy Easter with Revit 2021 and its SDK, an new BIM 360 Docs folder permissions API and powerful new cloud model API functionality in the #RevitAPI\n\nhttps://bit.ly/cloudmodelapi\n\nA nice big egg has been laid just in time for Easter, with the beautiful springtime in full bloom:\n\n- Revit 2021\n- BIM 360 Docs folder permission API\n- Revit 2021 multi-region cloud model API\n- Cloud model API changes\n- How to open a cloud model\n- How to save a local file to a non-workshared cloud model\n- SaveAsCloudModel information in web browser and via the Forge DM API...\n\n#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk\n\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\n\n<center>\n<img src=\"img/\" alt=\"\" title=\"\" width=\"600\"/>\n<p style=\"font-size: 80%; font-style:italic\"></p>\n</center>\n\n-->"
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "Revit 2021 Cloud Model API",
    "local_header_href": "#revit-2021-cloud-model-api",
    "chunk_text": "### Revit 2021 Cloud Model API\n\nA nice big egg has been laid just in time for Easter, with the beautiful springtime in full bloom:\n\n- [Revit 2021](#2)\n- [BIM 360 Docs folder permission API](#3)\n- [Revit 2021 multi-region cloud model API](#4)\n    - [Cloud model API changes](#4.3)\n    - [How to open a cloud model](#4.4)\n    - [How to save a local file to a non-workshared cloud model](#4.5)\n    - [`SaveAsCloudModel` information in web browser](#4.6)\n    - [`SaveAsCloudModel` information with Forge DM API](#4.7)"
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"2\"></a>Revit 2021",
    "local_header_href": "#a-name2arevit-2021",
    "chunk_text": "#### <a name=\"2\"></a>Revit 2021\n\nRevit 2021 has now been released\nwith [numerous powerful new features](https://www.autodesk.com/products/revit/new-features).\n\nThe corresponding Revit 2021 SDK is available from\nthe [Revit Developer Centre](https://www.autodesk.com/developer-network/platform-technologies/revit):\n\n- Revit 2021 SDK (Update April 6, 2020)\n  <br/>REVIT_2021_SDK.msi (369348608 bytes)"
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"3\"></a>BIM 360 Docs Folder Permission API",
    "local_header_href": "#a-name3abim-360-docs-folder-permission-api",
    "chunk_text": "#### <a name=\"3\"></a>BIM 360 Docs Folder Permission API\n\nBefore we dive into one of the important Revit 2021 API enhancements, here is a brief note to point out that\nthe [BIM 360 Docs Folder Permission API has been released](https://forge.autodesk.com/blog/folder-permission-api-bim-360-released)."
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"4\"></a>Revit 2021 Multi-Region Cloud Model API",
    "local_header_href": "#a-name4arevit-2021-multi-region-cloud-model-api",
    "chunk_text": "#### <a name=\"4\"></a>Revit 2021 Multi-Region Cloud Model API\n\nI am honoured and grateful to present the following explanation of how to use the updated Revit 2021 Cloud Model API with multi-region projects and models by Phil Xia, Team Manager, Autodesk.\n\n<!-- #### <a name=\"4.1\"></a>Background &ndash; Revit Multi-Region Cloud Model -->\n\nRevit 2021 includes support for multi-region cloud models.\n\nAutodesk provides two different BIM 360 web portals and regions with different URLs for that:\n\n- [BIM 360 US, at insight.b360.autodesk.com](https://insight.b360.autodesk.com)\n- [BIM 360 EU, at insight.b360.eu.autodesk.com](https://insight.b360.eu.autodesk.com)\n\nNow you can save your Revit cloud models to either of these two.\n\n<center>\n<img src=\"img/cloud_model_api_1.png\" alt=\"Cloud Model API\" title=\"Cloud Model API\" width=\"800\"/> <!-- 1342 -->\n</center>\n\nRevit 2021 combines the BIM 360 accounts of the current login user from different regions together in all cloud models entrances:\n\n- Revit Home\n- Save as Cloud Model dialog\n- Cloud model initialize dialog\n- Manage cloud model dialog\n\nSo, Revit users can create (upload and saveas) cloud models, authoring models from different regions in one Revit session.\n\n<!--"
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"4.2\"></a>Identifying the Region",
    "local_header_href": "#a-name42aidentifying-the-region",
    "chunk_text": "#### <a name=\"4.2\"></a>Identifying the Region\n\nNo access is provided to determine which region the BIM 360 accounts/projects/models belongs to.\nThis decision was taken based on user research, interviews and analytic data.\n\n- BIM managers can set up naming conventions for their BIM 360 accounts and projects to indicate the region.\n- Only a small percentage of BIM 360 users have both EU and US region BIM 360 accounts.\n\n-->"
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"4.3\"></a>Cloud Model API Changes",
    "local_header_href": "#a-name43acloud-model-api-changes",
    "chunk_text": "#### <a name=\"4.3\"></a>Cloud Model API Changes\n\nThe new `ModelPath` property `Region` returns the region of the BIM 360 account and project which contains this model.\n\nCloud Model API changes:\n\n- ModelPathUtils.ConvertCloudGUIDsToCloudPath( Guid projectGuid, Guid modelGuid ) is replaced\n  by ModelPathUtils.ConvertCloudGUIDsToCloudPath( string region, Guid projectGuid, Guid modelGuid )\n  &ndash; The new method provides an extra argument to indicate the region of the model to open.\n- Document.SaveAsCloudModel( string folderId, string modelName ) is replaced\n  by Document.SaveAsCloudModel( Guid accountId, Guid projectId, string folderId, string modelName )\n  &ndash; The new method provides two extra arguments to identify the cloud location more efficient and reliable."
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"4.4\"></a>How to Open a Cloud Model",
    "local_header_href": "#a-name44ahow-to-open-a-cloud-model",
    "chunk_text": "#### <a name=\"4.4\"></a>How to Open a Cloud Model\n\nThe region argument for ConvertCloudGUIDsToCloudPath is a string type and should be either \"US\" or \"EMEA\", depending on which BIM 360 region  account and project the model is stored in.\n\n- US &ndash; [insight.b360.autodesk.com](https://insight.b360.autodesk.com) &ndash; ModelPathUtils.CloudRegionUS\n- EU &ndash; [insight.b360.eu.autodesk.com](https://insight.b360.eu.autodesk.com) &ndash; ModelPathUtils.CloudRegionEMEA\n\nDepending on where the cloud model is stored, provide the appropriate region argument \"US\" or \"EMEA\", respectively.\n\n<!--\nQuestion: Why not provide the region as an ENUM type, like `Region` {`US`, `EMEA`}?\n\nWe may on-board a new region in the middle of Revit release cycle, this is one AC for Revit Cloud Model Multi-Region Support Project. Revit since 2021 has the ability to fetch the supported region from cloud and automatically supports new region when the cloud infrastructure was ready.\n-->\n\nTo convert a valid CloudPath with the Revit API call *ModelPathUtils.ConvertCloudGUIDsToCloudPath*, you need to register a Forge application and use the Forge Data Management API to get the project Guid and model Guid as the two other arguments.\n\nThe [Forge DM API reference on `GET` hubs](https://forge.autodesk.com/en/docs/data/v2/reference/http/hubs-GET) shows how to list the hubs your Forge application can access.\n\nHere is the response body of the list hubs API:\n\n<pre class=\"prettyprint\">\n  {\n    \"type\": \"hubs\",\n    \"id\": \"b.6bdabd18-6096-492b-966e-86492a4bb660\",\n    \"attributes\": {\n      \"name\": \"Wookong_EU\",\n      \"extension\": {\n        \"type\": \"hubs:autodesk.bim360:Account\",\n        \"version\": \"1.0\",\n        \"schema\": {\n          \"href\": \"https://developer.api.autodesk.com/schema/v1/versions/hubs:autodesk.bim360:Account-1.0\"\n        },\n        \"data\": {}\n      },\n      \"region\": \"EMEA\"\n    },\n    \"links\": {\n      \"self\": {\n        \"href\": \"https://developer.api.autodesk.com/project/v1/hubs/b.6bdabd18-6096-492b-966e-86492a4bb660\"\n      }\n    },\n    \"relationships\": {\n      \"projects\": {\n        \"links\": {\n          \"related\": {\n            \"href\": \"http://developer.api.autodesk.com/dm/v1/hubs/b.6bdabd18-6096-492b-966e-86492a4bb660/projects\"\n          }\n        }\n      }\n    }\n  }\n</pre>\n\nYou can filter out the BIM 360 accounts of interest using the *data.attributes.name* field.\nYou can also get the region information here; \"EMEA\" in this case.  \n\nThe [Forge DM API reference on `GET` project folder contents](https://forge.autodesk.com/en/docs/data/v2/reference/http/projects-project_id-folders-folder_id-contents-GET) shows how to list the folder contents you plan to open.\n\nThe response body looks like this:\n\n<pre class=\"prettyprint\">\n  \"included\": [\n    {\n      \"type\": \"versions\",\n      \"id\": \"urn:adsk.wipbimemeastg:fs.file:vf.VFlOMhozRMac61hJ1JB_Nw?version=1\",\n      \"attributes\": {\n        \"name\": \"C4R_12_11_2019_10_01_14 AM_28.rvt\",\n        \"displayName\": \"C4R_12_11_2019_10_01_14 AM_28.rvt\",\n        \"createTime\": \"2019-12-11T10:01:44.0000000Z\",\n        \"createUserId\": \"YZVYJQWWAJ89\",\n        \"createUserName\": \"Phil Xia\",\n        \"lastModifiedTime\": \"2019-12-11T10:01:47.0000000Z\",\n        \"lastModifiedUserId\": \"YZVYJQWWAJ89\",\n        \"lastModifiedUserName\": \"Phil Xia\",\n        \"versionNumber\": 1,\n        \"mimeType\": \"application/vnd.autodesk.r360\",\n        \"extension\": {\n          \"type\": \"versions:autodesk.bim360:C4RModel\",\n          \"version\": \"1.1.0\",\n          \"schema\": {\n            \"href\": \"https://developer.api.autodesk.com/schema/v1/versions/versions:autodesk.bim360:C4RModel-1.1.0\"\n          },\n          \"data\": {\n            \"modelVersion\": 3,\n            \"projectGuid\": \"fd1335eb-733b-480c-9d16-1a22e742ef70\",\n            \"modelType\": \"singleuser\",\n            \"latestEpisodeGuid\": \"11da0d90-e1bb-492a-b90e-f3759ca6ab39\",\n            \"mimeType\": \"application/vnd.autodesk.r360\",\n            \"modelGuid\": \"e5a59497-0d79-4df0-879d-396310288bb0\",\n            \"processState\": \"PROCESSING_COMPLETE\",\n            \"extractionState\": \"SKIPPED\",\n            \"splittingState\": \"NOT_SPLIT\",\n            \"revisionDisplayLabel\": \"1\",\n            \"sourceFileName\": \"C4R_12_11_2019_10_01_14 AM_28.rvt\"\n          }\n        }\n      },\n</pre>\n\nYou can filter out the relevant cloud model using the *included.attributes.name* field;\nthe project Guid and model Guid information is provided in the *included.attributes.extension.data* field.\n\nWith these three pieces of information &ndash; region, project guid and model guid &ndash; you can convert a valid cloud path with the new ModelPathUtils.ConvertCloudGUIDsToCloudPath method and then open the model with the OpenDocument or OpenAndActivateDocument methods."
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"4.5\"></a>How to Save a Local File to a Non-Workshared Cloud Model",
    "local_header_href": "#a-name45ahow-to-save-a-local-file-to-a-non-workshared-cloud-model",
    "chunk_text": "#### <a name=\"4.5\"></a>How to Save a Local File to a Non-Workshared Cloud Model\n\nTo save a local Revit file to the cloud as a non-workshared cloud model, you need to get the BIM 360 account id, BIM 360 project id, BIM 360 folder id, and a model name. There are two ways to retrieve this information:\n\n1. From the web browser\n2. Using the Forge DM API"
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"4.6\"></a>SaveAsCloudModel Information in Web Browser",
    "local_header_href": "#a-name46asaveascloudmodel-information-in-web-browser",
    "chunk_text": "#### <a name=\"4.6\"></a>SaveAsCloudModel Information in Web Browser\n\nOpen a web browser, navigate to your BIM 360 project home page and copy the highlighted URL:\n\n<center>\n<img src=\"img/cloud_model_api_2.png\" alt=\"Cloud Model API\" title=\"Cloud Model API\" width=\"900\"/> <!-- 1079 -->\n</center>\n\nThe BIM 360 account id and project id are both GUID strings.\n\nThey can be extracted from the URL like this:\n\n<center>\n<img src=\"img/cloud_model_api_3.png\" alt=\"Cloud Model API\" title=\"Cloud Model API\" width=\"900\"/> <!-- 1202 -->\n</center>\n\nNavigate to your target BIM 360 Docs folder in the web browser and copy the highlighted URL:\n\n<center>\n<img src=\"img/cloud_model_api_4.png\" alt=\"Cloud Model API\" title=\"Cloud Model API\" width=\"900\"/> <!-- 1104 -->\n</center>\n\nThe BIM 360 folder id is embedded in this URL; in this example, it is \"urn:adsk.wipemea:fs.folder:co.Jo68ieLRRcKvQr4fI2Q8uQ\":\n\n<center>\n<img src=\"img/cloud_model_api_5.png\" alt=\"Cloud Model API\" title=\"Cloud Model API\" width=\"900\"/> <!-- 1274 -->\n</center>\n\nWith this information, you can save a local file which is opened in Revit to BIM 360 document management as a cloud model with a call like this:\n\n<pre class=\"prettyprint\">\n  Guid account = new Guid(\"a8d3b76e-cf23-4dd7-a090-9e893efcf949\");\n  Guid project = new Guid(\"bf46f5e3-285e-496f-be03-b5b1f8b1e154\");\n  string folder_id = \"urn:adsk.wipemea:fs.folder:co.Jo68ieLRRcKvQr4fI2Q8uQ\";\n  string model_name = \"rac_advanced_sample_project.rvt\";\n  \n  currentDocument.SaveAsCloudModel(\n    account, // BIM 360 account id\n    project, // BIM 360 project id\n    folder_id, // BIM 360 folder id\n    model_name // model name\n);\n</pre>"
  },
  {
    "original_filename": "1834_2021_cloud_model_api",
    "header_text": "<a name=\"4.6\"></a>SaveAsCloudModel Information with Forge DM API",
    "local_header_href": "#a-name46asaveascloudmodel-information-with-forge-dm-api",
    "chunk_text": "#### <a name=\"4.6\"></a>SaveAsCloudModel Information with Forge DM API\n\nWith your Forge application, you can:\n\n- List hubs with the [GET hubs API](https://forge.autodesk.com/en/docs/data/v2/reference/http/hubs-GET) to retrieve the region and account ids.\n- List projects the [GET projects API](https://forge.autodesk.com/en/docs/data/v2/reference/http/hubs-hub_id-projects-GET) to get all the projects of the given hub and their project ids.\n- List the top folders with the [GET top folders API](https://forge.autodesk.com/en/docs/data/v2/reference/http/hubs-hub_id-projects-project_id-topFolders-GET) to get all accessible top folders (depending on permission) and you their valid folder ids, or continue to get the nested folders with the [list folder content API](https://forge.autodesk.com/en/docs/data/v2/reference/http/projects-project_id-folders-folder_id-contents-GET) until the target folder and its folder id is found and can be stored for later use.\n\nWith this information, you can save a local file opened in Revit to BIM 360 document management as a cloud model using the same Revit API call as above.\n\nMany thanks to the BIM 360 and Revit development teams for all their work on this and to Phil for putting together the valuable overview!\n\n<center>\n<img src=\"img/easter_bunny_postcard_1907.jpg\" alt=\"Easter bunny\" title=\"Easter bunny\" width=\"336\"/> <!-- 336 -->\n</center>"
  }
]