[
  {
    "original_filename": "0349_migration_steps",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<link href=\"bc.css\" rel=\"stylesheet\" type=\"text/css\"/>\n</head>"
  },
  {
    "original_filename": "0349_migration_steps",
    "header_text": "Plug-In Migration Steps",
    "local_header_href": "#plug-in-migration-steps",
    "chunk_text": "<h3>Plug-In Migration Steps</h3><p>We discussed the\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2010/03/porting-the-building-coder-samples-to-revit-2011.html\">\nmigration of The Building Coder samples</a> from\n\nthe Revit 2010 to the Revit 2011 API and noted some of the required steps there, but skipped a lot of the obvious and onerous detailed information.\n\nLuckily, my colleague Joe Ye was more patient and precise when he migrated our Revit Structure labs and analysis link sample, and kept track of the required steps in great detail.\nSo, without further ado, here are Joe's Revit 2011 plug-in project migration notes:\n\n<h4>Steps to migrate Revit 2010 code to Revit 2011</h4>\n<p>Before migrating the code, please read the What's New section in the Revit API help file RevitAPI.chm file to know what happened in the API.\nThen follow below steps.\n\n<ol>\n<li>Open the Revit code project in Visual Studio 2008.\n<li>Remove the reference to old Revit API assembly RevitAPI.dll.\n<li>Reference the new Revit API assemblies RevitAPI.dll and RevitAPIUI.dll, which are located in the Revit 2011 installation Program subfolder.\n<li>Replace old namespaces with the new ones, for example:\n\n<pre class=\"code\">\n<span class=\"green\">//using Autodesk.Revit;</span>\n<span class=\"green\">//using Autodesk.Revit.Elements;</span>\n<span class=\"green\">//using Autodesk.Revit.Structural.Enums;</span>\n<span class=\"blue\">using</span> Autodesk.Revit.ApplicationServices;\n<span class=\"blue\">using</span> Autodesk.Revit.Attributes;\n<span class=\"blue\">using</span> Autodesk.Revit.DB;\n<span class=\"blue\">using</span> Autodesk.Revit.UI;\n</pre>\n\nAll namespace mappings are documented in 'Revit 2011 API Namespace Remapping.xlsx' file in SDK.\n<li>Decide what regeneration option and transaction mode are required for the external command or application classes.\nThis is a non-trivial decision, cf.\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2010/04/manual-regeneration-mode-danger.html\">\nmanual regeneration option risks</a> and\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2010/04/regeneration-option-best-practices.html\">\nbest practices</a>.\n\n<li>Add the regeneration option and transaction mode attributes, e.g.\n\n<pre class=\"code\">\n[<span class=\"teal\">Transaction</span>( <span class=\"teal\">TransactionMode</span>.ReadOnly )]\n[<span class=\"teal\">Regeneration</span>( <span class=\"teal\">RegenerationOption</span>.Manual )]\n</pre>\n<li>If you have used full class names, change the namespace of the IExternalCommand or IExternalApplication interfaces, ExternalCommandData class, and Result enumeration to Autodesk.Revit.UI.\n<li>The way to access the Application and Document instances changed.\nThe command data argument now returns a new UIApplication class instance.\nUse the following code to access the database level application and active document objects:\n\n<pre class=\"code\">\n<span class=\"teal\">UIApplication</span> uiapp = commandData.Application;\n<span class=\"teal\">UIDocument</span> uidoc = uiapp.ActiveUIDocument;\n<span class=\"teal\">Application</span> app = uiapp.Application;\n<span class=\"teal\">Document</span> doc = uidoc.Document;\n</pre>\n\nIn Revit 2010, there was no separation between the user interface and database level application and document objects.\nThe application was accessed through the ExternalCommandData.Application property, and the active document through ExternalCommandData.Application.Document.\n\n<li>If the project has element iteration processes, you need to migrate these to use the new FilteredElementCollector class.\nPlease refer to RevitAPI.chm and Revit 2011 API developer guide.pdf for detailed information.\n<li>Some classes were renamed. Please read the What's New section in RevitAPI.chm for detailed information, and replace the old class names with the ones.\n</li></li></li></li></li></li></li></li></li></li></ol>\n<h4>Other notes</h4>\n<ol>\n<li>Creating a new ElementId instance requires an argument, unlike Revit 2010.\n<li>The Document get_Element( ElementId ) method now takes an ElementId argument without the ref keyword, because ElementId is a class now.\n<li>TypeFilter changed to ElementClassFilter. Creating instance change to use New ElementClassFilter\n<li>CategoryFilter becomes ElementCategoryFilter. Other element filter class are also renamed.\n<li>Access to the Revit Structure analytical model changed.\n<li>The ElementId Value property changed to IntegerValue, so replace with the new property name.\n<li>When retrieving document elements, we need to set a filter explicitly. If no filter was set at all, an exception is thrown.\n<li>If the command is using the manual regeneration option and the code makes changes to the model, we need to explicitly create a transaction to update the model:\n\n<pre class=\"code\">\nTransaction t = new Transaction(\n  doc, \"Test\" );\n\nt.Start();\n\n. . .\n\nt.Commit();\n</pre>\n<li>Some other detailed items are not listed here.\nPlease refer to the API changes documentation for further information.\n</li></li></li></li></li></li></li></li></li></ol>\n<p>Many thanks to Joe for these detailed instructions!\n</p></p></p>"
  },
  {
    "original_filename": "0349_migration_steps",
    "header_text": "Steps to migrate Revit 2010 code to Revit 2011",
    "local_header_href": "#steps-to-migrate-revit-2010-code-to-revit-2011",
    "chunk_text": "<h4>Steps to migrate Revit 2010 code to Revit 2011</h4><p>Before migrating the code, please read the What's New section in the Revit API help file RevitAPI.chm file to know what happened in the API.\nThen follow below steps.\n\n<ol>\n<li>Open the Revit code project in Visual Studio 2008.\n<li>Remove the reference to old Revit API assembly RevitAPI.dll.\n<li>Reference the new Revit API assemblies RevitAPI.dll and RevitAPIUI.dll, which are located in the Revit 2011 installation Program subfolder.\n<li>Replace old namespaces with the new ones, for example:\n\n<pre class=\"code\">\n<span class=\"green\">//using Autodesk.Revit;</span>\n<span class=\"green\">//using Autodesk.Revit.Elements;</span>\n<span class=\"green\">//using Autodesk.Revit.Structural.Enums;</span>\n<span class=\"blue\">using</span> Autodesk.Revit.ApplicationServices;\n<span class=\"blue\">using</span> Autodesk.Revit.Attributes;\n<span class=\"blue\">using</span> Autodesk.Revit.DB;\n<span class=\"blue\">using</span> Autodesk.Revit.UI;\n</pre>\n\nAll namespace mappings are documented in 'Revit 2011 API Namespace Remapping.xlsx' file in SDK.\n<li>Decide what regeneration option and transaction mode are required for the external command or application classes.\nThis is a non-trivial decision, cf.\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2010/04/manual-regeneration-mode-danger.html\">\nmanual regeneration option risks</a> and\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2010/04/regeneration-option-best-practices.html\">\nbest practices</a>.\n\n<li>Add the regeneration option and transaction mode attributes, e.g.\n\n<pre class=\"code\">\n[<span class=\"teal\">Transaction</span>( <span class=\"teal\">TransactionMode</span>.ReadOnly )]\n[<span class=\"teal\">Regeneration</span>( <span class=\"teal\">RegenerationOption</span>.Manual )]\n</pre>\n<li>If you have used full class names, change the namespace of the IExternalCommand or IExternalApplication interfaces, ExternalCommandData class, and Result enumeration to Autodesk.Revit.UI.\n<li>The way to access the Application and Document instances changed.\nThe command data argument now returns a new UIApplication class instance.\nUse the following code to access the database level application and active document objects:\n\n<pre class=\"code\">\n<span class=\"teal\">UIApplication</span> uiapp = commandData.Application;\n<span class=\"teal\">UIDocument</span> uidoc = uiapp.ActiveUIDocument;\n<span class=\"teal\">Application</span> app = uiapp.Application;\n<span class=\"teal\">Document</span> doc = uidoc.Document;\n</pre>\n\nIn Revit 2010, there was no separation between the user interface and database level application and document objects.\nThe application was accessed through the ExternalCommandData.Application property, and the active document through ExternalCommandData.Application.Document.\n\n<li>If the project has element iteration processes, you need to migrate these to use the new FilteredElementCollector class.\nPlease refer to RevitAPI.chm and Revit 2011 API developer guide.pdf for detailed information.\n<li>Some classes were renamed. Please read the What's New section in RevitAPI.chm for detailed information, and replace the old class names with the ones.\n</li></li></li></li></li></li></li></li></li></li></ol>\n<h4>Other notes</h4>\n<ol>\n<li>Creating a new ElementId instance requires an argument, unlike Revit 2010.\n<li>The Document get_Element( ElementId ) method now takes an ElementId argument without the ref keyword, because ElementId is a class now.\n<li>TypeFilter changed to ElementClassFilter. Creating instance change to use New ElementClassFilter\n<li>CategoryFilter becomes ElementCategoryFilter. Other element filter class are also renamed.\n<li>Access to the Revit Structure analytical model changed.\n<li>The ElementId Value property changed to IntegerValue, so replace with the new property name.\n<li>When retrieving document elements, we need to set a filter explicitly. If no filter was set at all, an exception is thrown.\n<li>If the command is using the manual regeneration option and the code makes changes to the model, we need to explicitly create a transaction to update the model:\n\n<pre class=\"code\">\nTransaction t = new Transaction(\n  doc, \"Test\" );\n\nt.Start();\n\n. . .\n\nt.Commit();\n</pre>\n<li>Some other detailed items are not listed here.\nPlease refer to the API changes documentation for further information.\n</li></li></li></li></li></li></li></li></li></ol>\n<p>Many thanks to Joe for these detailed instructions!\n</p></p>"
  },
  {
    "original_filename": "0349_migration_steps",
    "header_text": "Other notes",
    "local_header_href": "#other-notes",
    "chunk_text": "<h4>Other notes</h4><ol>\n<li>Creating a new ElementId instance requires an argument, unlike Revit 2010.\n<li>The Document get_Element( ElementId ) method now takes an ElementId argument without the ref keyword, because ElementId is a class now.\n<li>TypeFilter changed to ElementClassFilter. Creating instance change to use New ElementClassFilter\n<li>CategoryFilter becomes ElementCategoryFilter. Other element filter class are also renamed.\n<li>Access to the Revit Structure analytical model changed.\n<li>The ElementId Value property changed to IntegerValue, so replace with the new property name.\n<li>When retrieving document elements, we need to set a filter explicitly. If no filter was set at all, an exception is thrown.\n<li>If the command is using the manual regeneration option and the code makes changes to the model, we need to explicitly create a transaction to update the model:\n\n<pre class=\"code\">\nTransaction t = new Transaction(\n  doc, \"Test\" );\n\nt.Start();\n\n. . .\n\nt.Commit();\n</pre>\n<li>Some other detailed items are not listed here.\nPlease refer to the API changes documentation for further information.\n</li></li></li></li></li></li></li></li></li></ol><p>Many thanks to Joe for these detailed instructions!\n</p>"
  }
]