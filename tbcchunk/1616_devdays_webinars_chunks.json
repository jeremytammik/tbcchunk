[
  {
    "original_filename": "1616_devdays_webinars",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<!--\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- move elem util inefficient\n  use other method\n  https://forums.autodesk.com/t5/revit-api-forum/is-there-a-batch-method-for-placing-adaptive-component-points/m-p/7666601\n\nTransform Utils, DirectShape Builder and DevDays Online Webinars coming up for #RevitAPI @AutodeskRevit #bim #dynamobim @AutodeskForge #ForgeDevCon http://bit.ly/devdays2018\n\nRevitalizer shared two important hints: a performance issue using <code>ElementTransformUtils</code> and a problem reporting mechanism built into the <code>TessellatedShapeBuilderResult</code> method <code>GetIssuesForFaceSet</code>.\nFirst, though, let's highlight an even more important upcoming event, the series of DevDays online webinars\n&ndash; Register now for Autodesk DevDays online webinars\n&ndash; Avoid using <code>ElementTransformUtils</code> for batches\n&ndash; Finding cause of <code>DirectShape</code> generation problem...\n\n--->"
  },
  {
    "original_filename": "1616_devdays_webinars",
    "header_text": "Transform Utils, DirectShape Builder and DevDays Online Webinars",
    "local_header_href": "#transform-utils-directshape-builder-and-devdays-online-webinars",
    "chunk_text": "### Transform Utils, DirectShape Builder and DevDays Online Webinars\n\nRudi [@Revitalizer](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/1103138) Honke\nshared two important hints: a performance issue using `ElementTransformUtils` and a problem reporting mechanism built into the `TessellatedShapeBuilderResult` method `GetIssuesForFaceSet`.\n\nFirst, though, let's highlight an even more important upcoming event, the series of DevDays online webinars:\n\n- [Register now for Autodesk DevDays online webinars](#2)\n- [Avoid using `ElementTransformUtils` for batches](#3)\n- [Finding cause of `DirectShape` generation problem](#4)\n\n####<a name=\"2\"></a>Register now for Autodesk DevDays Online Webinars\n\nJoin us for the series of seven DevDays Webinars beginning on February 6th.  \n\nDevDays Online is the best way to keep up to date with new and upcoming technology and features.\nAfter the introductory business-oriented session that reviews Autodesk's business growth curves &ndash; past, present and future, most of the webinars focus on desktop application development, and additionally two on Forge and one on BIM 360 for cloud development. \n\nAs in previous DevDays events, we have a theme: *The Journey Continues*.\n\nIn the first webinar &ndash; DevDays Keynotes &ndash; Jim Quanci, Senior Director, Software Partner Development, will cover the journey in-depth with a presentation on Autodesk's strategic direction.  This includes the move to subscription licenses, Forge strategy, the Autodesk App Store and more.  As he discusses the transition Autodesk is going through from a business and technical perspective, Jim will also explain the opportunities this transition creates for software partners, including our plans to build a much larger customer base &ndash; accessible to you.\n\nIn the desktop software webinars, you will learn about the product and API changes and enhancements for AutoCAD, Revit, Civil 3D, InfraWorks, Inventor, Vault and Fusion.\nThese sessions will help you prepare for the upcoming Autodesk 2019 family of products, so that you can be ready to delight our joint customers by having your applications compatible with the new releases. \n\nIn addition to making sure you stay current with Autodesk desktop technology, now is the time to start investing in 'what's next' &ndash; the next wave in the journey.  Forge is Autodesk's answer to 'what's next'.  Forge is the foundation cloud/web technology platform that Autodesk is building its next generation of tools on &ndash; and also making available to you. Forge is not an Autodesk experiment.  It's your opportunity to catch the next wave &ndash; the shift to the cloud. Autodesk itself is the largest user of Forge in the world &ndash; with several hundred thousand users every day using BIM 360, Fusion 360, A360 and more. Join us &ndash; and over a thousand other companies that have built Forge into their apps/services already. Attend the two Forge webinars to learn how you too can deliver new capabilities to your customers.  [Learn more about Forge](https://forge.autodesk.com).\n\nRegister today for the webinars of your choice:\n\n- Tue 2018-02-06 &ndash; DevDays Keynotes &ndash; [Register](https://register.gotowebinar.com/register/797707066268687619)\n- Wed 2018-02-07 &ndash; Forge Platform overview and Roadmap &ndash; [Register](https://register.gotowebinar.com/register/4102861009595953155)\n- Thu 2018-02-08 &ndash; Revit API, Civil 3D and InfraWorks updates &ndash; [Register](https://register.gotowebinar.com/register/490550796468203011)\n- Tue 2018-02-13 &ndash; Forge API update (in detail) &ndash; [Register](https://register.gotowebinar.com/register/8531203464091738883)\n- Wed 2018-02-14 &ndash; Inventor, Vault and Fusion API updates &ndash; [Register](https://register.gotowebinar.com/register/4033528005371724547)\n- Thu 2018-02-15 &ndash; AutoCAD and Design Automation for AutoCAD API updates &ndash; [Register](https://register.gotowebinar.com/register/8219783288198582531)\n- Tue 2018-02-20 &ndash; BIM 360 product and API update &ndash; [Register](https://register.gotowebinar.com/register/3690479277994010883)\n\n<center>\n<img src=\"img/038_jim_quanci_600x415.jpg\" alt=\"Jim Quanci at DevDays@AU\" width=\"600\"/>\n</center>\n\n\n####<a name=\"3\"></a>Avoid Using ElementTransformUtils for Batches\n\nThe `ElementTransformUtils` `MoveElement` method has an important performance issue when used on a large number of elements, as pointed out by Revitalizer in \nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non [a batch method for placing adaptive component points](https://forums.autodesk.com/t5/revit-api-forum/is-there-a-batch-method-for-placing-adaptive-component-points/m-p/7672487):\n\n**Question:** I have a performance issue placing and moving adaptive components using the following code:\n\n<pre class=\"prettyprint\">\n  # place family instance, get default placement points,\n  # subtract from my desired coordinates (list) and move element\n  \n  inst = AdaptiveComponentInstanceUtils.CreateAdaptiveComponentInstance(\n    doc, inst)\n  \n  placePointIds = []\n  \n  placePointIds = AdaptiveComponentInstanceUtils.GetInstancePlacementPointElementRefIds(\n    inst)\n  \n  for ind, item in enumerate(placePointIds):\n  \n    # assign a point object to refpt\n    # refpt is the orginal point of the family\n    # newpt the new point derived from pt information\n  \n    refpt = doc.GetElement(item)\n  \n    newpt = pt[ind]\n  \n    trans = newpt.Subtract(refpt.Position)\n  \n    ElementTransformUtils.MoveElement(doc, item, trans)\n</pre>\n\n**Answer:** There is a performance problem with `ElementTransformUtils`, as pointed out in the thread\non [ElementTransformUtils: performance issue](https://forums.autodesk.com/t5/revit-api-forum/elementtransformutils-performance-issue/m-p/5775624).\n\nIt seems to auto regenerate after each movement.\n\nIn that case, you have to move every point separately. If the bad performance issue is related to the `ElementTransformUtils` methods, this might give better performance. To know for sure, you'd have to test.\n\nMaybe you can use `SetCoordinateSystem` instead:\n\n<pre class=\"prettyprint\">\n  (refpt as ReferencePoint).SetCoordinateSystem()\n</pre>\n\nFleshed out a bit more, it could look like this:\n\n<pre class=\"prettyprint\">\n  Element refpt = doc.GetElement(item);\n  XYZ newpt = pt[ind];\n  Transform tf = Transform.Identity;\n  tf.Origin = newpt;\n  (refpt as ReferencePoint).SetCoordinateSystem(tf);\n</pre>\n\n**Response:** Hey, awesome!!! It works! Performance is way better and the code runs fluid!\n\nI suppose this is even better than moving components, although I would be interested to compare both methods once it is fixed.\n\nMy code now looks like this:\n\n<pre class=\"prettyprint\">\n  placePointIds = AdaptiveComponentInstanceUtils.GetInstancePlacementPointElementRefIds(\n    inst):\n  \n  for ind, item in enumerate(placePointIds):\n    refpt = doc.GetElement(item)\n    newpt = pt[ind]\n    tf = Transform.Identity\n    tf.Origin = newpt\n    refpt.SetCoordinateSystem(tf);\n</pre>\n\n\n####<a name=\"4\"></a>Finding Cause of DirectShape Generation Problem\n\nRevitalizer provided more important hints on detecting problems in \nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non a [problem with solid creation by `TessellatedShapeBuilder`](https://forums.autodesk.com/t5/revit-api-forum/problem-with-solid-creation-by-tessellatedshapebuilder/m-p/7678156):\n\n**Question:** I want to import some solids created by an external library into Revit with TessellatedShapeBuilder.\n\nAll solids are correctly tessellated and closed.\n\nBut I got sometimes the following error on calling `TessellatedShapeBuilder.Build`:\n\n> Could not create consistent vertex list\n\nAs far as I know there are some restriction about triangles, e.g., the distance between two vertices.\n\nI could merge two vertices in this case.\n\nBut I don't know any other restriction, and how could I adjust my vertex list and triangle list to avoid the above error?\n\n**Answer:**\n\nThe problem might indeed be due to vertices lying too close together; they need to\nbe [at least about 2 mm apart](http://thebuildingcoder.typepad.com/blog/2014/05/directshape-performance-and-minimum-size.html).\n\nWhat I always do in these kind of cases:\n\nWhile reading the input vertices one by one, I put them into a dictionary equipped with an `XYZ` comparison operator.\n\nIf a new vertex is very close to an existing one, my comparison operator considers the two vertices to be equal, so I ignore it and use the existing one instead.\n\nThe `GetVertices` method\nin [The Building Coder samples CmdNestedInstanceGeo.cs](https://github.com/jeremytammik/the_building_coder_samples/blob/master/BuildingCoder/BuildingCoder/CmdNestedInstanceGeo.cs#L30-L85) does\nsomething similar using an `XyzEqualityComparer`.\n\nYou would simply have to replace the face vertex index of any ignored vertex by the index of its replacement.\n\nThere is also an `Appliation.MinimumThickness` property. It says in\nthe [Revit API help file RevitAPI.chm](http://www.revitapidocs.com/2018.1/8bff8d69-bc8d-b0ea-ed2f-6af1bed07e75.htm):\n\n> The minimum thickness allowed in Revit for a variety of geometric constructs. These include blends, extrusions, and wall layers.\n\nWhatever problem you run into, try reproducing the same issue manually through the user interface.\n\nThat will probably provide more information on what the problem is than the Revit API does.\n\nYou should also have a look at `TessellatedShapeBuilderResult.GetIssuesForFaceSet`.\n\nIn fact, it may localize exactly the faces and vertices causing the problem.\n\nEach `TesselatedBuildIssue` provides a `GetDescription` method.\n\n\n####<a name=\"5\"></a>Addendum\n\nRudi disagrees with my statement in the introduction above and corrects it, saying:\n\n> Thank you for mentioning me in the current TBC post!\n\n> I must admit that for both topics (ElementTransformUtils and DirectShape), I could not help the people, in fact:\n\n> - For the ElementTransformUtils method, FAIR59 provided the solution (SetCoordinateSystem), but he isn't even mentioned on TBC.\n> - For the DirectShape problem, the user said that he already checked my suggestions, without any success.\n\nI still think Rudi's suggestions are helpful and important and worth highlighting.\n\nMany thanks to FAIR59 as well, of course, as so often before in the past couple of months."
  }
]