[
  {
    "original_filename": "1437_bcf_manual_addin",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<!--\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n</head>\n\n<!---\n\nBCF API and manual add-in setup #revitAPI #3dwebcoder @AutodeskRevit @openbimstandard @BuildingSMARTUK #bim\n\nThe time is overdue to migrate the Visual Studio Revit Add-In Wizards to Revit 2017.\nThis time, instead of a simple flat migration like in previous years, I decided to set up a new Visual Studio C# .NET Revit add-in project manually, by hand, completely from scratch, just to see whether anything significant changed since I did that last, and to ensure that the wizard is really using all the required Visual Studio settings.\nI tried it out in by implementing a buildingSMART BCF API sample client.\nBasically, that requires the following steps\n&ndash; Create a new pure Visual Studio class library\n&ndash; Rename Class1 to Command\n&ndash; Add references to the Revit API assemblies\n&ndash; Implement an external command\n&ndash; Implement an add-in manifest\n&ndash; Define an add-in GUID\n&ndash; Implement a post-build event to auto-install the add-in...\n\n-->"
  },
  {
    "original_filename": "1437_bcf_manual_addin",
    "header_text": "BCF API and Manually Setting Up an Add-In",
    "local_header_href": "#bcf-api-and-manually-setting-up-an-add-in",
    "chunk_text": "### BCF API and Manually Setting Up an Add-In\n\nThe time is overdue to migrate\nthe [Visual Studio Revit Add-In Wizards](http://thebuildingcoder.typepad.com/blog/about-the-author.html#5.20) to\nRevit 2017.\n\nThis time, instead of a simple flat migration like in previous years, I decided to [set up a new Visual Studio C# .NET Revit add-in project manually](#3), by hand, completely from scratch, just to see whether anything significant changed since I did that last, and to ensure that the wizard is really using all the required Visual Studio settings.\n\nI tried it out in by implementing a [buildingSMART](http://www.buildingsmart-tech.org) [BCF API sample client](#2).\n\nBasically, that requires the following steps:\n\n- Create a new pure Visual Studio class library\n- Rename `Class1` to `Command`\n- Add references to the Revit API assemblies\n- Implement an external command\n- Implement an add-in manifest\n- Define an add-in GUID\n- Implement a post-build event to auto-install the add-in"
  },
  {
    "original_filename": "1437_bcf_manual_addin",
    "header_text": "<a name=\"2\"></a>The BCF API and a Sample Client",
    "local_header_href": "#a-name2athe-bcf-api-and-a-sample-client",
    "chunk_text": "#### <a name=\"2\"></a>The BCF API and a Sample Client\n\nTo try out these steps, I made use of a brand new sample project that I implemented in response to\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api/bd-p/160) thread inquiring\nabout [support for the BCF API](http://forums.autodesk.com/t5/revit-api/support-for-bcf-api/m-p/6282780):\n\n**Question:** Can anyone answer if Revit supports the BCF API to allow for third party integrations?\n\n**Answer:** I searched the Internet for 'bcf api' and found\nthe [BuildingSMART BCF-API GitHub repository](https://github.com/BuildingSMART/BCF-API).\n\nIs that what you are talking about?\n\nBeing a REST API, you can use it perfectly well from your own .NET add-ins.\n\nThe BCF API GitHub repo points to a C# client,\nthe [BcfApiExampleClient](https://github.com/rvestvik/BcfApiExampleClient).\n\nYou can try integrating that very code into a Revit add-in and see how it goes.\n\nOut of interest, I took a slightly deeper look.\n\nI see that BCF stands for [BIM Collaboration Format](http://iug.buildingsmart.org/resources/abu-dhabi-iug-meeting/IDMC_017_1.pdf).\n\nI also see that the C# sample can easily be integrated into a Revit add-in.\n\n**Question:** Does the Revit API create the JSON for BCF or would we be required to create it ourselves via the add-in?\n\n**Answer:** I was not aware of BCF until you raised this question, and I am pretty sure that Revit does nothing to support it.\n\nIf it is BCF specific, you will probably have to create it with your own custom add-in.\n\nI created a new project to try out converting the BcfApiExampleClient sample to a Revit add-in,\n[RvtBcfApiExampleClient](https://github.com/jeremytammik/RvtBcfApiExampleClient).\n\nIt is a pure and simple REST API client.\n\nI had some issues getting both the original sample and my Revit version up and running.\n\nThey were resolved over the week-end, however, and both the stand-alone sample client and the new Revit add-in version now work fine.\n\nHere are some screen snapshots running the Revit add-in version:\n\nThe first step is the log in to the BIM-IT server:\n\n<center>\n<img src=\"img/BcfApiExampleClient_login_bim_it.png\" alt=\"BIM-IT login\" width=\"467\">\n</center>\n\nAs usual, this authorisation process returns an access token:\n\n<center>\n<img src=\"img/BcfApiExampleClient_authorisation.png\" alt=\"BIM-IT access token\" width=\"379\">\n</center>\n\nFinally, the sample simply lists all existing projects, of which I possess exactly zero:\n\n<center>\n<img src=\"img/BcfApiExampleClient_project_list.png\" alt=\"BIM-IT project list\" width=\"366\">\n</center>\n\nIf you are interested in diving deeper into the BCF API, please note\nthe [comment by Georg Dangl](https://github.com/rvestvik/BcfApiExampleClient/issues/2),\nsaying, \"in December we had another Hackathon in Munich where Veni Lillkall created\na [small sample app in C#](https://github.com/BIMit/BCF-Hackathon-Munich/tree/Team_C%23).\nThat might give you some ideas how to use the BCF API itself.\""
  },
  {
    "original_filename": "1437_bcf_manual_addin",
    "header_text": "<a name=\"2.1\"></a>The Kayak Framework &ndash; an Easy Way to Speak HTTP with .NET",
    "local_header_href": "#a-name21athe-kayak-framework-ndash-an-easy-way-to-speak-http-with-net",
    "chunk_text": "#### <a name=\"2.1\"></a>The Kayak Framework &ndash; an Easy Way to Speak HTTP with .NET\n\nOne interesting aspect of the BCF-API sample is its use\nof [the Kayak framework &ndash; an easy way to speak HTTP with .NET](http://dotnetslackers.com/articles/aspnet/The-Kayak-Framework-An-easy-way-to-speak-HTTP-with-NET.aspx),\npublished in 2010 by [Benjamin van der Veen](http://dotnetslackers.com/community/members/bvanderveen.aspx),\nincluding [Kayak sample code](http://dotnetslackers.com/code/KayakCMSExample.zip):\n\n- Kayak is a lightweight HTTP server for the CLR, and the Kayak Framework is a utility for mapping HTTP requests to C# method invocations. With Kayak, you can skip the bulk, hassle, and overhead of IIS and ASP.NET. Kayak enables you to do more with less syntax, and is easy to configure to work in any way you care to dream up.\n- Kayak is a simple server with an easy-to-use request framework. It automatically maps HTTP verb/path combinations to your methods, deserialises arguments to invocations of those methods from the query string or JSON request body, and serialises the return values as JSON. It's behaviour is configurable, yet simple to use and understand thanks to its limited scope."
  },
  {
    "original_filename": "1437_bcf_manual_addin",
    "header_text": "<a name=\"3\"></a>Manual Setup of a Revit Add-In",
    "local_header_href": "#a-name3amanual-setup-of-a-revit-add-in",
    "chunk_text": "#### <a name=\"3\"></a>Manual Setup of a Revit Add-In\n\nAs said, I used the BCF API client sample project to record exactly how to manually set up a Visual Studio C# .NET Revit add-in from scratch.\n\nHere are the detailed individual steps I performed for this, with links to the corresponding commits in the GitHub repository:\n\n- [Added pure Visual Studio class library](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/7fb713de0efb0940191ba20dba7b7b08220c7e62)\n- [Renamed Class1 to Command and edited properties](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/4a98cd78157be9e36abda9b9b85a3156d8fed911)\n- [Added Revit API assemblies and implemented external command](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/ccd0c0f6469425c059567e3b26b75acbc37602b2)\n- [Added add-in manifest](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/1f9f74e83af6cdbbea4541ab03cdbe15a6868754)\n- [Added add-in manifest](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/667a7d8b51292ae3a84bbf59df8d7d2ad9a64886)\n- [Added GUID using guidize.exe](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/4982403505a9baf44e46e36cf5b500d3375af7b9)\n- [Implemented post-build event to auto-install add-in for Revit to find](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/9101faa26d071d6247714c6f4af94171a9814f52)\n- [Successfully tested](https://github.com/jeremytammik/RvtBcfApiExampleClient/commit/1912b9586bcb2ec0219f89bc0fc4d8aa98992bd9)\n\nThe result is [RvtBcfApiExampleClient release 2017.0.0.0](https://github.com/jeremytammik/RvtBcfApiExampleClient/releases/tag/2017.0.0.0), which is just a naked Revit 2017 C# .NET add-in skeleton.\n\nThe final working version presented above after fixing the initial problems with the login process is captured\nin [release 2017.0.0.4](https://github.com/jeremytammik/RvtBcfApiExampleClient/releases/tag/2017.0.0.4).\n\nAs said, next I will use the generated files to update\nthe [Visual Studio Revit add-in wizard](http://thebuildingcoder.typepad.com/blog/about-the-author.html#5.20) for Revit 2017."
  }
]