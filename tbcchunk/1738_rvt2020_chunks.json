[
  {
    "original_filename": "1738_rvt2020",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n\ntwitter:\n\nThe Revit 2020 FCS, API and SDK for the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon http://bit.ly/rvt2020sdk\n\nRevit 2020 has been released, and we go through the same procedure as every year, looking at the DevDays online presentations highlighting the API news, getting the system requirements set up, installing, compiling the Revit SDK samples and setting up RvtSamples to load them\n&ndash; Revit 2020 first customer shipment\n&ndash; Revit 2020 DevDays Online\n&ndash; Setting up Windows 10\n&ndash; Installing Revit 2020 and the new SDK\n&ndash; Visual Studio and .NET 4.7\n&ndash; Compiling the Revit 2020 SDK samples\n&ndash; Setting up RvtSamples...\n\nlinkedin:\n\nThe Revit 2020 FCS, API and SDK for the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon http://bit.ly/rvt2020sdk\n\nRevit 2020 has been released, and we go through the same procedure as every year, looking at the DevDays online presentations highlighting the API news, getting the system requirements set up, installing, compiling the Revit SDK samples and setting up RvtSamples to load them:\n\n- Revit 2020 first customer shipment\n- Revit 2020 DevDays Online\n- Setting up Windows 10\n- Installing Revit 2020 and the new SDK\n- Visual Studio and .NET 4.7\n- Compiling the Revit 2020 SDK samples\n- Setting up RvtSamples...\n\n\n-->"
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "The Revit 2020 FCS, API and SDK",
    "local_header_href": "#the-revit-2020-fcs-api-and-sdk",
    "chunk_text": "### The Revit 2020 FCS, API and SDK\n\nRevit 2020 has been released, and we go through the same procedure as every year, looking at the DevDays online presentation highlighting the API news, getting the system requirements set up, installing, compiling the Revit SDK samples and setting up RvtSamples to load them:\n\n- [Revit 2020 first customer shipment](#2) \n- [Revit 2020 DevDays Online](#3) \n- [Setting up Windows 10](#4) \n- [Installing Revit 2020 and the new SDK](#5) \n- [Visual Studio and .NET 4.7](#6) \n- [Compiling the Revit 2020 SDK samples](#7) \n- [Setting up RvtSamples](#8) \n\n<center>\n<img src=\"img/rvtsamples2020.png\" alt=\"RvtSamples loaded all Revit 2020 external commands\" width=\"600\">\n</center>"
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "<a name=\"2\"></a> Revit 2020 First Customer Shipment",
    "local_header_href": "#a-name2a-revit-2020-first-customer-shipment",
    "chunk_text": "#### <a name=\"2\"></a> Revit 2020 First Customer Shipment\n\nLook at the overview by Harlan Brumm\non [What's New in Revit 2020](https://blogs.autodesk.com/revit/2019/04/10/youve-got-to-see-whats-new-in-revit-2020) from\nan end user point of view."
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "<a name=\"3\"></a> Revit 2020 DevDays Online",
    "local_header_href": "#a-name3a-revit-2020-devdays-online",
    "chunk_text": "#### <a name=\"3\"></a> Revit 2020 DevDays Online\n\nTurning toward the programming side of things, we held a series of DevDays online presentations presenting previews of new Forge features and desktop API updates in February and March, including one of special interest for us here, covering *What's New in the Revit 2020 API*. Here are the recordings:\n\nForge sessions:\n \n- 2019-02-26 &ndash; [DevDays Keynotes](https://youtu.be/XP9Fb9R-laM)\n- 2019-02-27 &ndash; [Forge API update](https://youtu.be/rqaO1yx1g94)\n- 2019-02-28 &ndash; [Design Automation API](https://youtu.be/G-pP37GQycQ)\n- 2019-03-05 &ndash; [BIM 360 product and API update](https://youtu.be/CGEMLDVf9Oc)\n \nDesktop product sessions on the ADN page:\n \n- 2019-03-06 &ndash; [Inventor, Vault and Fusion API update](https://adn.autodesk.io/index.php?r=custom_pages%2Fview&id=143)\n- 2019-03-07 &ndash; [Revit API, Civil 3D & InfraWorks updates](https://adn.autodesk.io/index.php?r=custom_pages%2Fview&id=143)\n- 2019-03-12 &ndash; [The next release of AutoCAD APIs](https://adn.autodesk.io/index.php?r=custom_pages%2Fview&id=143)\n\nOops, I just noticed that the three links above all point to the same place on the restricted ADN web site.\n\nHere are two publicly accessible Dropbox pointers for non-members to the Revit related topics:\n\n- 2019-01-28 &ndash; [Meet the Expert: Revit 2020](https://www.dropbox.com/s/aqqp5mc45ktdt73/Meet_the_Expert_Revit_2020.zip?dl=0)\n- 2019-03-07 &ndash; [DevDays Online 2019: Autodesk Revit API, Civil 3D and InfraWorks updates](https://www.dropbox.com/s/5i5txlwzuff64v8/DevDays%202019-Revit-Civil3D-Inforworks.zip?dl=0)\n\nUpdate: The 54-minute [Revit DevDays Webinar Recording](https://youtu.be/uHZLQUtf9A0) is\nnow also available in\nthe [Autodesk DevTV Youtube channel](https://www.youtube.com/channel/UC6Fl_1mFNt0rBqa068Vaxcg):\n \n<center>\n<iframe width=\"480\" height=\"270\" src=\"https://www.youtube.com/embed/uHZLQUtf9A0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</center>\n\n> Discover the product and API changes and enhancements of Revit, Civil 3D and InfraWorks 2020, including the Forge Design Automation for Revit API."
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "<a name=\"4\"></a> Setting up Windows 10",
    "local_header_href": "#a-name4a-setting-up-windows-10",
    "chunk_text": "#### <a name=\"4\"></a> Setting up Windows 10\n\nWith that public stuff out of the way, I now turn to my personal experiences preparing for and setting up Revit 2020 and its SDK.\n\nI initially tried to install Revit 2020 on the same virtual Windows machine that I used for the past few versions.\n\nThe initial download step produced an executable *Revit_2020_G1_Win_64bit_wi_en-US_Setup_webinstall.exe*.\n\nUnfortunately, however, when attempting to run it, it rejected installation on Windows 8.1:\n\n<center>\n<img src=\"img/revit_2020_rejects_win_8_1.png\" alt=\"Revit 2020 rejects Windows 8.1\" width=\"432\">\n</center>\n\nI am forced to finally move on, set up a new virtual machine and update to Windows 10, ending up with the pro version 1803 from Aug 2018.\n\nI used the [Windows 10 installation ISO from www.microsoft.com](https://www.microsoft.com/en-us/software-download/windows10ISO),\nproducing *Win10_1809Oct_v2_EnglishInternational_x64.iso* on my local machine, and a product key\nfrom [MSDN subscriptions](http://msdn.microsoft.com/subscriptions) using\nmy hotmail account, which led me on \nto [my.visualstudio.com/ProductKeys](https://my.visualstudio.com/ProductKeys)."
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "<a name=\"5\"></a> Installing Revit 2020 and the New SDK",
    "local_header_href": "#a-name5a-installing-revit-2020-and-the-new-sdk",
    "chunk_text": "#### <a name=\"5\"></a> Installing Revit 2020 and the New SDK\n\nOnce I had the new virtual machine set up, the Revit 2020 product installation was straightforward.\n\nI searched for the SDK installation executable in the product installation files with no success.\n\nTherefore, I launched the Revit SDK installation via Setup.exe &gt; Tools and Utilities instead.\n\nThat downloaded the executable to its habitual location:\n\n- C:\\Autodesk\\WI\\Autodesk Revit 2020\\Utilities\\SDK\\RevitSDK.exe\n\nI installed the SDK to my local machine.\n\nIn order to explore it in more depth, however, I need to install Visual Studio on the new machine as well."
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "<a name=\"6\"></a> Visual Studio 2015 and .NET 4.7",
    "local_header_href": "#a-name6a-visual-studio-2015-and-net-47",
    "chunk_text": "#### <a name=\"6\"></a> Visual Studio 2015 and .NET 4.7\n\nFirst, I checked for updated development requirements in the new Revit online help files\nat [help.autodesk.com/view/RVT/2020/ENU/](http://help.autodesk.com/view/RVT/2020/ENU) in\nthe [developer guide](http://help.autodesk.com/view/RVT/2020/ENU/?guid=Revit_API_Revit_API_Developers_Guide_html) section\non [development requirements](http://help.autodesk.com/view/RVT/2020/ENU/?guid=Revit_API_Revit_API_Developers_Guide_Introduction_Getting_Started_Welcome_to_the_Revit_Platform_API_Development_Requirements_html).\n\nIt mentions Microsoft Visual Studio 2015 Professional, so I grabbed that from MSDN as well.\n\nVisual Studio 2015 includes the .NET 4.5 developer pack, but not the version 4.7 required by the Revit 2020 API.\n\nWhen I try to load the SDK samples solution `SDKSamples.sln` into Visual Studio, it asks whether it should modify all the project settings from .NET 4.7 to 4.5.\n\nNo, it should not!\n\nI installed the .NET 4.7.2 developer pack and tried again, with the same result: still cannot build `SDKSamples.sln`.\n\nAfter several other attempts and test building of simple console applications to ensure the framework was in place, I realised that the .NET 4.7.2 developer pack does not satisfy Visual Studio's request for the 4.7 developer pack.\n\nAfter installing the .NET 4.7 developer pack (with no suffix, i.e., .0), once more restarting Windows and implementing another test console app using 4.7.0, I can finally load all the SDK samples with `SDKSamples.sln`."
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "<a name=\"7\"></a> Compiling the Revit 2020 SDK Samples",
    "local_header_href": "#a-name7a-compiling-the-revit-2020-sdk-samples",
    "chunk_text": "#### <a name=\"7\"></a> Compiling the Revit 2020 SDK Samples\n\nAfter I was finally able to load the SDK samples solution into Visual Studio without all projects being set back to .NET 4.5, I started the first compilation run.\n\nIt produced [17 errors and 38 warnings, cf. `revit_2020_sdk_samples_errors_warnings_1.txt`](zip/revit_2020_sdk_samples_errors_warnings_1.txt).\n\nThe first error `CS1591` complains about a *Missing XML comment for publicly visible type or member* in the Custom2DExporter project.\n\nA newly added project in this version, very exciting topic, let's discuss it in depth asap, first get this error fixed, though.\n\nIn fact, the Custom2DExporter project is set to *Treat warnings as errors*, so we can start by turning that off for the moment. That helps, and reduces the error count.\n\nWe now have [9 errors and 46 warnings, cf. `revit_2020_sdk_samples_errors_warnings_2.txt`](zip/revit_2020_sdk_samples_errors_warnings_2.txt).\n\nModifying the *Treat warnings as errors* setting to 'None' for the PathOfTravel, RebarFreeForm and SampleCommandsSteelElements projects as well reduces the errors to one single one:\n\n- Error\tCS0234, *The type or namespace name 'Office' does not exist in the namespace 'Microsoft'* in the PointCurveCreation project\n\nWell, yes, I don't have Microsoft Office installed on my virtual machine, so that makes sense.\n\nOn the other hand, of course, the number of warnings are now higher:\n[1 error and 54 warnings, cf. `revit_2020_sdk_samples_errors_warnings_3.txt`](zip/revit_2020_sdk_samples_errors_warnings_3.txt).\n\nFor a quick fix, I temporarily unloaded the PointCurveCreation project.\n\nThat leads to [0 errors,\n52 warnings,\n189 projects succeeded, 0 failed, 0 skipped, cf. `revit_2020_sdk_samples_errors_warnings_4.txt`](zip/revit_2020_sdk_samples_errors_warnings_4.txt).\n\nLater, I noticed that the Excel Interop DLL is already present as a component in several other Revit SDK samples, e.g., in:\n\n- .../Samples/ArchSample/VB.NET/Microsoft.Office.Interop.Excel.dll\n\nI therefore reloaded the PointCurveCreation project again, added a reference by browsing to the existing DLL, and now have\n\n[0 errors,\n52 warnings,\n190 projects succeeded, 0 failed, 0 skipped, cf. `revit_2020_sdk_samples_errors_warnings_5.txt`](zip/revit_2020_sdk_samples_errors_warnings_5.txt).\n\nMany of the [warnings refer to an architecture mismatch](http://thebuildingcoder.typepad.com/blog/2013/07/recursively-disable-architecture-mismatch-warning.html):\n\n- warning MSB3270: There was a mismatch between the processor architecture of the project being built \"MSIL\" and the processor architecture of the reference \"RevitAPI\", \"AMD64\". This mismatch may cause runtime failures. Please consider changing the targeted processor architecture of your project through the Configuration Manager so as to align the processor architectures between your project and references, or take a dependency on references with a processor architecture that matches the targeted processor architecture of your project.\n\nHappily, I [implemented a fix for that](https://thebuildingcoder.typepad.com/blog/2014/09/architecture-mismatch-warning-disabler-update.html) years ago, cf. \nmy [DisableMismatchWarning utility in its GitHub repository](https://github.com/jeremytammik/DisableMismatchWarning).\nI ran `DisableMismatchWarning.exe` in the SDK Samples installation folder, and that reduced the number substantially to\n\n[0 errors,\n21 warnings,\n190 projects succeeded, 0 failed, 0 skipped, cf. `revit_2020_sdk_samples_errors_warnings_6.txt`](zip/revit_2020_sdk_samples_errors_warnings_6.txt).\n\nLater, I found a much simpler solution to the *Missing XML comment* warning in Custom2DExporter, PathOfTravel, RebarFreeForm and SampleCommandsSteelElements projects: simply uncheck the box in the build setting requesting the generation of an *XML documentation file*. After that, the *Treat warnings as errors* setting can be safely turned back on again. That reduce the number further to \n\n[0 errors,\n5 warnings,\n190 projects succeeded, 0 failed, 0 skipped, cf. `revit_2020_sdk_samples_errors_warnings_7.txt`](zip/revit_2020_sdk_samples_errors_warnings_7.txt).\n\nThese remaining warnings are due to some weird settings in the project files that I will ignore for now."
  },
  {
    "original_filename": "1738_rvt2020",
    "header_text": "<a name=\"8\"></a> Setting up RvtSamples",
    "local_header_href": "#a-name8a-setting-up-rvtsamples",
    "chunk_text": "#### <a name=\"8\"></a> Setting up RvtSamples\n\nNext, I set up RvtSamples to load most of the SDK external commands.\n\nRvtSamples is an external application that creates a menu and populates it with entries for all the external commands defined by the Revit SDK, making them accessible with one single click and saving me the effort of installing each and every sample command individually with its own add-in manifest.\n\nIn order to do so, RvtSamples reads an input text file, RvtSamples.txt, that defines the location of all the external command assembly DLLs and the names of the .NET classes they contain implementing the external commands.\n\nFirst of all, I edit that input text file.\n\nIt is initially set to the default installation location:\n\n- C:\\Revit SDK 2020\\Software Development Kit\\Samples\\\n\nI replace that globally by my local installation folder <i>C:\\a\\lib\\revit\\2020\\SDK\\Samples\\</i>... 234 occurrences are replaced.\n\nNext, I edit the RvtSamples add-in manifest, RvtSamples.addin, to point to the location of the RvtSamples DLL itself:\n\n<pre class=\"code\">\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RevitAddIns&gt;\n  &lt;AddIn Type=\"Application\"&gt;\n    &lt;Name&gt;RvtSamples External Application&lt;/Name&gt;\n    &lt;Assembly&gt;C:\\...\\Samples\\RvtSamples\\CS\\bin\\Debug\\RvtSamples.dll&lt;/Assembly&gt;\n    &lt;ClientId&gt;42cb0a70-2ee7-4e64-a42d-87b9cdcc41c8&lt;/ClientId&gt;\n    &lt;FullClassName&gt;RvtSamples.Application&lt;/FullClassName&gt;\n    &lt;VendorId&gt;ADSK&lt;/VendorId&gt;\n    &lt;VendorDescription&gt;Autodesk, www.autodesk.com&lt;/VendorDescription&gt;\n  &lt;/AddIn&gt;\n&lt;/RevitAddIns&gt;\n</pre>\n\nIt needs to be copied to the Revit 2020 Add-Ins folder in order for Revit to pick it up and load it:\n\n- C:\\Users\\tammikj\\AppData\\Roaming\\Autodesk\\Revit\\Addins\\2020\n\nAs usual, after that, a whole bunch of errors occur and need to be handled.\n\n<!--\nIn spite of the development team fixing my issue requesting this to work out of the box.\n\nNo way.\n\nAh well.\n-->\n\nThe first error I see says:\n\n- Assembly 'C:\\a\\lib\\revit\\2020\\SDK\\Samples\\PhaseSample\\VB.NET\\bin\\Debug\\PhaseSample.dll' specified in line 147 of RvtSamples.txt not found\n\nThis and similar errors have shown up every single year and affect most of the VB.NET samples.\n\nIn this case, the RvtSamples.txt input file searches for:\n\n- C:\\a\\lib\\revit\\2020\\SDK\\Samples\\PhaseSample\\VB.NET\\bin\\Debug\\PhaseSample.dll\n\nThis file does not exist. Instead, for some reason, the assembly DLL is located one level higher:\n\n- C:\\a\\lib\\revit\\2020\\SDK\\Samples\\PhaseSample\\VB.NET\\bin\\PhaseSample.dll\n\nAs a quick stop-gap fix, I globally replaced all occurrences of *\\VB.NET\\bin\\Debug\\* by *\\VB.NET\\bin\\*. As you will notice later, some of these replacements were erroneous.\n\nNext errors:\n\n- External command class Revit.SDK.Samples.DatumsModification.CS.Command in assembly 'C:\\a\\lib\\revit\\2020\\SDK\\Samples\\DatumsModification\\CS\\bin\\Debug\\DatumsModification.dll' specified in line 350 of RvtSamples.txt not found\n- Assembly 'C:\\a\\lib\\revit\\2020\\SDK\\Samples\\Viewers\\ElementViewer\\VB.NET\\bin\\ElementViewer.dll' specified in line 861 of RvtSamples.txt not found\n\nElementViewer.dll really is located in the `bin\\debug` subdirectory, so I changed that back again.\n\n- Assembly 'C:\\a\\lib\\revit\\2020\\SDK\\Samples\\CreateShared\\VB.NET\\bin\\CreateShared.dll' specified in line 1155 of RvtSamples.txt not found\n- Assembly 'C:\\a\\lib\\revit\\2020\\SDK\\Samples\\TestFloorThickness\\VB.NET\\bin\\TestFloorThickness.dll' specified in line 1225 of RvtSamples.txt not found\n- The assembly does not exist. Parameter name: pushButtonData.AssemblyName: n = 1638, k = 1638, lines[k] = eof\n\nHmmm. Fixed some of those...\n\nNext test run...\n\n- External command class Revit.SDK.Samples.DatumsModification.CS.Command in assembly 'C:\\a\\lib\\revit\\2020\\SDK\\Samples\\DatumsModification\\CS\\bin\\Debug\\DatumsModification.dll' specified in line 350 of RvtSamples.txt not found\n\nWell, no wonder. The external command defined by the DatumsModification add-in is not named `Command` at all.\n\nInstead, it defines three external commands named `DatumStyleModification`, `DatumAlignment` and `DatumPropagation`.\n\nTherefore, the single erroneous entry for one external command for this add-in needs to be replaced by three new ones.\n\nThis sample can never have been loaded by RvtSamples.\n\nAnyway, I fixed all the errors, it seems, and can now load RvtSamples and successfully process its input file in Revit 2020:\n\n<center>\n<img src=\"img/rvtsamples2020.png\" alt=\"RvtSamples loaded all Revit 2020 external commands\" width=\"600\">\n</center>\n\nHere are my versions of the files I modified to get it up and running, in case they are of use:\n\n- [RvtSamples.addin](zip/RvtSamples2020.addin)\n- [RvtSamples.txt](zip/RvtSamples2020.txt)\n\nI wish you easy sailing, much fun and success setting up and exploring Revit 2020 yourself!"
  }
]