[
  {
    "original_filename": "1661_rename_family",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<!--\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- https://forums.autodesk.com/t5/revit-api-forum/best-api-for-beginners/m-p/8050002\n  Best API for Beginners?\n\n- scott rosenbloom learning path Re: Getting Started Request for Recommendation\n\n- renaming the family after loading the symbol\n  Zhong (John) Wu\n  Subject: FamilySymbol.Family behave different while getting by Doc.LoadFamilySymbol()\n\n- Extensible Storage - best practices with plug-in development & growth\n  https://forums.autodesk.com/t5/revit-api-forum/extensible-storage-best-practices-with-plug-in-development-amp/m-p/8050177\n\nExtensible storage versioning and renaming a family in a project in the #RevitAPI @AutodeskRevit #bim #dynamobim @AutodeskForge #ForgeDevCon http://bit.ly/renamefamily\n\nAn interesting question was raised on renaming a family after it has been loaded into a project, which throws some light on the underlying relationship between the family name and the <code>RFA</code> filename.\nBefore that, we revisit the eternal topic of getting started with the Revit API, and what to do to prepare for it before actually touching Revit at all.\nAfterwards, and similarly, we pick up a good suggestion or two on planning and preparing your extensible storage schema for future version handling\n&ndash; Before getting started\n&ndash; Renaming a family in a project\n&ndash; Extensible storage &ndash; versioning best practices...\n\n--->"
  },
  {
    "original_filename": "1661_rename_family",
    "header_text": "Renaming a Family in a Project",
    "local_header_href": "#renaming-a-family-in-a-project",
    "chunk_text": "### Renaming a Family in a Project\n\nAn interesting question was raised on renaming a family after it has been loaded into a project, which throws some light on the underlying relationship between the family name and the `RFA` filename.\n\nBefore that, we revisit the eternal topic of getting started with the Revit API, and what to do to prepare for it before actually touching Revit at all.\n\nAfterwards, and similarly, we pick up a good suggestion or two on planning and preparing your extensible storage schema for future version handling.\n\nExplaining the similarity between the last two items mentioned above is left as an exercise to the reader &nbsp; :-)\n\n- [Before getting started](#2) \n- [Renaming a family in a project](#3) \n- [Extensible storage &ndash; versioning best practices](#4) \n\n####<a name=\"2\"></a>Before Getting Started\n\nThis topic was raised again in \nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread on choosing\nthe [best API for beginners](https://forums.autodesk.com/t5/revit-api-forum/best-api-for-beginners/m-p/8050002):\n\n**Question:**  I know AutoLISP and made some tools for AutoCAD, and now I'm starting to take a look at Revit APIs.\n\nMy target is to create small tools, not big apps.\n\nWhat is the recommended API to learn?\n\nI don't want to learn C# or VB.NET, that's maybe a little bit too big.\n\nThere is also \"Macro with Python\" and \"Dynamo\" &ndash; can they be compared (from their features and possibilities), or is there a completely different approach?\n\n**Answer:**  Welcome to the Revit API!\n\nThe one and only Revit API is based on .NET.\n\nIt makes no difference what language you use to address it: C#, VB, Python or other; they all address the same API, and they are all translated\nto [.NET IL, intermediate language](https://en.wikipedia.org/wiki/Common_Intermediate_Language).\n\nThat also means that it is easy to translate between these languages, since\nthe [IL can be decompiled again](https://docs.microsoft.com/en-us/dotnet/framework/tools/ildasm-exe-il-disassembler) to\na different language than the one used to generate it.\n\n[Dynamo ](https://forum.dynamobim.com) is\na separate environment using Python for programming that talks to the Revit API and also adds its own functionality.\n\n[The Revit API getting started material](http://thebuildingcoder.typepad.com/blog/about-the-author.html#2) lists\nseveral other learning resources.\n\nMy personal opinion:\n\n- VB is horrible and obsolete, cf. [is VB worth learning](https://www.quora.com/Is-Visual-Basic-NET-a-language-worth-learning)?\n- C# and Python are both fine.\n \nAlmost all the official Revit SDK samples, Internet sample code and The Building Coder samples are in C#. \n\nBy the way: please try to utterly forget AutoLISP and AutoCAD and all its APIs when learning Revit API,\nbecause [Revit and its API is different](http://thebuildingcoder.typepad.com/blog/about-the-author.html#5.41).\n\nPlease also learn as much as possible about Revit and BIM philosophy before you try to start programming, or nothing will make any sense at all.\n\nGood luck and have fun!\n\nAnother conversation on this topic took place via private email:\n\n**Question:**  What C# programming topics would you recommend that someone learn <b><i>prior</i></b> to learning the Revit API?\n\n**Answer:** You just need general .NET programming basics, nothing very high-level or complex.\n\nThe more the better, of course.\n\nActually, any and all programming experience is helpful.\n\nOne of the easiest languages to get started with is Python, IMHO.\n\nSome old pointers to related resources:\n\n- [A .NET Language Learning Resource](http://thebuildingcoder.typepad.com/blog/2009/07/a-net-language-learning-resource.html)\n- [Cairo and Free .NET Books](http://thebuildingcoder.typepad.com/blog/2010/10/cairo-and-free-net-books.html)\n- [C# and .NET Little Wonders](http://thebuildingcoder.typepad.com/blog/2010/11/c-and-net-little-wonders.html)\n\nA good understanding of event-driven programming is very helpful, since the Revit API is entirely event driven.\n\n**Response:**  I've been going through the [SoloLearn C# training](https://www.sololearn.com/Play/CSharp#).\n\nAnd while it's really good, there's certainly nothing related to Revit at all.\n\nI've really wanted to be able to create customisations for Revit for some time and really want to focus on it to get to a point where I can create, even some rudimentary programs.\n\n**Answer:** How did you find the [Revit API getting started information](http://thebuildingcoder.typepad.com/blog/about-the-author.html#2)?\n\n**Response:**  After quite some time, here is the path I’ve taken in pursuit of learning the Revit API:\n\nFirst, I took a course on the Microsoft Virtual Academy site called [C# Fundamentals for Absolute Beginners](https://mva.microsoft.com/en-us/training-courses/c-fundamentals-for-absolute-beginners-16169).\n\nAt the moment, I’m almost finished with the second section of Harry Mattison’s [Learn to Program the Revit API by Boost Your BIM](https://www.udemy.com/revitapi) on Udemy.com.\n\nAt the same time, I’m using the [SoloLearn](https://www.sololearn.com) app/website to continue reinforcing the basics of C#, and have also started looking at Google’s new 'learn to code' app called [Grasshopper](https://play.google.com/store/apps/details?id=com.area120.grasshopper&hl=en_US).\n\nAny other thoughts?\n\n**Answer:**  Congratulations on the good progress and well targeted approach.\n\nAll I can add is: anyone interested in cloud and web-based technologies and/or making a good career and lots of money programming, might want to take a look at [freecodecamp](https://www.freecodecamp.com).\n\nThat has nothing to do with Revit either, however.\n\n<center>\n<img src=\"img/bachelor_masters_degree_cap.png\" alt=\"Cap\" width=\"360\"/>\n</center>\n\n####<a name=\"3\"></a>Renaming a Family in a Project\n\n**Question:**  I have a question related to the `LoadFamilySymbol` method.\n\nHere is the description:\n\n<pre class=\"code\">\n&nbsp;&nbsp;doc.LoadFamilySymbol(&nbsp;<span style=\"color:#a31515;\">&quot;test.rfa&quot;</span>,&nbsp;<span style=\"color:#a31515;\">&quot;type1&quot;</span>,&nbsp;<span style=\"color:blue;\">out</span>&nbsp;symbol1&nbsp;);\n&nbsp;&nbsp;doc.LoadFamilySymbol(&nbsp;<span style=\"color:#a31515;\">&quot;test.rfa&quot;</span>,&nbsp;<span style=\"color:#a31515;\">&quot;type2&quot;</span>,&nbsp;<span style=\"color:blue;\">out</span>&nbsp;symbol2&nbsp;);\n</pre>\n\nWhen I load two family symbols together as above, only one single family is created with the two types.\n\nI can modify the family name by using either one of the symbols like this:\n\n<pre class=\"code\">\n&nbsp;&nbsp;symbol2.Family.Name&nbsp;=&nbsp;<span style=\"color:#a31515;\">&quot;NewName&quot;</span>;\n</pre>\n\nThen `symbol1.Family.Name` will be also updated to \"NewName\".\n\nBut the behaviour changes if I rename the family after the first one has been loaded, for example:\n\n<pre class=\"code\">\n&nbsp;&nbsp;document.LoadFamilySymbol(&nbsp;<span style=\"color:#a31515;\">&quot;test.rfa&quot;</span>,&nbsp;<span style=\"color:#a31515;\">&quot;type1&quot;</span>,&nbsp;<span style=\"color:blue;\">out</span>&nbsp;symbol1&nbsp;);\n&nbsp;&nbsp;symbol1.Family.Name&nbsp;=&nbsp;<span style=\"color:#a31515;\">&quot;NewName&quot;</span>;\n</pre>\n\nAfter this, the second load will create a new family. Renaming the symbol to the same name then doesn't work:\n\n<pre class=\"code\">\n&nbsp;&nbsp;document.LoadFamilySymbol(&nbsp;<span style=\"color:#a31515;\">&quot;test.rfa&quot;</span>,&nbsp;<span style=\"color:#a31515;\">&quot;type2&quot;</span>,&nbsp;<span style=\"color:blue;\">out</span>&nbsp;symbol2&nbsp;);\n</pre>\n\nIt creates new family, not associated with the first; `symbol2.Family.Name` remains as the old name.\n\n**Answer:**  Yes, that makes sense to me.\n\nThe family name is identical to the `RFA` filename.\n\nCase 1:\n\n- load two symbols\n- both are associated with 'test'\n- rename the family\n- both symbols have a new family name\n\nCase 2:\n\n- load one symbol\n- it is associated with 'test'\n- rename the family --> association lost\n- load the second family\n- it is associated with 'test', but the first is <b><i>not</i></b>\n- the two symbols now have different family names\n\nTotally logical.\n\n**Response:**  Thanks Jeremy.\nSo, the family name is always identical with the `RFA` filename.\nThis should be the answer for the issue.\nYes, it makes sense for me.\n\nIs there some way to load other family symbols to the existing family after it has been renamed, instead of creating a new one associated with ‘test’?\nThat’s actually the essential question; I want to load family symbols one by one to save performance, and rename the family sometime after loading the first symbol.\n\n**Answer:**  Yes, I do believe that a very simple workaround can be created based on what we already said:\n\n- original family name: A.\n- load symbol S1 from family A &rarr; A.S1.\n- rename S1's family to B &rarr; B.S1 is present in the project.\n\nNow, to load A.S2, it might be sufficient to:\n\n- temporarily rename A.rfa to B.rfa.\n- load S2 from B.rfa &rarr; B.S1, B.S2 are present in the project.\n- rename B.rfa back to A.rfa.\n\nPlease try it out, test and confirm.\n\n**Response:**  I can confirm the workaround is working after my verification: Revit will load and name the family by its `RFA` filename.\n\n\n####<a name=\"4\"></a>Extensible Storage &ndash; Versioning Best Practices\n\nAnother interesting question was raised in\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non [extensible storage best practices with plug-in development and growth](https://forums.autodesk.com/t5/revit-api-forum/extensible-storage-best-practices-with-plug-in-development-amp/m-p/8050177),\nwith helpful answers provided\nby David Robison, [Design Master Electrical RT](http://www.designmaster.biz/revit)\nand Alexander [@aignatovich](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/1257478) Ignatovich, aka Александр Игнатович:\n\n**Question:** I'm currently developing a Revit plug-in and need to utilise a schema; for now, I will just need two bool fields.\n\nHowever, the plug-in will grow over time and eventually will become a ribbon with multiple buttons and various other functionality.\n\nThus, I assume that at some point I might need more sophisticated extensible storage data.\n\nI already know that once a schema is built, it cannot be extended; what is then the best practice in such situations?\n\nTo have separate schemas for each part of my plug-in?\n\n**Answer 1:** Some people store data in serialized form (such as `JSON`).\n\nI don't think that it is good practice.\nImagine that your app v1.0 requires 2 pieces of data: A and B, and your app v1.2 requires 3 pieces of data: A, B and C. Your v1.2 app reads storage and sees that there is no C. What does this mean? Was it due to old data, or C should not be present? Your next app v.1.3 requires new data format for B &rarr; B', may be with old data structure. Again, you have to deal with ambiguous environments; moreover, your app v.1.3 has to deal with 3 data formats: (A, B), (A, B, C) and (A, B', C).\n\nTo handle such a situation, you should define and include data version information and build a specific processor for each version:\n\n- (A, B) &rarr; v1.0 processor that, for example, asks user about C and transfers data for the next processor.\n- (A, B, C) &rarr; v.1.2 processor that converts B to B' using some algorithm.\n- (A, B', C) &rarr; just use the data to do useful things.\n\nSince schemas cannot be modified, each specific schema with its unique `GUID` id works as a version mark. It has strongly typed fields and it is rather comfortable to use. Your task as a software developer is just to organise your code, encapsulate details, and not repeat yourself. Prohibition of scheme modification is a good thing in my opinion.\n\n**Answer 2:** Not being able to modify schemas does become a problem as your add-in becomes more complicated.\n\nI store everything in map fields, like this:\n\n<pre class=\"code\">\n&nbsp;&nbsp;builder.AddMapField(&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#a31515;\">&quot;strings&quot;</span>,&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">string</span>&nbsp;),&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">string</span>&nbsp;)&nbsp;);\n \n&nbsp;&nbsp;builder.AddMapField(&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#a31515;\">&quot;ints&quot;</span>,&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">string</span>&nbsp;),&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">int</span>&nbsp;)&nbsp;);\n \n&nbsp;&nbsp;FieldBuilder&nbsp;field&nbsp;=&nbsp;builder.AddMapField(\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#a31515;\">&quot;doubles&quot;</span>,&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">string</span>&nbsp;),&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">double</span>&nbsp;)&nbsp;);\n \n&nbsp;&nbsp;field.SetUnitType(&nbsp;<span style=\"color:#2b91af;\">UnitType</span>.UT_Custom&nbsp;);\n \n&nbsp;&nbsp;builder.AddMapField(&nbsp;<span style=\"color:#a31515;\">&quot;bools&quot;</span>,\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">string</span>&nbsp;),&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:blue;\">bool</span>&nbsp;)&nbsp;);\n</pre>\n\nThese fields allow me to change what I am storing without modifying my schema. The first value I always add is a version to the ints. When I get my entity from an element, if it's not there, I know I need to add it and do any required initialisation. If it is there, I check the version and do whatever upgrades are necessary if it is not the most recent.\n\n**Response:** It seems like having these four dictionaries (strings, bools, ints, doubles) should be enough to handle every possible data. If you need other types, you can derive them from these four, one way or another.\n\nI really like this idea, it's more generic from Alexander's, yet still it enables version control.\n\nThanks for sharing, you two!\n\nJeremy adds: for Revit-specific element relationships, you might also need the `ElementId` data type."
  }
]