[
  {
    "original_filename": "1674_revittestframework",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- https://forums.autodesk.com/t5/revit-api-forum/revit-test-framework-improvements/m-p/8212702\n\nRevit Unit Test Framework improvements for the #RevitAPI @AutodeskRevit #bim #dynamobim @AutodeskForge #ForgeDevCon http://bit.ly/rvtunittest\n\nThe UpCodes AI team shared some significant Revit Test Framework improvements\n&ndash; Created a NuGet package\n&ndash; Added the ability to group tests by the model\n&ndash; Added ability to use wildcards for model filenames\n&ndash; Clear messaging and indication of failures...\n\n--->"
  },
  {
    "original_filename": "1674_revittestframework",
    "header_text": "Revit Unit Test Framework Improvements",
    "local_header_href": "#revit-unit-test-framework-improvements",
    "chunk_text": "### Revit Unit Test Framework Improvements\n\nToday, let's highlight an exciting and very useful contribution by Mark Vulfson\nat [UpCodes](https://up.codes) Engineering and the entire \n[UpCodes AI team](https://up.codes/ai), presented in \nhis [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non [Revit Test Framework improvements](https://forums.autodesk.com/t5/revit-api-forum/revit-test-framework-improvements/m-p/8212702).\n\nMany thanks to Mark and the UpCodes team for making this available!\n\nBy the way, here are some \nprevious [notes on unit testing Revit add-ins](http://thebuildingcoder.typepad.com/blog/about-the-author.html#5.16).\n\n<center>\n<img src=\"img/sigmaxxmax.png\" alt=\"Test load\" width=\"275\"/>\n</center>\n\nHello everyone,\n\nWe are currently developing a pretty elaborate Revit plugin,\nthe [UpCodes AI for building code automation](https://up.codes/features/ai):\n\n> UpCodes AI is a design aid for architects and engineers. View code errors in real-time directly in Revit with a “spell check” for compliance.\n\nDuring the course of this work, we ran into many issues (and surely will run into many more), and this forum has helped us resolve many of them.\n\nWe'd like to contribute something back to the community by telling you about the improvements we've made to the awesome\n[Dynamo Revit unit test framework](http://thebuildingcoder.typepad.com/blog/2013/10/the-dynamo-revit-unit-test-framework.html),\n`RevitTestFramework` or RTF, by the Dynamo team.\n\nIt's an invaluable tool if you are developing a Revit add-in, as it allows you to run integration tests and control Revit in an automated fashion.\n\nHowever, the RTF hasn't had much development done on it in a while (other than making it compatible with Revit 2019) and as such we found a few things lacking; the biggest such shortcoming was a lack of NuGet package making usage of the RTF on a build server/continuous integration server very difficult.\n\nAlong the way, we made a few other improvements that I think you will find interesting and useful.\n\nSummary of main changes we've made so far:\n\n- [1. Created a NuGet package](#1) \n- [2. Added the ability to group tests by the model](#2) \n- [3. Added ability to use wildcards for model filenames](#3) \n- [4. Clear messaging and indication of failures](#4)"
  },
  {
    "original_filename": "1674_revittestframework",
    "header_text": "<a name=\"1\"></a> 1. Created a NuGet package",
    "local_header_href": "#a-name1a-1-created-a-nuget-package",
    "chunk_text": "#### <a name=\"1\"></a> 1. Created a NuGet package\n\nYou can download it here:\n\n- [www.nuget.org/packages/revittestframework](https://www.nuget.org/packages/revittestframework)"
  },
  {
    "original_filename": "1674_revittestframework",
    "header_text": "<a name=\"2\"></a> 2. Added the ability to group tests by the model",
    "local_header_href": "#a-name2a-2-added-the-ability-to-group-tests-by-the-model",
    "chunk_text": "#### <a name=\"2\"></a> 2. Added the ability to group tests by the model\n\nOpening a new RVT file for each test significantly slows down the execution of the tests. We wanted our Revit tests to run for each pull request our engineers make, so it has to be fast (and reliable).\n\nThe `groupByModel` option significantly improves performance if you have multiple tests that operate on the same model.\n\nWhen using `--groupByModel`, the RTF will order the tests such that all tests that operate on the same model file are executed sequentially without closing and reopening the model. Naturally, it requires the `--continuous` parameter to be effective.\n\nAlso, it goes without saying that if your tests leave side effects on a model which may break a subsequent test, this option will not work for you.\nLuckily for us, none of our tests have side effects (which, in general, is a good practice)."
  },
  {
    "original_filename": "1674_revittestframework",
    "header_text": "<a name=\"3\"></a> 3. Added ability to use wildcards for model filenames",
    "local_header_href": "#a-name3a-3-added-ability-to-use-wildcards-for-model-filenames",
    "chunk_text": "#### <a name=\"3\"></a> 3. Added ability to use wildcards for model filenames\n\nWe have multiple models which we want to run a particular test on.\n\nToday, every time we make a new model we have to copy/paste a unit test with a new model file.\n\nTo make this simpler, you can now specify a wildcard for your model file on a test and RTF will enumerate all files in the directory and run the test on each one.\n\nFor example:\n\n<pre class=\"prettyprint\">\n  [TestFixture]\n  public class TestAllModels\n  {\n    [Test, TestModel(@\"C:\\Models\\test_models_2019\\*.rvt\")]\n    public void SomeTest()\n    {\n      ...\n    }\n  }\n</pre>\n\nwill run `SomeTest` on every RVT file it finds under *C:\\Models\\test_models_2019*.\n\nOne of the ways we use this is for performance testing. All that this test does is measure the speed with which we finish processing a given model.\n\nThis way, we can run the test suite on each release and assess whether we have significantly regressed our performance from our previous release."
  },
  {
    "original_filename": "1674_revittestframework",
    "header_text": "<a name=\"4\"></a> 4. Clear messaging and indication of failures",
    "local_header_href": "#a-name4a-4-clear-messaging-and-indication-of-failures",
    "chunk_text": "#### <a name=\"4\"></a> 4. Clear messaging and indication of failures\n\nEngineers don't love writing tests and they hate debugging tests. Especially, when diagnosing what went wrong is very difficult.\n\nWe wanted to make sure that an engineer could:\n\n- Look at the log output from a build server and quickly be able to tell what went wrong and where to start debugging.\n- Run the test easily with nice UI on their local computer to quickly iterate on a solution to fix the problem.\n\nThis includes:\n\n- Clear indication when a model file is not found (prior to that RTF would just silently complete the test suite without errors).\n- Automatically expand failing tests in the UI so that errors are super obvious.\n- Have a clear summary at the end of a test run for the number of passed/failed/etc tests.\nThis way, you can go grab a coffee while the tests run and know if there were any errors with a quick glance at the summary.\n- We utilize categories (e.g. [Category(\"Doors\")]) for grouping.\nBut RTF UI didn't show tests without a category; this is now fixed.\n- All `Console.PrintLine` messages from the actual unit tests are now sent back to the RTF server so you can see them in a single contiguous log &ndash; yay (this one is my favourite)!\n- Test completion information is displayed in the console as soon as the test itself is completed; RTF used to wait till all tests have finished before showing you the status of all individual tests; now each pass/fail is printed as soon as the test is completed.\n\nWe also made a bunch of small bug fixes around the stability of the RTF.\n\nThere is still work to be done on the framework, but we hope you find these changes useful.\n\nWe are working with the Dynamo team to bring all these changes back to the main branch of RTF, but, for now, you are welcome to contribute with us in our [forked RevitTestFramework repo](https://github.com/upcodes/RevitTestFramework).\n\nMark &ndash; Engineering at [UpCodes](https://up.codes)\n\np.s. [we are hiring](https://up.codes/careers) &ndash; if you love building Revit add-ins please reach out!"
  }
]