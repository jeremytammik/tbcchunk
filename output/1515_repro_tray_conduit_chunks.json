[
  {
    "original_filename": "1515_repro_tray_conduit",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<!--\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n</head>\n\n<!---\n\n- creating a miminal reproducible case can indeed solve the problem\n  private message in the Autodesk Community. From: kinjal Subject: Re: Kind attention towards a coordinate system issue\n  http://forums.autodesk.com/t5/revit-api-forum/different-coordinate-system-for-referenceintersector/m-p/6591571\n\n- how to research revit api solution\n  12162499 [How can I get the connectors of a FamilyInstance?]\nhttp://thebuildingcoder.typepad.com/blog/2016/09/macromanager-materials-kiss-and-getting-started.html#4\nhttp://thebuildingcoder.typepad.com/blog/2016/09/macromanager-materials-kiss-and-getting-started.html#5\nhttp://thebuildingcoder.typepad.com/blog/2016/09/trusted-signature-motivation-and-fishing.html#3\nhttp://forums.autodesk.com/t5/revit-api-forum/access-to-line-based-elements/m-p/6569135\n\n- CF-3559 [API wish: access to ElectricalSettings cable tray and conduit settings] was fixed and closed\nhttp://thebuildingcoder.typepad.com/blog/2011/09/transfer-project-standards.html#comment-2340822661\nREVIT-79737 [As a third part developers I want to be able to access the cable/tray and conduit sizes/settings through public API] was fixed and closed\n\n#RevitAPI @AutodeskRevit #aec #bim #dynamobim @AutodeskForge\n\nI have probably asked developers for reproducible cases a couple of thousand times by now.\nLet's discuss that and also return to the topic of how to research a Revit API problem in general.\nFinally, I'll point out a Revit 2017 API MEP electrical feature.\nOh, and I continued my research into deep learning for a Revit API question answering system\n&ndash; Creating a reproducible case may well solve the issue at hand\n&ndash; How to research to find a Revit API solution\n&ndash; Access to cable tray and conduit settings\n&ndash; Getting started implementing a question answering system\n&ndash; First impression from IBM Bluemix\n&ndash; Open source QAS options\n&ndash; Building a Revit API ontology...\n\n#AULondon, #UI, #innovation, #RevitAPI, @AutodeskRevit bit.ly/2j7Sxkb\n\n-->"
  },
  {
    "original_filename": "1515_repro_tray_conduit",
    "header_text": "Virtues Reproduction, Research, Settings, Ontology",
    "local_header_href": "#virtues-reproduction-research-settings-ontology",
    "chunk_text": "### Virtues Reproduction, Research, Settings, Ontology\n\nI have probably asked developers for reproducible cases a couple of thousand times by now.\n\nLet's discuss that in a little bit more depth for the nonce, and also return once again to the topic of how to research a Revit API problem in general.\n\nFinally, I'll point out a possibly unnoticed Revit 2017 API MEP electrical feature.\n\nOh, yes, and I continued my research into deep learning for a Revit API question answering system:\n\n- [Creating a reproducible case may well solve the issue at hand](#2)\n- [How to research to find a Revit API solution](#3)\n    - [Question &ndash; how can I get the connectors of a `FamilyInstance`?](#3.1)\n    - [Answer &ndash; search online and samples](#3.2)\n    - [How to research for a Revit API solution](#3.3)\n    - [Response &ndash; Yay!](#3.4)\n- [Access to cable tray and conduit settings](#4)\n- [Getting started implementing a question answering system](#5)\n- [First impression from IBM Bluemix](#6)\n- [Open source QAS options](#7)\n- [Building a Revit API ontology](#8)\n\n\n####<a name=\"2\"></a>Creating a Reproducible Case May Well Solve the Issue at Hand\n\nAs said, I frequently ask for\na [reproducible test case](http://thebuildingcoder.typepad.com/blog/about-the-author.html#1b) to\nanalyse when researching a problem report.\n\nIt normally includes as many of the following items as possible:\n\n- A non-confidential minimal reproducible test case. That should mostly include:\n    - A minimal sample macro embedded in...\n    - A minimal project file to run it in\n    - Detailed step-by-step instructions specifying exactly:\n        - What you are trying to achieve\n        - The behaviour you observe\n        - The difference between the two\n        - How to reproduce the issue\n        \nWithout a possibility to reproduce the problem, there is no way for the development team or anyone else to analyse and discover what it is.\n\nNormally, the best way to explore a programming issue in more detail is to run it in the debugger.\n\nFurthermore, if the problem can be reproduced and solved, we still need to test the fix and verify that it really does what we expect.\n\nAnother even more beneficial aspect for all involved is that creating a minimal reproducible case like this can help you discover for yourself what you were doing wrong, and the issue becomes moot.\n\nThat was evidenced by a recent issue raised by Kinjal in\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api/bd-p/160) thread \non [different coordinate system for `ReferenceIntersector`](http://forums.autodesk.com/t5/revit-api-forum/different-coordinate-system-for-referenceintersector/m-p/6591571):\n\n**Question:** Since a few days I am facing a rather strange issue.\n`ReferenceIntersector` started returning off-the-chart values, e.g., referring a floor that is at elevation of 22ft per ProjectBasePoint, it reported -24ft in `Reference.GlobalPoint` for a particular Revit project, while it works well for other projects.\n\nA long explanation and further suggestions from other developers follow, ending with my suggestion to create and submit a reproducible case:\n\n**Answer:** Please submit a minimal reproducible case so this can be discussed with and analysed by the development team...\n\n**Response:** Thanks for your response. Silly enough, but the problem is solved now. Sorry for asking. I'd lay it out for someone who might benefit from it...\n\nIsn't that nice?\n\nMany thanks to Kinjal for his friendly appreciation, confirmation and further explanation of the underlying problem!\n\n\n####<a name=\"3\"></a>How to Research to Find a Revit API Solution\n\nCreating a reproducible case is vaguely linked to the more general and complex question about how to research a Revit API task in general.\n\nI keep putting together and repeating variations of advice on that and would like to consolidate my efforts at some point.\n\nHere are some recent examples of my attempts so far:\n\n- [Getting started and changing the colour of a wall](http://thebuildingcoder.typepad.com/blog/2016/09/macromanager-materials-kiss-and-getting-started.html#4)\n- [Getting started and using the Visual Studio Revit Add-In wizard auto-installer](http://thebuildingcoder.typepad.com/blog/2016/09/macromanager-materials-kiss-and-getting-started.html#5)\n- [What happened to `LoadCaseArray`; how and where to search for help on a Revit API question?](http://thebuildingcoder.typepad.com/blog/2016/09/trusted-signature-motivation-and-fishing.html#3)\n- [Access to line-based elements?](http://forums.autodesk.com/t5/revit-api-forum/access-to-line-based-elements/m-p/6569135)\n\nNow for yet another attempt to complete finalise this advice, from\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api/bd-p/160) thread \non [accessing the connectors of a FamilyInstance](http://forums.autodesk.com/t5/revit-api-forum/how-can-i-get-the-connectors-of-a-familyinstance/m-p/6558978):\n\n####<a name=\"3.1\"></a>Question &ndash; How Can I Get the Connectors of a FamilyInstance?\n\nHow can I get the connectors of a FamilyInstance?\n\n####<a name=\"3.2\"></a>Answer &ndash; Search Online and Samples\n \nPlease perform a search of your own before asking questions here, both for your own efficiency and the sake of others.\n\nIn this case, a search\nfor [revit api familyinstance connectors](https://duckduckgo.com/?q=revit+api+familyinstance+connectors)\nor [thebuildingcoder familyinstance connectors](https://duckduckgo.com/?q=thebuildingcoder+familyinstance+connectors) will certainly provide some starting points for you.\n\nObviously, you should also always search the Revit API help file, now accessible [online at `revitapidocs.com`](http://www.revitapidocs.com).\n\nThat immediately yields the following call sequence to explore: `FamilyInstance` &gt; `MEPModel` &gt; `ConnectorManager` &gt; `Connectors`.\n\nNext, turn to the [Revit SDK](www.autodesk.com/developrevit) samples and search for something like `ConnectorManager`; that causes 132 hits in 8 files.\n\n[The Building Coder samples](https://github.com/jeremytammik/the_building_coder_samples) also provide a whole bunch of samples handling connectors in various ways.\n\nThat should give you more than enough to get started, and hopefully answer an infinite number of similar future questions at the same time.\n\nIn addition to these obvious searches, there are indeed several other levels of information that are worthwhile checking out.\n \nI keep trying to create the ultimate complete list of them, and have not succeeded to my complete satisfaction so far.\n \nLet me expand\non [my last attempt](http://thebuildingcoder.typepad.com/blog/2016/09/trusted-signature-motivation-and-fishing.html#3) based on what I recently said there and elsewhere:\n\n####<a name=\"3.3\"></a>How to Research for a Revit API Solution\n\n1. Determine the optimal solution manually through the end user interface. Make sure you follow best practices and make use of existing built-in Revit functionality. If you skip this step or do not research deeply enough, you run a large risk of programming something that will be painful both to implement, maintain, debug and use.\n2. Determine the names of the Revit classes, methods and properties that will help you achieve your task. For example, create the appropriate situation and sample BIM via the user interface and analyse it before and after making the modifications you need, e.g., using:\n    - [RevitLookup](https://github.com/jeremytammik/RevitLookup)\n    - [BipChecker](https://github.com/jeremytammik/BipChecker)\n    - [The element lister](https://github.com/jeremytammik/AdnRevitApiLabsXtra)\n    - [Other, more intimate Revit database exploration tools](http://thebuildingcoder.typepad.com/blog/2013/11/intimate-revit-database-exploration-with-the-python-shell.html),  such as the Revit Python or Ruby shell\n3. Once you know what Revit API objects are required, learn how to access, manipulate and drive them, their relationships and how they interact with each other:\n    - Revit API help file `RevitAPI.chm` installed locally or [online at revitapidocs.com](http://www.revitapidocs.com) provides detailed info on classes, properties and methods.\n    - [Revit online help](http://help.autodesk.com/view/RVT/2017/ENU) &gt; Developers &gt; [Revit API Developers Guide](http://help.autodesk.com/view/RVT/2017/ENU/?guid=GUID-F0A122E0-E556-4D0D-9D0F-7E72A9315A42) explains the Revit API usage in much more depth and provides invaluable background information.\n    - Revit SDK sample collection installed locally and managed by Visual Studio via `SDKSamples.sln` shows how Revit API objects work together to solve specific tasks.\n    - [The Building Coder samples](https://github.com/jeremytammik/the_building_coder_samples) provide another large bunch of sample external commands implementing numerous different tasks.\n \nAfter you have exhausted those options, search the Internet for 'revit api' or 'thebuildingcoder' plus the Revit API names that you are interested in.\n \nI very much hope that this does not only feed you for the moment, but also supports you in the process of being transformed into a competent fisherman &nbsp; :-)\n\n####<a name=\"3.4\"></a>Response &ndash; Yay!\n\nThank you, Jeremy!\n \nThis will certainly help me much in the future!\n\n\n####<a name=\"4\"></a>Access to Cable Tray and Conduit Settings\n\nLet's round off this discussion by pointing out an easy new solution to a previously intractable requirement:\n\nThe development team just pointed out to me that the wish list item I raised for Mark over a year ago has long been fulfilled, so I thought I would share that happy news here with you are well.\n\nMark asked in\na [comment](http://thebuildingcoder.typepad.com/blog/2011/09/transfer-project-standards.html#comment-2340822661)\non [transferring project standards](http://thebuildingcoder.typepad.com/blog/2011/09/transfer-project-standards.html):\n\n**Question:** I would like to change or add conduit sizes in the MEP Electrical and Conduit settings through the Revit API.\nThe `ElectricalSetting` class does not support Tray or Conduit settings.\nConduit settings can be modified from the GUI.\nIs there any Revit API that supports this, or any workaround for the issue?\n\n**Answer:** New APIs for this access were added in Revit 2017:\n\n- `Autodesk.Revit.DB.Electrical.CableTraySettings`\n- `Autodesk.Revit.DB.Electrical.ConduitSettings`\n\nThese two classes were also mentioned in the section\non [Electrical API additions](http://thebuildingcoder.typepad.com/blog/2016/04/whats-new-in-the-revit-2017-api.html#3.14)\nin [What's New in the Revit 2017 API](http://thebuildingcoder.typepad.com/blog/2016/04/whats-new-in-the-revit-2017-api.html).\n\n\n####<a name=\"5\"></a>Getting Started Implementing a Question Answering System\n\nAs I mentioned last month, I would like to experiment with\nan [automated system to answer the most common recurring questions on the Revit API](http://thebuildingcoder.typepad.com/blog/2016/10/ai-edit-and-continue.html#3),\ni.e., a [question answering](https://en.wikipedia.org/wiki/Question_answering) system or QAS.\n\nI started doings some basic fleeting research this week, skimming\nthe [Internet literature on deep learning](http://thebuildingcoder.typepad.com/blog/2017/01/au-in-london-and-deep-learning.html#7).\n\n####<a name=\"6\"></a>First Impression from IBM Bluemix\n\nBased on a quick skim of the literature, my first impression was that the best system might be the IBM Watson one used by Ashok Goel for his automated teaching assistant, which does a similar job.\n\nI registered to the [IBM Bluemix](www.IBM.com/bluemix) platform and started exploring that.\n\nIt is free for thirty days and then starts billing, with free options only for the most limited use and no obvious provisions for greater support for open source projects\n\nExamining the pricing options turned me off, even without having any idea what these numbers might mean:\n\n- Document Conversion Pricing Standard CHF 0.0474 CHF/MB, First 100 MB per month free, additional MB $0.05 per MB.\n- Retrieve and Rank &ndash; The IBM Watson Retrieve and Rank service helps users find the most relevant information for their query by using a combination of search and machine learning algorithms to detect \"signals\" in the data. Built on top of Apache Solr, developers load their data into the service, train a machine learning model based on known relevant results, then leverage this model to provide improved results to their end users based on their question or query. &ndash; Pricing Plan: Monthly prices shown are for country or region: Switzerland; Standard; Retrieve: 1 shared Solr cluster (up to 50 MB) free per month, Rank: 1 Rank Model free per month, 1000 API calls free per month, 4 Training Events free per month, CHF 0.28 CHF/dedicated high availability Retrieve Solr cluster per instance hour, CHF 9.48 CHF/Instance Rank machine learning model per month, CHF 0.00084 CHF/Rank API call, CHF 1.90 CHF/Rank training event; Retrieve: You will be charged per instance hour for each Solr cluster based on the size of that cluster. The size of the cluster can be set by using the cluster_size parameter when creating the cluster. The base cluster is 4 GB of memory and 32 GB of storage, and includes high availability. Clusters can be scaled up to 7X the base cluster size (28 GB of memory, 224 GB of storage). For example, a 2X cluster is 8 GB of memory and 64 GB of storage and would be charged twice the amount of a base cluster. Rank: You will be charged for each API call, model, and training event.\n- Natural Language Classifier &ndash; The Natural Language Classifier service applies cognitive computing techniques to return the best matching classes for a sentence or phrase. For example, you submit a question and the service returns keys to the best matching answers or next actions for your application. You create a classifier instance by providing a set of representative strings and a set of one or more correct classes for each training. After training, the new classifier can accept new questions or phrases and return the top matches with a probability value for each match. &ndash; Pricing Standard: 1 Natural Language Classifier instance free per month, 1000 API calls free per month, 4 Training Events free per month, CHF 18.95 CHF/ Instance per month, CHF 0.00332 CHF/ API call, CHF 2.85 CHF/ Training Event; you will be charged per API call, per instance, and per training event.\n\nHmm. No, thank you, not right now.\n\n####<a name=\"7\"></a>Open Source QAS Options\n\nLooking for open source alternatives to IBM Watson yields immediate promising results:\n\n- [Watson wannabes: 4 open source projects for machine intelligence](http://www.infoworld.com/article/2858891/machine-learning/four-open-source-watson-machine-intelligence.html) &ndash; these projects are not as established as Watson, but they're open source and ready for work.\n    - [DARPA DeepDive](http://deepdive.stanford.edu/) &ndash; SQL and Python.\n    - [Apache UIMA](http://uima.apache.org/), Unstructured Information Management, and derivative projects such as [YodaQA](https://github.com/brmson/yodaqa).\n    - [OpenCog](http://opencog.org/) &ndash; not much obvious immediate info on the web site.\n    - [OAQA, Open Advancement of Question Answering Systems](http://oaqa.github.io/)\n\nI explored those from the last to the first, and they looked more promising the further I went towards the top of the list:\n\nThe [OAQA GitHub organisation](https://github.com/oaqa) lists numerous repositories which might provide useful staring points for an own project.\nThe documentation is a bit scant and bumpy, though.\n\n[YodaQA](https://github.com/brmson/yodaqa) looks very interesting, with more documentation, still a bit rough, though.\n\n[DeepDive](http://deepdive.stanford.edu/) looks more interesting still, with professional-looking documentation, tutorials, existing real-world projects making use of it, etc.\n\nI'm raring to get going diving deeper into DeepDive.\n\n<center>\n<img src=\"img/deep_dive_header_logo.png\" alt=\"DeepDive\" width=\"350\"/>\n</center>\n\n####<a name=\"8\"></a>Building a Revit API Ontology\n\nObviously, the system will never know more than what you tell it to start with, and teach it as it goes along.\n\nLuckily, this is a so-called <b><i>closed domain</i></b> and thus an easier task because the system can exploit domain-specific knowledge, as opposed to an open domain dealing with questions about nearly anything whatsoever.\n\nI need to assemble a Revit API [ontology](https://en.wikipedia.org/wiki/Ontology_(information_science)).\n\nI can use various sources for that:\n\n- The Revit API help file `RevitAPI.chm` contents, now accessible [online at `revitapidocs.com`](http://www.revitapidocs.com).\n- The Revit [Developer Guide](http://help.autodesk.com/view/RVT/2017/ENU/?guid=GUID-F0A122E0-E556-4D0D-9D0F-7E72A9315A42).\n- [The Building Coder](http://thebuildingcoder.typepad.com) and other blog content.\n- Existing Q &amp; A:\n    - The [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160).\n    - StackOverflow questions tagged with [`revit-api`](http://stackoverflow.com/questions/tagged/revit-api) and [`revitpythonshell`](http://stackoverflow.com/questions/tagged/revitpythonshell).\n    - [The Building Coder](http://thebuildingcoder.typepad.com) comments and posts explicitly listing Q &amp; A.\n    - Revit API related ADN cases. Luckily, I even have all my cases stored locally in text files...\n    - Email.\n- Many other sources.\n\nThat is normally the biggest job in setting up such a system.\n\nIf anyone would like to chip in and help in any way whatsoever, that would be most appreciated, e.g.:\n\n- Suggestions for ontology creating, sources, structure, population, storage, etc.\n- Experience or advice in this or related areas.\n- Anything else you would like to contribute that you think might help."
  }
]