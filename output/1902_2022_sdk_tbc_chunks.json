[
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- https://forums.autodesk.com/t5/revit-api-forum/revit-2022-parametertype-text-to-forgetypeid/m-p/10247574\n\n- https://autodesk.slack.com/archives/C0KBT3859/p1618938930051100\n  https://www.oreilly.com/online-learning/feature-answers.html\n  To use O’Reilly Answers in Slack, type `/oreilly-answers` followed by a question to scan the O'Reilly content and get the answer.\n\ntwitter:\n\nObtain and compile the Revit 2022 SDK, set up RvtSamples, load the SDK external commands, migrate The Building Coder samples and convert ParameterType to ForgeTypeId in the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon http://autode.sk/rvtsamples2022\n\nThe Revit 2022 SDK is now available for download from the Revit Developer Centre autodesk.com/developrevit.\nI logged my experiences installing it, setting up RvtSamples, loading the SDK external commands, and migrating The Building Coder samples to the new release\n&ndash; First the logs\n&ndash; Revit 2022 SDK warnings\n&ndash; Setting up RvtSamples\n&ndash; The Building Coder samples migration\n&ndash; <code>ParameterType</code> and <code>ForgeTypeId</code>\n&ndash; O'Reilly answers...\n\nlinkedin:\n\nObtain and compile the Revit 2022 SDK, set up RvtSamples, load the SDK external commands, migrate The Building Coder samples and convert ParameterType to ForgeTypeId in the #RevitAPI\n\nhttp://autode.sk/rvtsamples2022\n\nThe Revit 2022 SDK is now available for download from the Revit Developer Centre autodesk.com/developrevit.\nI logged my experiences installing it, setting up RvtSamples, loading the SDK external commands, and migrating The Building Coder samples to the new release:\n\n- First the logs\n- Revit 2022 SDK warnings\n- Setting up RvtSamples\n- The Building Coder samples migration\n- ParameterType and ForgeTypeId\n- O'Reilly answers...\n\n#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk\n\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\n\n<center>\n<img src=\"img/\" alt=\"\" title=\"\" width=\"600\"/>\n<p style=\"font-size: 80%; font-style:italic\"></p>\n<p style=\"font-size: 80%; font-style:italic\">\n<a href=\"\"></a>\n</p>\n</center>\n\n-->"
  },
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "Revit 2022 SDK and The Building Coder Samples",
    "local_header_href": "#revit-2022-sdk-and-the-building-coder-samples",
    "chunk_text": "### Revit 2022 SDK and The Building Coder Samples\n\nThe Revit 2022 SDK is now available for download from\nthe [Revit Developer Centre, autodesk.com/developrevit](https://www.autodesk.com/developer-network/platform-technologies/revit).\n\nI logged my experiences installing and compiling it, setting up the RvtSamples application to load all the SDK external commands, and migrating The Building Coder samples to the new release:\n\n- [First the logs](#2)\n- [Revit 2022 SDK warnings](#3)\n- [Setting up RvtSamples](#4)\n- [The Building Coder samples migration](#5)\n- [`ParameterType` and `ForgeTypeId`](#6)\n- [O'Reilly answers](#7)"
  },
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "First the Logs",
    "local_header_href": "#2",
    "chunk_text": "####<a name=\"2\"></a> First the Logs\n\nIn reality, I migrated RevitLookup first, then The Building Coder samples, and last I installed the SDK and set up RvtSamples.\nHere are my log files of errors, warnings and WIP notes in that order:\n\n- [RevitLookup](zip/revit_2022_revitlookup_errors_warnings_0.txt)\n- [The Building Coder samples](zip/tbc_samples_2022_migr_01.txt)\n- [Revit 2022 SDK and RvtSamples](zip/revit_2022_sdk_samples_errors_warnings_1.txt)\n\nLet's look at the SDK installation first, though:"
  },
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "Revit 2022 SDK Warnings",
    "local_header_href": "#3",
    "chunk_text": "####<a name=\"3\"></a> Revit 2022 SDK Warnings\n\nThe first thing I did was update\nmy [RevitSdkSamples GitHub repository](https://github.com/jeremytammik/RevitSdkSamples) to\nthe new release, enabling me (and you) to easily track all the changes I made,\ncf. [release 2022.0.0.0](https://github.com/jeremytammik/RevitSdkSamples/releases/tag/2022.0.0.0) and subsequent ones.\n\nI loaded the `SDKSamples.sln` solution file and was glad to note that the Revit API assembly references were all set up and ready to go.\nThe compilation succeeded out of the box and all 196 projects completed.\nThe compilation generated [49 warnings](zip/revit_2022_sdk_samples_errors_warnings_1.txt).\n\nMost of the warnings concern the\never-recurring [architecture mismatch issue](http://thebuildingcoder.typepad.com/blog/2013/06/processor-architecture-mismatch-warning.html)\nand can be resolved using\nmy [DisableMismatchWarning.exe utility](http://thebuildingcoder.typepad.com/blog/2013/07/recursively-disable-architecture-mismatch-warning.html)\nimplemented back in 2013 and available from\nthe [DisableMismatchWarning GitHub repository](https://github.com/jeremytammik/DisableMismatchWarning).\n\nAfter fixing those, only seven warnings remain;\ntwo were due to missing XML documentation comments, and three missing rule sets. \nI added two trivial documentation comments and deleted a reference to one of the rule sets.\n\nIn the end, four warnings remain that I will ignore for now;\nactually, I don't even know what is causing them or how they could be fixed:\n\n- GeometryCreation_BooleanOperation: Could not find rule set file \"GeometryCreation_BooleanOperation.ruleset\".    \n- ProximityDetection_WallJoinControl: Could not find rule set file \"ProximityDetection_WallJoinControl.ruleset\".    \n- AppearanceAssetEditing: `Microsoft.Csharp.targets` cannot be imported again. It was already imported... This is most likely a build authoring error. This subsequent import will be ignored.\n- SampleCommandsSteelElements: ditto"
  },
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "Setting up RvtSamples",
    "local_header_href": "#4",
    "chunk_text": "####<a name=\"4\"></a> Setting up RvtSamples\n\nTo set up RvtSamples, I need to do two things:\n\nThe first is trivial &ndash; adapt its `*.addin` file appropriately and copy it to the Revit `AddIns` folder.\n\nThe second is mostly a lot more work, fixing up the `RvtSamples.txt` file to correctly list all the external commands defined by the SDK, specifically the pathname of their assembly DLL and their correct .NET class name.\n\nTo help with that, I temporarily turn on a debugging flag that tests the validity of that data by attempting to load and thus test the existence of each external command.\n\nThat turned up a few errors, e.g.:\n\n- Erroneous `bin` path in several VB.NET samples, `VB.NET/bin/Debug/` instead of `/VB.NET/bin/`\n- Duplicate menu item name `Infrastructure alignments`\n\nIn the end, all loaded fine:\n\n<center>\n<img src=\"img/rvtsamples_2022.png\" alt=\"RvtSamples 2022\" title=\"RvtSamples 2022\" width=\"700\"> <!-- 1934 -->\n</center>\n\nYou can track the changes I made in\nthe [GitHub diffs](https://github.com/jeremytammik/RevitSdkSamples/compare/2022.0.0.2...2022.0.0.4)."
  },
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "The Building Coder Samples Migration",
    "local_header_href": "#5",
    "chunk_text": "####<a name=\"5\"></a> The Building Coder Samples Migration\n\nAfter referencing the new Revit 2022 API assemblies, The Building Coder samples compilation succeeded,\nproducing [35 warnings](zip/tbc_samples_2022_migr_01.txt).\n\nMany were related to the obsolete `ParameterType` class and the `FilterStringRule` constructor that loses its `caseSensitive` argument."
  },
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "ParameterType and ForgeTypeId",
    "local_header_href": "#6",
    "chunk_text": "####<a name=\"6\"></a> ParameterType and ForgeTypeId\n\nWe discussed some aspects of the former issue in\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non [Revit 2022: `ParameterType.Text` to `ForgeTypeId`](https://forums.autodesk.com/t5/revit-api-forum/revit-2022-parametertype-text-to-forgetypeid/m-p/10247574).\n\nDavid Becroft summarises the gist of the matter like this:\n\nTo create a text parameter, please use `SpecTypeId.String.Text`.\n\nFor context, the `ForgeTypeId` properties directly in the `SpecTypeId` class identify the measurable data types, like `SpecTypeId.Length` or `SpecTypeId.Mass`.\nThe non-measurable data types are organized into nested classes within `SpecTypeId`, like `SpecTypeId.String.Text`, `SpecTypeId.Boolean.YesNo`, `SpecTypeId.Int.Integer`, or `SpecTypeId.Reference.Material`.\n\nRegarding text parameters that report their type as `Number`, here's the history:\n\n- Prior to Revit 2021, a `Definition` had a `UnitType` and a `ParameterType`.\n  The `UnitType` property was only meaningful for parameters with measurable `ParameterType` values, and a parameter with `ParameterType.Text` would report a meaningless `UnitType.Number` value.\n- Revit 2021 deprecated the `UnitType` property and replaced it with the `GetSpecTypeId` method.\n  The behaviour remained the same &ndash; a parameter with `ParameterType.Text` would have `GetSpecTypeId()` == `SpecTypeId.Number`.\n- Revit 2022 deprecated the `ParameterType` property and the `GetSpecTypeId` method, replacing them both with the `GetDataType` method.\n  A parameter with `ParameterType.Text` will report `GetDataType()` == `SpecTypeId.String.Text`.\n  Side note: The `GetDataType` method can also return a category identifier, indicating a Family Type parameter of that category.\n\nIn The Building Coder samples, I made the following replacements:\n\n- ParameterType.Text &rarr; SpecTypeId.String.Text \n- ParameterType.Number &rarr; SpecTypeId.Number \n- Definition.ParameterType &rarr; Definition.GetDataType()\n- ParameterType.Material &rarr; SpecTypeId.Reference.Material \n- ParameterType.Text &rarr; SpecTypeId.String.Text \n- removed Util.SpellingErrorCorrector \n- removed CompatibilityMethods.Creaste2( this Definitions ) \n- UnitUtils.GetAllSpecs() &rarr; UnitUtils.GetAllMeasurableSpecs() \n- ParameterType.Length &rarr; SpecTypeId.Length\n- BuiltInParameterGroup.PG_IDENTITY_DATA &rarr; GroupTypeId.IdentityData\n- ParameterType.Length &rarr; SpecTypeId.Length\n- BuiltInParameterGroup.PG_CONSTRAINTS &rarr; GroupTypeId.Constraints\n- tag.GetTaggedLocalElement() &rarr; tag.GetTaggedLocalElements()\n- newTag.TaggedElementId &rarr; newTag.GetTaggedElementIds()\n- removed the `FilterStringRule` constructor last argument\n\nI replaced one call to the `NewFloor` method by `Floor.Create`.\nIt required the conversion of the edge loop container data type, so it was not completely trivial.\n\nThat left two warnings about similar deprecated methods that I chose to leave for the time being:\n\n- Warning CS0618 'Document.NewFloor(CurveArray, bool)' is obsolete: This method is deprecated in Revit 2022 and may be removed in the future version of Revit. To create new instance of Floor, call Floor.Create()\n- Warning CS0618 'Document.NewSlab(CurveArray, Level, Line, double, bool)' is obsolete: This method is deprecated in Revit 2022 and may be removed in the future version of Revit. To create new instance of Floor, call Floor.Create().\n\nLoading The Building Coder samples via RvtSamples with the external command checking flag turned on revealed that two external commands were no longer defined, since I commented them out due to excessive use of deprecated unit handling functionality that is of little interest any more: `CmdParameterUnitConverter` and `CmdDutAbbreviation`. I simply commented them out in `BcSamples.txt`.\n\nNow RvtSamples loads The Building Coder samples as well:\n\n<center>\n<img src=\"img/tbc_samples_2022.png\" alt=\"The Building Coder samples 2022\" title=\"The Building Coder samples 2022\" width=\"800\"> <!-- 2040 -->\n</center>\n\nThe changes I made are clearly listed in\nthe [GitHub diffs](https://github.com/jeremytammik/the_building_coder_samples/compare/2022.0.150.0...2022.0.150.4).\n\nI wish you the best of luck and smooth sailing with your own migration efforts."
  },
  {
    "original_filename": "1902_2022_sdk_tbc",
    "header_text": "O'Reilly Answers",
    "local_header_href": "#7",
    "chunk_text": "####<a name=\"7\"></a> O'Reilly Answers\n\nA nice new little AI application provided by the main professional technical literature publisher,\n[O’Reilly Answers](https://www.oreilly.com/online-learning/feature-answers.html) responds\nto technical questions of all kinds by scanning thousands of go-to books on the subject at hand:\n\n> Need a quick solution you can put to work fast? Just ask O’Reilly Answers. It’s an advanced natural language processing engine that instantly scans thousands of O’Reilly titles to find the snippet that can save the day.\n\nAt Autodesk, we use [Slack](https://slack.com) quite a bit, so this will come in handy for me.\nTo use O’Reilly Answers in Slack, type `/oreilly-answers` followed by a question to scan the O'Reilly content and get the answer."
  }
]