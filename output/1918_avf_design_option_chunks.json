[
  {
    "original_filename": "1918_avf_design_option",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- clean up AVF results before design option switch\n  how to search all AVF analysis result and remove them?\n  https://forums.autodesk.com/t5/revit-api-forum/how-to-search-all-avf-analysis-result-and-remove-them/td-p/10437422\n\n- kfpopeye Revit projects\n  Project Sweeper, ReVVed, and other apps now open source\n  https://forums.autodesk.com/t5/revit-api-forum/project-sweeper-revved-and-other-apps-now-open-source/m-p/10617548\n\ntwitter:\n\nadd #thebuildingcoder\n\nOpen source projects clean up parameters, the Revit model, and other operations, an important AVF cleanup required to prevent crashing, and some youngsters cleaning up some cash with the #RevitAPI #DynamoBim @AutodeskForge @AutodeskRevit #bim #ForgeDevCon https://autode.sk/avfcleanup\n\nOpen source projects that help clean up parameter values, the Revit model and other operations, an important AVF cleanup required to prevent crashing, and some youngsters cleaning up some cash\n&ndash; Kfpopeye open source projects\n&ndash; AVF result clean-up before design option switch\n&ndash; Young teen and kid sister crypto entrepreneurs...\n\nlinkedin:\n\nOpen source projects clean up parameters, the Revit model, and other operations, an important AVF cleanup required to prevent crashing, and some youngsters cleaning up some cash with the #RevitAPI\n\nhttps://autode.sk/avfcleanup\n\n- Kfpopeye open source projects\n- AVF result clean-up before design option switch\n- Young teen and kid sister crypto entrepreneurs...\n\n#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk\n\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\n\n<center>\n<img src=\"img/\" alt=\"\" title=\"\" width=\"600\"/>\n<p style=\"font-size: 80%; font-style:italic\"></p>\n</center>\n\n**Question:** \n\n**Answer:**\n\n**Response:**  \n\nMany thanks to  for this very helpful explanation!\n\n<pre class=\"code\">\n</pre>\n\n-->"
  },
  {
    "original_filename": "1918_avf_design_option",
    "header_text": "Kfpopeye Open Source, AVF and Other Cleanup",
    "local_header_href": "#kfpopeye-open-source-avf-and-other-cleanup",
    "chunk_text": "### Kfpopeye Open Source, AVF and Other Cleanup\n\nLots of clean-up operations:\nopen source projects that help clean up a Revit model, certain parameter values and other operations, an important AVF cleanup required to prevent crashing, and some youngsters cleaning up some cash:\n\n- [Kfpopeye open source projects](#2)\n- [AVF result clean-up before design option switch](#3)\n    - [Problem description](#3.1)\n    - [Workaround](#3.2)\n- [Young teen and kid sister crypto entrepreneurs](#4)"
  },
  {
    "original_filename": "1918_avf_design_option",
    "header_text": "Kfpopeye Open Source Projects",
    "local_header_href": "#2",
    "chunk_text": "####<a name=\"2\"></a> Kfpopeye Open Source Projects\n\n[Kfpemail-2](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/11350013) kindly announced a bunch of new open Revit add-in projects in\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non [Project Sweeper, ReVVed, and other apps now open source](https://forums.autodesk.com/t5/revit-api-forum/project-sweeper-revved-and-other-apps-now-open-source/m-p/10617548):\n\nA while ago I decided to shut down [pkh Lineworks](http://www.pkhlineworks.ca) and\ndiscontinue work on my apps Project Sweeper, MLTE, ReVVed, Paraline and Knock Knock.\nI have now decided to make them open source, so anyone can download the code and continue to update them for future versions of Revit.\n\nThe repositories can be found in\nthe [Kfpopeye](https://github.com/kfpopeye)\n[repositories](https://github.com/kfpopeye?tab=repositories) on GitHub:\n\n- MLTE\n- Knock-Knock\n- Paraline\n- Project-Sweeper\n- ReVVed\n\nI just added a readme file with a bit more information for them, plus a zip file `html_help_files.zip` containing the help documentation in html format providing detailed descriptions of what each command does:\n\n- MLTE &ndash; M.L.T.E. (pronounced \"multi\") is program extension that is used inside Autodesk® Revit. It is a multiline text editor that can be used for editing the parameters of anything inside Revit but in a multi-line view instead of the single line that Revit's Properties Palette gives you.\nIn addition to editing the values of parameters M.L.T.E. can also edit the formulas when used inside the Revit Family Editor.\nIt even has syntax highlighting and auto-formatting to make complex nested if statements easier to follow and debug.\n- Knock-Knock &ndash; a program extension for editing the values of door instance parameters, not for changing the way your door schedule is set up.\nThe primary way Knock Knock does this is by making text parameters act like `Yes`/`No` parameters.\nWith a simple click, users can change parameters values between multiple pre-defined values.\nThere are more features as well.\n- Paraline &ndash; a Revit program extension that allows you to convert the detail elements from standard orthographic drawings like plans and elevations into 3D isometric drawings.\n- Project-Sweeper &ndash; a collection of tools that allow a user to quickly and accurately remove the following clutter from Revit projects: line styles line patterns text styles fill region types and fill patterns.\nExcept for text styles, these items are not checked by Revit's *Purge Unused* command.\nProject Sweeper goes beyond just checking for unused styles and patterns.\nIt also allows a user to convert from one style or pattern to another, delete all the elements using a certain style or pattern and preview all the views or elements using a style or pattern before removing them.\n- ReVVed &ndash; an extension of commands for use within Revit.\n\nMany thanks to [pkh Lineworks](http://www.pkhlineworks.ca) and [Kfpopeye](https://github.com/kfpopeye) for sharing this work!"
  },
  {
    "original_filename": "1918_avf_design_option",
    "header_text": "AVF Result Clean-Up before Design Option Switch",
    "local_header_href": "#3",
    "chunk_text": "####<a name=\"3\"></a> AVF Result Clean-Up before Design Option Switch\n\nZhu Liyi raises a serious issue highlighting the urgent need to clean up AVF results before a design option switch in\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non [how to search all AVF analysis result and remove them](https://forums.autodesk.com/t5/revit-api-forum/how-to-search-all-avf-analysis-result-and-remove-them/td-p/10437422),\nprompting a development ticket *REVIT-182024 &ndash; `SpatialFieldManager` within design option duplicated crashes* to improve this behaviour in future.\n\nHappily, a simple workaround is perfectly feasible.\n\n####<a name=\"3.1\"></a> Problem Description \n\nSpatialFieldManager within design option duplicated crashes.\n\nThe `SpatialFieldManager` class is an AVF object that exists only in RAM, not in the model database.\n\nIt will cause Revit to crash if the result is created inside a design option and that design option is duplicated.\n\nI would like to detect any result that's inside a design option and warn the user, but can't find a way to search for them.\n\nIt would be nice to fix the crash bug, or disallow analysis result to be placed inside design option altogether.\n\nI cannot submit a sample model, since the object does not exist in model, only in RAM.\n\nThe way to reproduce this is:\n\n- Create design option set and some design options\n- Get inside a design option (make it active)\n- Use some tool to create AVF object. The API sample add-in should do.\n- Exit to main model, duplicate the design option that contains AVF object.\n- Revit will crash.\n\n####<a name=\"3.2\"></a> Workaround\n\nAlexander [@aignatovich](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/1257478) [@CADBIMDeveloper](https://github.com/CADBIMDeveloper) Ignatovich, aka Александр Игнатович, suggested a fix:\n\n**Answer:** I have not faced crashes myself, because I haven't used it with design options yet.\nBut I'll try to suggest a workaround:\n\n- Collect open views via the `UIDocument` `GetOpenUIViews` method\n- For each opened view, try to retrieve the spatial field manager via the `SpatialFieldManager` `GetSpatialFieldManager` method; if it returns non-null, the spatial field manager exists\n- Call `SpatialFieldManager.Clear` to remove AVF\n\n**Response:** This is the solution! Thanks.\n\nI did a complete AVF clearing of all views in document.\n\nHere is the code:\n\n<pre class=\"code\">\n&nbsp;&nbsp;<span style=\"color:blue;\">var</span>&nbsp;views&nbsp;=&nbsp;<span style=\"color:blue;\">new</span>&nbsp;FilteredElementCollector(&nbsp;doc&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;.WhereElementIsNotElementType()\n&nbsp;&nbsp;&nbsp;&nbsp;.OfClass(&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;View&nbsp;)&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;.Cast&lt;View&gt;()\n&nbsp;&nbsp;&nbsp;&nbsp;.ToList();\n&nbsp;&nbsp;<span style=\"color:blue;\">foreach</span>(&nbsp;var&nbsp;view&nbsp;<span style=\"color:blue;\">in</span>&nbsp;views&nbsp;)\n&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">var</span>&nbsp;sfm&nbsp;=&nbsp;SpatialFieldManager.GetSpatialFieldManager(&nbsp;view&nbsp;);\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">if</span>(&nbsp;sfm&nbsp;==&nbsp;<span style=\"color:blue;\">null</span>&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">continue</span>;\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">else</span>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sfm.Clear();\n&nbsp;&nbsp;}\n</pre>\n\nSince there is no change to the model itself, no need to open a transaction.\n\n**Answer:** I haven't tested your code, but I see some potential problems (they could or could not really occur).\n\nThe first is View itself, it could be a template, a schedule or other table views, it could be a view sheet or some \"internal\" views such as project browser. Not sure if GetSpatialManager would throw an exception in these cases now (remember, this behaviour could change in future Revit releases), but I would add a check, something like that:\n\n<pre class=\"code\">\n  ...\n  .Cast&lt;View&gt;()\n  .Where(&nbsp;x&nbsp;=&gt;&nbsp;x.AllowsAnalysisDisplay()\n</pre>\n\nThe second thing, are you sure you have to check all views from the model? Maybe it will be enough to check opened views only?\n\n<pre class=\"code\">\n&nbsp;&nbsp;<span style=\"color:blue;\">var</span>&nbsp;views&nbsp;=&nbsp;uidoc\n&nbsp;&nbsp;&nbsp;&nbsp;.GetOpenUIViews()\n&nbsp;&nbsp;&nbsp;&nbsp;.Select(&nbsp;x&nbsp;=&gt;&nbsp;doc.GetElement(&nbsp;x.ViewId&nbsp;)&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;.Cast&lt;View&gt;()\n&nbsp;&nbsp;&nbsp;&nbsp;.Where(&nbsp;x&nbsp;=&gt;&nbsp;x.AllowsAnalysisDisplay()&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;.ToList();\n</pre>\n\n**Response:** Thanks for the check.\n\nYes; I would have added `AllowAnalysisDisplay` too, if I had known it exists : P\n\nI tried closing the view, then re-opening it; the AVF object is still there.\nSo, I need to do a document-wide search, not just opened views.\n\nMany thanks to Zhu Liyi for raising this and to Alexander for the good solution!"
  },
  {
    "original_filename": "1918_avf_design_option",
    "header_text": "Young Teen and Kid Sister Crypto Entrepreneurs",
    "local_header_href": "#4",
    "chunk_text": "####<a name=\"4\"></a> Young Teen and Kid Sister Crypto Entrepreneurs\n\nA sweet and impressive story about how much is possible nowadays, given appropriate support and motivation:\n\n[14- and 9-year-old siblings earn over $30,000 a month mining cryptocurrency](https://www.cnbc.com/2021/08/31/kid-siblings-earn-thousands-per-month-mining-crypto-like-bitcoin-eth.html)\n\n<center>\n<img src=\"img/crypto_entrepreneurs.jpg\" alt=\"Crypto entrepreneurs\" title=\"Crypto entrepreneurs\" width=\"400\"/> <!-- 630 -->\n</center>"
  }
]