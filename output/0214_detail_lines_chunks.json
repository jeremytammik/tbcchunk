[
  {
    "original_filename": "0214_detail_lines",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<link href=\"bc.css\" rel=\"stylesheet\" type=\"text/css\"/>\n</head>"
  },
  {
    "original_filename": "0214_detail_lines",
    "header_text": "Detail Lines",
    "local_header_href": "#detail-lines",
    "chunk_text": "<h3>Detail Lines</h3><p>We previously discussed various aspects of model lines, such as\n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2008/11/model-line-creation.html\">\nmodel line creation</a>,\n\nthe \n<a href=\"http://thebuildingcoder.typepad.com/blog/2009/05/model-line-sketch-plane.html\">\nmodel line sketch plane</a>,\n\nand the \n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2009/07/think-big-in-revit.html\">\nminimal length of a model line</a>.\n\nHere is a question on the related topic of detail lines handled by my colleague Saikat Bhattacharya:\n\n<p><strong>Question:</strong>\nHow can I create a detail line on a drafting view? \nI tried to use the following statement:\n\n<pre>\ndoc.Create.NewDetailCurve( View, curve, y );\n</pre>\n\nIt is unclear to me what the \"curve\" and the \"sketchPlane\" stand for and how to use them.\nPlease could you provide me with a small sample.\n\n<p><strong>Answer:</strong>\nDetail curves are created for drawings such as a detail or drafting view. \nThey are annotation elements and are visible only in the view in which they are drawn.\nThey can currently only be created in plan views.\n\n<p>Except for this, detail curves are similar to model curves. \nModelLine and DetailLine both belong to the Lines category.\nThus, for a sample on creating detail curves, you can refer to and slightly adapt the Revit SDK sample ModelLines,\nwhich shows how to work with the sketch plane and geometry curve to create a new model line. \n\n<p>For more details on sketch planes and model curves, you can also refer to the developer guide \"Revit 2010 API Developer Guide.pdf\", especially chapter 14, Annotation Elements, and section 14.2, Detail Curve.\nAnother helpful section is 15.3.1 on Creating a ModelCurve and the Code Region 15-2: Creating a new model curve, which illustrates how to create new geometry curves, a sketch plane, and model curves, a ModelLine and a ModelArc.\nYou can use the same approach to create detail curves as well.\n\n<p>I implemented a new external command CmdDetailCurves in The Building Coder sample application by slightly modifying the sample code provided in the developer guide. \nHere is the code of the new command's Execute method:</p>\n<pre class=\"code\">\n  <span class=\"teal\">Application</span> app = commandData.Application;\n  <span class=\"teal\">Document</span> doc = app.ActiveDocument;\n  <span class=\"teal\">View</span> view = doc.ActiveView;\n \n  <span class=\"green\">// Create a geometry line</span>\n  <span class=\"teal\">XYZ</span> startPoint = <span class=\"blue\">new</span> <span class=\"teal\">XYZ</span>( 0, 0, 0 );\n  <span class=\"teal\">XYZ</span> endPoint = <span class=\"blue\">new</span> <span class=\"teal\">XYZ</span>( 10, 10, 0 );\n \n  <span class=\"teal\">Line</span> geomLine = app.Create.NewLine(\n    startPoint, endPoint, <span class=\"blue\">true</span> );\n \n  <span class=\"green\">// Create a geometry arc</span>\n  <span class=\"teal\">XYZ</span> end0 = <span class=\"blue\">new</span> <span class=\"teal\">XYZ</span>( 1, 0, 0 );\n  <span class=\"teal\">XYZ</span> end1 = <span class=\"blue\">new</span> <span class=\"teal\">XYZ</span>( 10, 10, 10 );\n  <span class=\"teal\">XYZ</span> pointOnCurve = <span class=\"blue\">new</span> <span class=\"teal\">XYZ</span>( 10, 0, 0 );\n \n  <span class=\"teal\">Arc</span> geomArc = app.Create.NewArc(\n    end0, end1, pointOnCurve );\n \n  <span class=\"green\">// Create a geometry plane</span>\n  <span class=\"teal\">XYZ</span> origin = <span class=\"blue\">new</span> <span class=\"teal\">XYZ</span>( 0, 0, 0 );\n  <span class=\"teal\">XYZ</span> normal = <span class=\"blue\">new</span> <span class=\"teal\">XYZ</span>( 1, 1, 0 );\n \n  <span class=\"teal\">Plane</span> geomPlane = app.Create.NewPlane(\n    normal, origin );\n \n  <span class=\"green\">// Create a sketch plane in current document</span>\n  <span class=\"teal\">SketchPlane</span> sketch = doc.Create.NewSketchPlane(\n    geomPlane );\n \n  <span class=\"green\">// Create a DetailLine element using the </span>\n  <span class=\"green\">// created geometry line and sketch plane</span>\n  <span class=\"teal\">DetailLine</span> line = doc.Create.NewDetailCurve(\n    view, geomLine ) <span class=\"blue\">as</span> <span class=\"teal\">DetailLine</span>;\n \n  <span class=\"green\">// Create a DetailArc element using the </span>\n  <span class=\"green\">// created geometry arc and sketch plane</span>\n  <span class=\"teal\">DetailArc</span> arc = doc.Create.NewDetailCurve(\n    view, geomArc ) <span class=\"blue\">as</span> <span class=\"teal\">DetailArc</span>;\n \n  <span class=\"blue\">return</span> <span class=\"teal\">CmdResult</span>.Succeeded;\n</pre>\n<p>As you see, the curve parameter above can be any geometric curve entity like Line, Arc, Ellipse or NurbSpline. \nAll of these types are derived from the Curve class and can be used as parameters to create a detail curve.\n\n<p>Here are the resulting detail curves after running this command in a new project document:\n\n<center>\n<img alt=\"Detail curves\" src=\"img/detail_curves.png\"/>\n</center>\n<p>Here is\n\n<a href=\"zip/bc11046.zip\">\nversion 1.1.0.46</a>\n\nof the complete Building Coder sample source code and Visual Studio solution including the new command.</p>\n<p>Thank you Saikat for this helpful explanation!\n\n<p><strong>Addendum:</strong> Please make sure you do not overlook the \n\n<a href=\"http://thebuildingcoder.typepad.com/blog/2010/05/detail-curve-must-indeed-lie-in-plane.html\">\nupdate to this post</a>.\n</p></p></p></p></p></p></p></p></p>"
  }
]