[
  {
    "original_filename": "1605_param_regen_cloud_model",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<!--\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- need for regen: set parameter to regen model\n  [New Sloped roof not visible](https://forums.autodesk.com/t5/revit-api-forum/new-sloped-roof-not-visible/m-p/7574411)\n\nSetting a parameter to regenerate the BIM via #RevitAPI @AutodeskRevit #bim #dynamobim @AutodeskForge #ForgeDevCon http://bit.ly/cloudmodelregen\nChecking BIM for C4R versus local file in #RevitAPI @AutodeskRevit #bim #dynamobim @AutodeskForge #ForgeDevCon http://bit.ly/cloudmodelregen\n\nThe Revit API discussion forum continues to reach ever new levels of depth and coverage.\nHere are a couple of recent topics\n&ndash; Welcome to the top solution authors, Jim!\n&ndash; Setting a parameter to regenerate the model\n&ndash; Checking model for C4R versus local file...\n\n--->"
  },
  {
    "original_filename": "1605_param_regen_cloud_model",
    "header_text": "Cloud Model Predicate, and Set Parameter Regenerates",
    "local_header_href": "#cloud-model-predicate-and-set-parameter-regenerates",
    "chunk_text": "### Cloud Model Predicate, and Set Parameter Regenerates\n\nThe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) continues \nto reach ever new levels of depth and coverage.\n\nHere are a couple of recent topics:\n\n- [Welcome to the top solution authors, Jim!](#2)\n- [Setting a parameter to regenerate the model](#3)\n- [Checking model for C4R versus local file](#4)\n\n\n####<a name=\"2\"></a>Welcome to the Top Solution Authors, Jim!\n\nThe breadth and depth\nof [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) solutions \ncan only be achieved thanks to a growing amount of input from real developers &ndash; unlike myself and my developer support colleagues &ndash; providing advanced answers to hitherto unsolved problems.\n\nThey are honoured in the list of top solution authors:\n\n<center>\n<img src=\"img/2017-11-28_top_solution_author.png\" alt=\"Top solution authors\" width=\"230\"/>\n</center>\n\nVery many thanks as always to \nRudi [@Revitalizer](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/1103138) Honke,\nAlexander [@aignatovich](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/1257478) Ignatovich and\nFrank [@Fair59](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/2083518) Aarssen\nfor sharing their professional experience and ideas that most of us others would never be able to come up with.\n\nMy Chinese colleague Jim Jia has also been participating in the forum for quite a while. \n\nNow he made it into the list of top solution authors as well.\n\nCongratulations, Jim, and thank you very much for all your work!\n\n\n####<a name=\"3\"></a>Setting a Parameter to Regenerate the Model\n\nWe have frequently discussed\nthe [need to regenerate](http://thebuildingcoder.typepad.com/blog/about-the-author.html#5.33) the\nmodel or individual elements and various ways to achieve that efficiently.\n\nAnother aspect of this and a simple solution came up in the thread\non [new sloped roof not visible](https://forums.autodesk.com/t5/revit-api-forum/new-sloped-roof-not-visible/m-p/7574411):\n\n**Question:** I have a problem creating a new sloped roof using code.\n\nI use the basic sample shown in the developer guide and The Building Coder article\non [creating a roof](http://thebuildingcoder.typepad.com/blog/2015/09/revit-answer-day-and-creating-a-roof.html).\n\nI create a new `FootPrintRoof`, set `DefinesSlopes` to true for each model curve, and assign a `SlopeAngle`.\n\nMy macro doesn't have errors, but I can't see the new roof in any view.\n\nI can find it only in a roof schedule, but I cannot see the 3D element.\n\nI have tried to refresh the view in the code and I have noticed that the roof appears on the screen only for one second and then it disappears again.\n\nI have tried using Basic roof and Sloped glazing, but it still doesn't work.\n\nIf I don't set the sloping, I can create a planar roof without any issue\n\nWhat is the problem with the slope angle?\n\nHow can I solve that and make the sloped roof visible?\n\n**Answer:** I solved the problem.\n\nNow, I create my sloped glazing and then simply set one of its parameters using the API.\n\nI've tried many different parameters, using either parameters connected to the UI and descriptive parameters: all of them are ok to regenerate the correct visualization of the sloped glazing.\n \nThis is my trick, I hope it is useful!\n\nIf anyone has a better way, please let me know.\n\nMany thanks\nto [@newbieng](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/3379844) for\nraising the issue and sharing this simple and effective solution!\n\n\n \n####<a name=\"4\"></a>Checking Model for C4R versus Local File\n\nA new issue was raised and solved in the long discussion\non [browsing model files in the cloud](https://forums.autodesk.com/t5/revit-api-forum/browsing-model-files-in-the-cloud-a360-c4r/m-p/6537130):\n\n**Question:** Does anyone know how to check whether this file is C4R versus a local file?\n\nIs it simply file extension, or a document property?\n\n**Answer:** There's an internal property `IsModelInCloud` on the `Document` object in the Revit API that you can access using reflection:\n\n<pre class=\"code\">\n&nbsp;&nbsp;<span style=\"color:blue;\">public</span>&nbsp;<span style=\"color:blue;\">static</span>&nbsp;<span style=\"color:blue;\">bool</span>&nbsp;GetIsModelInCloud(\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#2b91af;\">Document</span>&nbsp;document&nbsp;)\n&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#2b91af;\">PropertyInfo</span>&nbsp;p&nbsp;=&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:#2b91af;\">Document</span>&nbsp;).GetProperty(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#a31515;\">&quot;IsModelInCloud&quot;</span>,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#2b91af;\">BindingFlags</span>.NonPublic&nbsp;|&nbsp;<span style=\"color:#2b91af;\">BindingFlags</span>.Instance&nbsp;);\n \n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">return</span>&nbsp;(<span style=\"color:blue;\">bool</span>)&nbsp;p.GetValue(&nbsp;document&nbsp;);\n&nbsp;&nbsp;}</pre>\n</pre>\n\nMany thanks to\nPaul [@pvella](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/561100) Vella\nfor sharing this neat little secret!"
  }
]