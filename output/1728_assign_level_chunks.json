[
  {
    "original_filename": "1728_assign_level",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- implemented level and area export, area in sqm with 2 decimal places, levels analysed and determined from Z\n  https://github.com/jeremytammik/IfcSpaceZoneBoundaries/releases/tag/2019.0.1.1\n  practical use of the method to Retrieve Levels Sorted by Elevation:\n  https://thebuildingcoder.typepad.com/blog/2014/11/webgl-goes-mobile-and-sorted-level-retrieval.html#3\n\n- https://youtu.be/GW9cbFYnKAc\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/GW9cbFYnKAc\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\nTITAN VS ROBO-CAR - The Multi-Billion Dollar Company Youâ€™ve Never Heard Of\nTitan travels to Zoox to meet with Chairman Carl Bass and discuss their incredible self-driving car. Not only do they have the artificial intelligence (AI) to autonomously drive the car through the streets of San Francisco, they are manufacturing their own vehicle to compete with the biggest names in ride-sharing. CNC machining, Advanced 3D printing, and 7-Axis robots to name a few of their production capabilities. Check out how their technology works, and why it is the future of driving. \n\n- https://youtu.be/EH-z9gE2uGY\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/EH-z9gE2uGY\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\nThe Mystery at the Bottom of Physics\nActually gets deep enough into physics to wax philosophical on gratitude for life and the reason to be grateful and happy for every moment of my own personal existence.\n\ntwitter:\n\nAssigning a Level to an element missing it in the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon http://bit.ly/determinelevel\n\nI recently implemented the IfcSpaceZoneBoundaries add-in to link in and analyse IFC file zones and spaces, then prepared it for use in Forge Design Automation. Now I want to add level information to the CSV export. However, the <code>DirectShape</code> elements created to represent the rooms and zones have no valid level assigned, so their <code>Level</code> property is invalid.\nHappily, we can easily analyse the BIM and generate the equivalent information ourselves\n&ndash; Retrieve levels sorted by elevation\n&ndash; Determine level from element elevation\n&ndash; Carl Bass and Zoox autonomous vehicles\n&ndash; Physical reasons to be happy to be alive...\n\nlinkedin:\n\nAssigning a Level to an element missing it in the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon http://bit.ly/determinelevel\n\nI recently implemented the IfcSpaceZoneBoundaries add-in to link in and analyse IFC file zones and spaces, then prepared it for use in Forge Design Automation. Now I want to add level information to the CSV export. However, the <code>DirectShape</code> elements created to represent the rooms and zones have no valid level assigned, so their Level property is invalid.\n\nHappily, we can easily analyse the BIM and generate the equivalent information ourselves\n\n- Retrieve levels sorted by elevation\n- Determine level from element elevation\n- Carl Bass and Zoox autonomous vehicles\n- Physical reasons to be happy to be alive...\n\nof [The Building Coder samples](https://github.com/jeremytammik/the_building_coder_samples/releases/tag/2019.0.145.4).\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) recently\n\n-->"
  },
  {
    "original_filename": "1728_assign_level",
    "header_text": "Assigning a Level to an Element Missing It",
    "local_header_href": "#assigning-a-level-to-an-element-missing-it",
    "chunk_text": "### Assigning a Level to an Element Missing It\n\nI recently implemented \nthe [IfcSpaceZoneBoundaries add-in](https://github.com/jeremytammik/IfcSpaceZoneBoundaries)\nto [link in and analyse IFC file zones and spaces](https://thebuildingcoder.typepad.com/blog/2019/02/link-in-and-analyse-ifc-file-zones-and-spaces.html),\nthen [prepared it for use in Forge Design Automation](https://thebuildingcoder.typepad.com/blog/2019/02/preparing-a-revit-add-in-for-design-automation.html).\n\nThe app bundle implementing the Design Automation for Revit or DA4R workitem functionality reads the `.ifc.RVT` file generated by the IFC linking command and exports its room and zone information to CSV.\n\nMy colleague Petr Broz worked on the DA4R side of things and requested the addition of level information and areas in square metres.\n\nAt first glance, this seems completely trivial.\n\nHowever, the `DirectShape` elements created to represent the rooms and zones have no valid level assigned, so their `Level` property is invalid.\n\nHappily, we can easily analyse the BIM and generate the equivalent information ourselves;\nafterwards, I'll quickly mention two technology and science related videos I happened across:\n\n- [Retrieve levels sorted by elevation](#2) \n- [Determine level from element elevation](#3) \n- [Carl Bass and Zoox autonomous vehicles](#4) \n- [Physical reasons to be happy to be alive](#5) \n\n<center>\n<img src=\"img/ifc_sample_levels.png\" alt=\"IFC sample levels\" width=\"500\"> <!-- 771 -->\n</center>"
  },
  {
    "original_filename": "1728_assign_level",
    "header_text": "<a name=\"2\"></a> Retrieve Levels Sorted by Elevation",
    "local_header_href": "#a-name2a-retrieve-levels-sorted-by-elevation",
    "chunk_text": "#### <a name=\"2\"></a> Retrieve Levels Sorted by Elevation\n\nThis provides a nice opportunity for a live demonstration of using the algorithm we already implemented \nto [retrieve levels sorted by elevation](https://thebuildingcoder.typepad.com/blog/2014/11/webgl-goes-mobile-and-sorted-level-retrieval.html#3).\n\nIt simply calls a filtered element collector to retrieve all levels and applies `OrderBy` to their elevations:\n\n<pre class=\"code\">\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;</span><span style=\"color:gray;\">&lt;</span><span style=\"color:gray;\">summary</span><span style=\"color:gray;\">&gt;</span>\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;Retrieve&nbsp;all&nbsp;levels&nbsp;sorted&nbsp;by&nbsp;elevation</span>\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;</span><span style=\"color:gray;\">&lt;/</span><span style=\"color:gray;\">summary</span><span style=\"color:gray;\">&gt;</span>\n<span style=\"color:blue;\">public</span>&nbsp;<span style=\"color:blue;\">static</span>&nbsp;<span style=\"color:#2b91af;\">IOrderedEnumerable</span>&lt;<span style=\"color:#2b91af;\">Level</span>&gt;&nbsp;GetSortedLevels(&nbsp;\n&nbsp;&nbsp;<span style=\"color:#2b91af;\">Document</span>&nbsp;doc&nbsp;)\n{\n&nbsp;&nbsp;<span style=\"color:blue;\">return</span>&nbsp;<span style=\"color:blue;\">new</span>&nbsp;<span style=\"color:#2b91af;\">FilteredElementCollector</span>(&nbsp;doc&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;.OfClass(&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:#2b91af;\">Level</span>&nbsp;)&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;.Cast&lt;<span style=\"color:#2b91af;\">Level</span>&gt;()\n&nbsp;&nbsp;&nbsp;&nbsp;.OrderBy(&nbsp;lev&nbsp;=&gt;&nbsp;lev.Elevation&nbsp;);\n}\n</pre>"
  },
  {
    "original_filename": "1728_assign_level",
    "header_text": "<a name=\"3\"></a> Determine Level from Element Elevation",
    "local_header_href": "#a-name3a-determine-level-from-element-elevation",
    "chunk_text": "#### <a name=\"3\"></a> Determine Level from Element Elevation\n\nThe resulting levels are stored and passed into the method used to determine each element's level name as follows:\n\nInitially, we check the element's `LevelId` property.\n\nIf it returns a valid element id, we can retrieve the level name from that.\n\nOtherwise, we make use of the element's `Z` elevation and the sorted list of all levels.\n\nSince the levels are already sorted by elevation, can can simply loop through them from the bottom up and break as soon as the target `Z` elevation is reached.\n\n<pre class=\"code\">\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;</span><span style=\"color:gray;\">&lt;</span><span style=\"color:gray;\">summary</span><span style=\"color:gray;\">&gt;</span>\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;Return&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;level&nbsp;of&nbsp;the&nbsp;given&nbsp;element.</span>\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;</span><span style=\"color:gray;\">&lt;/</span><span style=\"color:gray;\">summary</span><span style=\"color:gray;\">&gt;</span>\n<span style=\"color:blue;\">public</span>&nbsp;<span style=\"color:blue;\">static</span>&nbsp;<span style=\"color:blue;\">string</span>&nbsp;GetLevelName(\n&nbsp;&nbsp;<span style=\"color:#2b91af;\">Element</span>&nbsp;e,\n&nbsp;&nbsp;<span style=\"color:blue;\">double</span>&nbsp;z,\n&nbsp;&nbsp;<span style=\"color:#2b91af;\">IOrderedEnumerable</span>&lt;<span style=\"color:#2b91af;\">Level</span>&gt;&nbsp;levels&nbsp;)\n{\n&nbsp;&nbsp;<span style=\"color:#2b91af;\">Level</span>&nbsp;level&nbsp;=&nbsp;<span style=\"color:blue;\">null</span>;\n \n&nbsp;&nbsp;<span style=\"color:green;\">//&nbsp;Retrieve&nbsp;the&nbsp;element&#39;s&nbsp;Level&nbsp;property:</span>\n \n&nbsp;&nbsp;<span style=\"color:#2b91af;\">ElementId</span>&nbsp;lid&nbsp;=&nbsp;e.LevelId;\n \n&nbsp;&nbsp;<span style=\"color:blue;\">if</span>(&nbsp;<span style=\"color:blue;\">null</span>&nbsp;==&nbsp;lid\n&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;<span style=\"color:#2b91af;\">ElementId</span>.InvalidElementId&nbsp;==&nbsp;lid&nbsp;)\n&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:green;\">//&nbsp;If&nbsp;no&nbsp;level&nbsp;is&nbsp;defined,&nbsp;grab&nbsp;the&nbsp;first</span>\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:green;\">//&nbsp;one&nbsp;from&nbsp;the&nbsp;list&nbsp;sorted&nbsp;by&nbsp;elevation:</span>\n \n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">foreach</span>(&nbsp;<span style=\"color:#2b91af;\">Level</span>&nbsp;l&nbsp;<span style=\"color:blue;\">in</span>&nbsp;levels&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">double</span>&nbsp;elev&nbsp;=&nbsp;l.Elevation;\n \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">if</span>(&nbsp;<span style=\"color:#2b91af;\">Util</span>.IsEqual(&nbsp;z,&nbsp;elev&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;z&nbsp;&lt;=&nbsp;l.Elevation&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level&nbsp;=&nbsp;l;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:blue;\">break</span>;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;}\n&nbsp;&nbsp;<span style=\"color:blue;\">else</span>\n&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:#2b91af;\">Document</span>&nbsp;doc&nbsp;=&nbsp;e.Document;\n&nbsp;&nbsp;&nbsp;&nbsp;level&nbsp;=&nbsp;doc.GetElement(&nbsp;lid&nbsp;)&nbsp;<span style=\"color:blue;\">as</span>&nbsp;<span style=\"color:#2b91af;\">Level</span>;\n&nbsp;&nbsp;}\n&nbsp;&nbsp;<span style=\"color:blue;\">return</span>&nbsp;level.Name;\n}\n</pre>"
  },
  {
    "original_filename": "1728_assign_level",
    "header_text": "<a name=\"4\"></a> Carl Bass and Zoox Autonomous Vehicles",
    "local_header_href": "#a-name4a-carl-bass-and-zoox-autonomous-vehicles",
    "chunk_text": "#### <a name=\"4\"></a> Carl Bass and Zoox Autonomous Vehicles\n\nMoving away from the Revit API to Autodesk, and from Autodesk to technological trends and possibilities:\n\nHave you ever wondered what the ex-Autodesk-CEO Carl Bass is up to now?\n\nHe is involved in an exciting new project documented in the 12-minute documentary video\non [Titan vs Robo-car &ndash; The Multi-Billion Dollar Company Youâ€™ve Never Heard Of](https://youtu.be/GW9cbFYnKAc):\n\n> Titan travels to Zoox to meet with Chairman Carl Bass and discuss their incredible self-driving car.\n\n> Not only do they have the artificial intelligence (AI) to autonomously drive the car through the streets of San Francisco, they are manufacturing their own vehicle to compete with the biggest names in ride-sharing.\n\n> CNC machining, Advanced 3D printing, and 7-Axis robots to name a few of their production capabilities.\n\n> Check out how their technology works, and why it is the future of driving. \n\n<center>\n<iframe width=\"480\" height=\"270\" src=\"https://www.youtube.com/embed/GW9cbFYnKAc\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</center>"
  },
  {
    "original_filename": "1728_assign_level",
    "header_text": "<a name=\"5\"></a> Physical Reasons to be Happy to be Alive",
    "local_header_href": "#a-name5a-physical-reasons-to-be-happy-to-be-alive",
    "chunk_text": "#### <a name=\"5\"></a> Physical Reasons to be Happy to be Alive\n\nOne step further, from technology to physics and philosophy:\n\nThe 12-minute video\non [The Mystery at the Bottom of Physics](https://youtu.be/EH-z9gE2uGY) dives\ndeep enough into physics to wax philosophical on gratitude for life and the reason to be grateful and happy for every moment of my own personal existence:\n\n<center>\n<iframe width=\"480\" height=\"270\" src=\"https://www.youtube.com/embed/EH-z9gE2uGY\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n</center>"
  }
]