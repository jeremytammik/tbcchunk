[
  {
    "original_filename": "1953_rst_rex",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- REX -- https://autodesk.slack.com/archives/C0SR6NAP8/p1651840528454499\n\n- stefan dobre https://autodesk.slack.com/archives/C0SR6NAP8/p1651735070039959\n\ntwitter:\n\nWe ponder some structural rebar questions and the future of the REX structural Revit extensions included with the #RevitAPI SDK @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon https://autode.sk/rst_rex\n\nWe ponder some structural rebar questions and the future of the REX structural Revit extensions included with the Revit SDK\n&ndash; Future of REX\n&ndash; Rebar API questions\n&ndash; GetCustomDistributionPath\n&ndash; Number of segments\n&ndash; IsRebarInSection...\n\nlinkedin:\n\nWe ponder some structural rebar questions and the future of the REX structural Revit extensions included with the #RevitAPI SDK\n\nhttps://autode.sk/rst_rex\n\n- Future of REX\n- Rebar API questions\n- GetCustomDistributionPath\n- Number of segments\n- IsRebarInSection...\n\n#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk\n\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\n\n<center>\n<img src=\"img/\" alt=\"\" title=\"\" width=\"600\" height=\"\"/>\n<p style=\"font-size: 80%; font-style:italic\"></p>\n</center>\n\n-->"
  },
  {
    "original_filename": "1953_rst_rex",
    "header_text": "Structural Questions and the Future of REX",
    "local_header_href": "#structural-questions-and-the-future-of-rex",
    "chunk_text": "### Structural Questions and the Future of REX\n\nToday, we ponder some structural rebar questions and the future of the REX structural Revit extensions included with the Revit SDK:\n\n- [Future of REX](#2)\n- [Rebar API questions](#3)\n- [GetCustomDistributionPath](#4)\n- [Number of segments](#5)\n- [IsRebarInSection](#6)"
  },
  {
    "original_filename": "1953_rst_rex",
    "header_text": "Future of REX",
    "local_header_href": "#2",
    "chunk_text": "####<a name=\"2\"></a> Future of REX\n\nTomasz Wojdyla joined the Robot Structural Analysis team as senior product owner and is wondering about the future of the Revit Extension Framework, aka. REX.\n\nWe currently support it on a yearly basis even though (we believe) there is no internal use of this component anymore.\n\nExternal use is a question mark &ndash; it would be great if we could collect some data about its (external) users.\n\nCan you please let us know if you are interested in this framework?\nYou can simply provide your details in a comment below, or send\na [private message](https://thebuildingcoder.typepad.com/blog/about-the-author.html#1) if you prefer that.\n\nAll info and advice is greatly appreciated!\nThank you!"
  },
  {
    "original_filename": "1953_rst_rex",
    "header_text": "Rebar API Questions",
    "local_header_href": "#3",
    "chunk_text": "####<a name=\"3\"></a> Rebar API Questions\n\nMiguel [MiguelGT17](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/5130624) Gutierrez raised a number of rebar questions in\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) that were very kindly answered\nby Stefan Dobre, ‪senior principal engineer of the Revit Structural development team:\n\n<!--\n- [GetCustomDistributionPath from RebarFreeFormAccessor](https://forums.autodesk.com/t5/revit-api-forum/getcustomdistributionpath-from-rebarfreeformaccessor/td-p/11148790)\n- [Number of segments](https://forums.autodesk.com/t5/revit-api-forum/number-of-segments/td-p/11148840)\n- [IsRebarInSection()](https://forums.autodesk.com/t5/revit-api-forum/isrebarinsection/td-p/11148854)\n- [AreElementsValidForMultiReferenceAnnotation](https://forums.autodesk.com/t5/revit-api-forum/areelementsvalidformultireferenceannotation/td-p/11148745)\n-->\n\nHe responded: After a quick look on these questions, I don't see any problems.\nIt is just a misunderstanding of the API and how the rebar works.\nI answered in the forum and submitted a change request *REVIT-191469* to update the description and (maybe) the name of the `Rebar.IsRebarInSection` function.\n\nMany thanks to Stefan for the quick solutions!"
  },
  {
    "original_filename": "1953_rst_rex",
    "header_text": "GetCustomDistributionPath",
    "local_header_href": "#4",
    "chunk_text": "####<a name=\"4\"></a> GetCustomDistributionPath\n\nFirst, how to\ncall [GetCustomDistributionPath from RebarFreeFormAccessor](https://forums.autodesk.com/t5/revit-api-forum/getcustomdistributionpath-from-rebarfreeformaccessor/td-p/11148790)?\n\n**Question:** Is there a way to group up rebars without using the `RebarContainer` command and loading the distribution path data?\n\n<center>\n<img src=\"img/mg_distributionpath_1.png\" alt=\"Distribution path\" title=\"Distribution path\" width=\"600\"/> <!-- 1345 -->\n</center>\n\nFurthermore, there is something strange going on when creating a rebar container.\nIts distribution path is not correlated to the actual true distribution path:\n\n<center>\n<img src=\"img/mg_distributionpath_2.png\" alt=\"Distribution path\" title=\"Distribution path\" width=\"600\"/> <!-- 1816 -->\n</center>\n\n**Answer to Question 1:** There are two types of Free Form rebar:\n\nThe one created from curves, and which doesn’t have any constraints to the host.\nThe input curves for each bar in set can be in any position and it is not possible to set a distribution path for it.\nAn example of such rebar is the sketched free form.\nTo create such Rebar you should call\n\n<pre class=\"code\">\n  Rebar CreateFreeForm( Document doc,\n    RebarBarType barType, Element host,\n    IList&lt;CurveLoop&gt; curves,\n    out RebarFreeFormValidationResult error);\n</pre>\n\nThe one created through a server (callback), and which has constraints to the host.\nAny time when the constraints are modified, the server is called to recompute the Rebar curves.\nDuring this calculation, a distribution path can be set too.\nThis distribution path is a list of curves.\nAligned and Surface distributions are examples of such free form.\nTo create such Rebar, you should use\n\n<pre class=\"code\">\n  Rebar CreateFreeForm( Document doc,\n    Guid serverGUID, RebarBarType barType,\n    Element host);\n</pre>\n\nLook also at the documentation for `IRebarUpdateServer` class.\nThe Revit SDK includes a sample that demonstrates how such a free form rebar can be created.\n\n**Answer to Question 2:** `RebarContainerItem` is created from a Rebar element (which is a set).\n\nIt has its own number of bars and of course it will have its own distribution path which is the source rebar’s distribution path.\n\n`RebarContainer` is just storing a list of RebarContainerItems without maintaining any relations between them.\n\n**Response:** Appreciate those comments;\nindeed, they are very deep insights about question 1.\n\nConcerning question 2 reply, I'm worried about it.\nI'll find the best approach to reach my goal with the information you have provided so far.\nStay blessed."
  },
  {
    "original_filename": "1953_rst_rex",
    "header_text": "Number of Segments",
    "local_header_href": "#5",
    "chunk_text": "####<a name=\"5\"></a> Number of Segments\n\nNext, Miguel raises a question on \nthe [number of segments](https://forums.autodesk.com/t5/revit-api-forum/number-of-segments/td-p/11148840):\n\n**Question:** This set of rebars has been sketched as a free form.\n\n<center>\n<img src=\"img/mg_nr_segments_1.png\" alt=\"Number of segments\" title=\"Number of segments\" width=\"600\"/> <!-- 961 -->\n</center>\n\nRevitLookup shows a single segment for this bar:\n\n<center>\n<img src=\"img/mg_nr_segments_2.png\" alt=\"Number of segments\" title=\"Number of segments\" width=\"600\"/> <!-- 1720 -->\n</center>\n\nThis is not true:\n\n<center>\n<img src=\"img/mg_nr_segments_3.png\" alt=\"Number of segments\" title=\"Number of segments\" width=\"253\"/> <!-- 253 -->\n</center>\n\nMoreover, the `IsRebarInSection(view)` command always return false, regardless of the view.\nSo, I am not going to have the appropriate data when I sketch rebars as freeform?\n\n**Answer:** As I can see in your images, you have a free form rebar that has the Workshop Instructions parameter set to Keep Straight. This means that no matter what curves the free form has, it will always be matched with a straight shape (M_00).\n\nIf you want the bar to be matched with other shapes, you should set the workshop parameter to Bend. One you set this option, each bar in the set will be matched with the existing rebar shapes from the project. If it doesn't match with any existing shapes, it will try to create new Rebar Shapes. If it can’t create new Rebar Shapes and error message will be posted and will continue to consider the bar as a straight one.\n\nFor more details on how the shape matching is working  you can have a look on this: https://knowledge.autodesk.com/support/revit/learn-explore/caas/CloudHelp/cloudhelp/2019/ENU/Revit-M...\n\nRebar.IsRebarInSection(View view) returns true only if the view is a section or elevation and the view plane is cutting at least one of the rebar curves, false otherwise. This API function is the correspondent of this UI option:\n\n<center>\n<img src=\"img/mg_nr_segments_4.png\" alt=\"IsRebarInSection\" title=\"IsRebarInSection\" width=\"600\"/> <!-- 1915 -->\n</center>\n\n**Response:** Thanks for your prompt reply; my bad, I was not aware of those parameters.\nI will double check them and perform another test this weekend.\nCheers!"
  },
  {
    "original_filename": "1953_rst_rex",
    "header_text": "IsRebarInSection",
    "local_header_href": "#6",
    "chunk_text": "####<a name=\"6\"></a> IsRebarInSection\n\nFinally, on [`IsRebarInSection`](https://forums.autodesk.com/t5/revit-api-forum/isrebarinsection/td-p/11148854):\n\n**Question:** I have placed a set of rebars in a viewPlan that only has 1 segment:\n\n<center>\n<img src=\"img/mg_isrebarinsection.png\" alt=\"IsRebarInSection\" title=\"IsRebarInSection\" width=\"600\"/> <!-- 1109 -->\n</center>\n\nI was expecting the `IsRebarInSection` method to return a `true` Boolean, as the rebars are shown as a cross section.\nIf that is not the case, what does this method stand for, and which API method should I be looking up instead?\n\nTest code:\n\n<pre class=\"code\">\n  <span style=\"color:#8f08c4;\">foreach</span>&nbsp;(Element&nbsp;<span style=\"color:#1f377f;\">element</span>&nbsp;<span style=\"color:#8f08c4;\">in</span>&nbsp;rebars)\n  {\n    <span style=\"color:#8f08c4;\">if</span>&nbsp;(element&nbsp;<span style=\"color:blue;\">is</span>&nbsp;RebarContainer)\n    {\n   \n    }\n    <span style=\"color:#8f08c4;\">else</span>&nbsp;<span style=\"color:#8f08c4;\">if</span>&nbsp;(element&nbsp;<span style=\"color:blue;\">is</span>&nbsp;Rebar)\n    {\n      Rebar&nbsp;<span style=\"color:#1f377f;\">el</span>&nbsp;=&nbsp;element&nbsp;<span style=\"color:blue;\">as</span>&nbsp;Rebar;\n      <span style=\"color:#8f08c4;\">if</span>&nbsp;(el.IsRebarFreeForm()&nbsp;==&nbsp;<span style=\"color:blue;\">true</span>)\n      {\n   \n      }\n      <span style=\"color:#8f08c4;\">else</span>&nbsp;<span style=\"color:#8f08c4;\">if</span>&nbsp;(el.IsRebarShapeDriven()&nbsp;==&nbsp;<span style=\"color:blue;\">true</span>)\n      {\n        RebarShapeDrivenAccessor&nbsp;<span style=\"color:#1f377f;\">acc</span>&nbsp;=&nbsp;(element&nbsp;<span style=\"color:blue;\">as</span>&nbsp;Rebar).GetShapeDrivenAccessor();\n        XYZ&nbsp;<span style=\"color:#1f377f;\">dir</span>&nbsp;=&nbsp;acc.GetDistributionPath().Direction;\n   \n        <span style=\"color:blue;\">double</span>&nbsp;<span style=\"color:#1f377f;\">angle</span>&nbsp;=&nbsp;dir.AngleTo(view.ViewDirection);\n        angle&nbsp;=&nbsp;angle&nbsp;*&nbsp;(180&nbsp;/&nbsp;Math.PI);&nbsp;<span style=\"color:green;\">//90,0</span>\n        stb.AppendLine(angle.ToString());\n        stb.AppendLine(el.IsRebarInSection(view).ToString());\n      }\n    }\n    TaskDialog.Show(<span style=\"color:#a31515;\">&quot;dd&quot;</span>,&nbsp;stb.ToString());\n  }\n</pre>\n\n**Answer:** `IsRebarInSection` returns true only if the view is a section or elevation and the view plane is cutting at least one of the rebar curves, false otherwise.\n\nThis API function is the correspondent of this UI option:\n\n<center>\n<img src=\"img/mg_nr_segments_4.png\" alt=\"IsRebarInSection\" title=\"IsRebarInSection\" width=\"600\"/> <!-- 1915 -->\n</center>\n\nIn your case, to see that the straight bar is shown as a point you can verify this on your own.\nYou can get the centerline curves like this:\n\n<pre class=\"code\">\n  rebar.GetTransformedCenterlineCurves(\n    <span style=\"color:blue;\">false</span>,&nbsp;<span style=\"color:blue;\">true</span>,&nbsp;<span style=\"color:blue;\">true</span>,\n    MultiplanarOption.IncludeOnlyPlanarCurves,\n    0);\n</pre>\n\nYou will get only one line. If the line’s direction is parallel with view’s direction it means that the bar is shown as a cross section, false otherwise.\n\n<!--"
  },
  {
    "original_filename": "1953_rst_rex",
    "header_text": "AreElementsValidForMultiReferenceAnnotation",
    "local_header_href": "#7",
    "chunk_text": "####<a name=\"7\"></a> AreElementsValidForMultiReferenceAnnotation\n\n- [AreElementsValidForMultiReferenceAnnotation](https://forums.autodesk.com/t5/revit-api-forum/areelementsvalidformultireferenceannotation/td-p/11148745)\n\n-->"
  }
]