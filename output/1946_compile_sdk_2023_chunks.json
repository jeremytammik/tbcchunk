[
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n\ntwitter:\n\nCompile Revit 2023 SDK samples, set up RvtSamples and update the RevitSdkSamples repo for the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon https://autode.sk/rvt2023sdk\n\nI log my work compiling the new Revit 2023 SDK and setting up RvtSamples to load the external commands\n&ndash; Update the RevitSdkSamples repo\n&ndash; Set the Revit API references\n&ndash; Eliminate processor architecture mismatch warning\n&ndash; Set up RvtSamples\n&ndash; DatumsModification\n&ndash; ContextualAnalyticalModel\n&ndash; CivilAlignments...\n\nlinkedin:\n\nCompile Revit 2023 SDK samples, set up RvtSamples and update the RevitSdkSamples repo for the #RevitAPI\n\nhttps://autode.sk/rvt2023sdk\n\nI log my work compiling the new Revit 2023 SDK and setting up RvtSamples to load the external commands:\n\n- Update the RevitSdkSamples repo\n- Set the Revit API references\n- Eliminate processor architecture mismatch warning\n- Set up RvtSamples\n- DatumsModification\n- ContextualAnalyticalModel\n- CivilAlignments...\n\n#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk\n\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\n\n<center>\n<img src=\"img/\" alt=\"\" title=\"\" width=\"600\"/>\n<p style=\"font-size: 80%; font-style:italic\"></p>\n</center>\n\n-->"
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Compiling the Revit 2023 SDK Samples",
    "local_header_href": "#compiling-the-revit-2023-sdk-samples",
    "chunk_text": "### Compiling the Revit 2023 SDK Samples\n\nThe first thing I do after installing the new release of Revit is compile the Revit SDK and set up RvtSamples to load the external commands.\nSo, here we go again:\n\n- [Update the RevitSdkSamples repo](#2)\n- [Set the Revit API references](#3)\n- [Eliminate processor architecture mismatch warning](#4)\n- [Missing XML comments](#5)\n- [Targets and rule sets](#6)\n- [Set up RvtSamples](#7)\n    - [DatumsModification commands](#7.2)\n    - [ContextualAnalyticalModel commands](#7.3)\n    - [CivilAlignments commands](#7.4)\n- [Conclusion](#8)"
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Update the RevitSdkSamples Repo",
    "local_header_href": "#2",
    "chunk_text": "####<a name=\"2\"></a> Update the RevitSdkSamples Repo\n\nI installed the new SDK and performed a pretty exhaustive comparison with the previous version to ensure that I do not overwrite anything important in\nthe [RevitSdkSamples repository](https://github.com/jeremytammik/RevitSdkSamples).\n\nThe advantage of maintaining a public repository for this is that changes can easily be tracked and I can share the steps that I take to compile the SDK samples and set up `RvtSamples` to load them.\n\nI enjoyed the support and conversation with [jmcouffin](https://github.com/jmcouffin) during this process, in\nhis [pull request #1 2023SDK samples](https://github.com/jeremytammik/RevitSdkSamples/pull/1).\nThat was the first time anyone offered to help with this repository, by the way, so thank you very much indeed for that!\n\nI compiled [diff_2022_2023.txt](zip/diff_2022_2023.txt) listing\nthe differences between the Revit 2023 SDK samples and previous versions, both in the directory structure and individual files.\n\nAfaict from that analysis, three new samples were added:\n\n- SheetToView3D\n- SelectionChanged\n- ContextualAnalyticalModel\n\nWe need to take a look at those asap.\nFirst things first, though: compile the SDK and set up `RvtSamples`."
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Set the Revit API References",
    "local_header_href": "#3",
    "chunk_text": "####<a name=\"3\"></a> Set the Revit API References\n\nThe first attempt at compiling `SDKSamples.sln` right out of the box produced 9544 error and 1168 warnings;\nthe namespace `Autodesk` could not be found.\n\nSDKSamples includes 199 solution projects, and I am not going to edit their references one by one, so I need to implement a batch update somehow.\n\nLuckily, there is no need to do so either; searching globally for `RevitAPI.dll`, I find only 8 occurrences, in the `targets` files in the `VSProps` folder and in the `ContextualAnalyticalModel.csproj`.\nApparently, the latter is an exception.\n\nI ended up fixing the Revit API references by replacing variable expressions by a constant *C:\\Program Files\\Autodesk\\Revit 2023* in the following files:\n\n- ContextualAnalyticalModel.csproj\n- SDKSamples.CivilAlignments.targets\n- SDKSamples.VB.targets\n- SDKSamples.targets\n- SDKSamples.Steel.targets\n\nWith those modifications, I was able to successfully compile all 199 projects with zero errors."
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Eliminate Processor Architecture Mismatch Warning",
    "local_header_href": "#4",
    "chunk_text": "####<a name=\"4\"></a> Eliminate Processor Architecture Mismatch Warning\n\n95 warnings remain. Most of those concern the everlasting processor architecture mismatch, e.g.:\n\n- Warning: There was a mismatch between the processor architecture of the project being built \"MSIL\" and the processor architecture of the reference \"RevitAPIUI\", \"AMD64\". This mismatch may cause runtime failures. Please consider changing the targeted processor architecture of your project through the Configuration Manager so as to align the processor architectures between your project and references, or take a dependency on references with a processor architecture that matches the targeted processor architecture of your project.\n\nI mentioned this warning when it appeared and have been fixing it in every release ever since:\n\n<ul>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/06/processor-architecture-mismatch-warning.html\">Processor Architecture Mismatch Warning and Key Hook</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2013/07/recursively-disable-architecture-mismatch-warning.html\">Recursively Disable Architecture Mismatch Warning</a></li>\n<li><a href=\"http://thebuildingcoder.typepad.com/blog/2014/09/architecture-mismatch-warning-disabler-update.html\">Architecture Mismatch Warning Disabler Update</a></li>\n</ul>\n\nI implemented the [DisableMismatchWarning](https://github.com/jeremytammik/DisableMismatchWarning) utility to help me do so, and make use of that now as well:\n\nAfter running that over all samples,\nonly [6 warnings](zip/revit_2023_sdk_samples_errors_warnings_1.txt) remain."
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Missing XML Comments",
    "local_header_href": "#5",
    "chunk_text": "####<a name=\"5\"></a> Missing XML Comments\n\nTwo of the remaining six warnings are easy to fix, so let's do so:\n\n- Warning CS1591: Missing XML comment for publicly visible type or member 'ExportPDFData.Combine' in ImportExport,\n  *...\\ImportExport\\CS\\Export\\ExportPDFData.cs* line 41\n- Warning CS1591: Missing XML comment for publicly visible type or member 'ExportPDFOptionsForm.ExportPDFOptionsForm(ExportPDFData)' in ImportExport,\n  *...\\ImportExport\\CS\\Export\\ExportPDFOptionsForm.cs*, line 45\n  \nI simply added placeholder XML documentation to both methods."
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Targets and Rule Sets",
    "local_header_href": "#6",
    "chunk_text": "####<a name=\"6\"></a> Targets and Rule Sets\n\nThe four remaining warnings seem unimportant and can be ignored:\n\n- *C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Enterprise\\MSBuild\\Current\\Bin\\Microsoft.Csharp.targets* cannot be imported again.\n  It was already imported at *Y:\\a\\src\\rvt\\RevitSdkSamples\\SDK\\Samples\\VSProps\\SDKSamples.targets (29,3)*.\n  This is most likely a build authoring error.\n  This subsequent import will be ignored.\n  SampleCommandsSteelElements   \n- Warning  Could not find rule set file \"Migrated rules for FrameBuilder.ruleset\". FrameBuilder   \n- Warning  Could not find rule set file \"GeometryCreation_BooleanOperation.ruleset\". GeometryCreation_BooleanOperation   \n- Warning  Could not find rule set file \"ProximityDetection_WallJoinControl.ruleset\". ProximityDetection_WallJoinControl"
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Set Up RvtSamples",
    "local_header_href": "#7",
    "chunk_text": "####<a name=\"7\"></a> Set Up RvtSamples\n\nI added my local system path *Y:/a/src/rvt/RevitSdkSamples/SDK/Samples/* in both `RvtSamples.addin` and `RvtSamples.txt`.\n\nSome add-in file paths are not found, so I set the debugging flag in `RvtSamples` `Application.cs`:\n\n<pre class=\"code\">\n  bool testClassName = true; // jeremy\n</pre>\n\nThe culprits are the usual suspects, all of them VB.NET samples, but strangely enough not all VB.NET samples,\ncf. [revit_2023_sdk_samples_errors_warnings_2.txt](zip/revit_2023_sdk_samples_errors_warnings_2.txt).\n\n####<a name=\"7.2\"></a> DatumsModification Commands\n\nRvtSamples.txt erroneously listed an external command named `Command` for the `DatumsModification` SDK sample.\nIn fact, it defines no such command; instead, it implements three others:\n\n- DatumAlignment\n- DatumPropagation\n- DatumStyleModification\n\nI updated RvtSamples.txt accordingly.\n\n####<a name=\"7.3\"></a> ContextualAnalyticalModel Commands\n\nContextualAnalyticalModel defines 15 external commands:\n\n- AddAssociation\n- AnalyticalNodeConnStatus\n- CreateAnalyticalPanel\n- CreateAnalyticalMember\n- FlipAnalyticalMember\n- MemberForcesAnalyticalMember\n- ModifyPanelContour\n- MoveAnalyticalMemberUsingElementTransformUtils\n- MoveAnalyticalMemberUsingSetCurve\n- MoveAnalyticalNodeUsingElementTransformUtils\n- MoveAnalyticalPanelUsingElementTransformUtils\n- MoveAnalyticalPanelUsingSketchEditScope\n- ReleaseConditionsAnalyticalMember\n- RemoveAssociation\n- SetOuterContourForPanels\n\nRvtSamples.txt erroneously lists three others: AddRelation, UpdateRelation and BreakRelation.\n\nI replaced them by AddAssociation and RemoveAssociation.\n\n####<a name=\"7.4\"></a> CivilAlignments Commands\n\nThe CivilAlignments sample defines two commands and tries to create menu entries named \"Infrastructure Alignments\" or both of them.\n\nThis causes Revit to throw an exception.\n\nI fixed that by naming them 'Infrastructure Alignments CreateAlignmentStationLabelsCmd' and 'Infrastructure Alignments ShowPropertiesCmd', respectively."
  },
  {
    "original_filename": "1946_compile_sdk_2023",
    "header_text": "Conclusion",
    "local_header_href": "#8",
    "chunk_text": "####<a name=\"8\"></a> Conclusion\n\nI finished off by resetting the `testClassName` debug switch and creating the final\n[RevitSdkSamples release 2023.0.0.3](https://github.com/jeremytammik/RevitSdkSamples/releases/tag/2023.0.0.3).\n\n<center>\n<img src=\"img/RvtSamples2023.png\" alt=\"RvtSamples 2023\" title=\"RvtSamples 2023\" width=\"800\"/> <!-- 2216 -->\n</center>"
  }
]