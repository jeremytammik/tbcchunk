[
  {
    "original_filename": "1929_formit_quaternion",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- FormIt and its JavaScript API\n  https://www.keanw.com/2021/11/autodesk-formit-and-its-javascript-api.html\n\n- Matterlab FormIt plugin provides geographical context in Revit\n  https://twitter.com/radugidei/status/1458370952652378113?s=20\n  Radu Gidei @radugidei\n  Replying to @keanw\n  Nice one and great intro to FormIt API! Look forward to the VASA integration, sounds very cool! \n  Btw, some of our team are working on some FormIt stuff as we speak, some cool things  coming for the community! (cough docs cough)\n  https://github.com/matterlab-co/FormIt-Context-Plugin\n\n- Get translation and rotation for a FamilyInstance (Export)\n  https://forums.autodesk.com/t5/revit-api-forum/get-translation-and-rotation-for-a-familyinstance-export/m-p/10758975\n\ntwitter:\n\nNotes on FormIt and its JavaScript API, the new automatically generated RevitLookup MSI installer asset, transformations and quaternions in the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon https://autode.sk/formitapi\n\nNotes on FormIt and its JavaScript API, the new automatically generated RevitLookup MSI installer asset, transformations and quaternions\n&ndash; FormIt API and geographical context\n&ndash; RevitLookup MSI installer asset\n&ndash; Transform and quaternions...\n\nlinkedin:\n\nNotes on FormIt and its JavaScript API, the new automatically generated RevitLookup MSI installer asset, transformations and quaternions in the #RevitAPI\n\nhttps://autode.sk/formitapi\n\n- FormIt API and geographical context\n- RevitLookup MSI installer asset\n- Transform and quaternions...\n\n#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk\n\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\n\n<center>\n<img src=\"img/\" alt=\"\" title=\"\" width=\"600\"/>\n<p style=\"font-size: 80%; font-style:italic\"></p>\n</center>\n\n-->"
  },
  {
    "original_filename": "1929_formit_quaternion",
    "header_text": "Installer Asset, FormIt and Quaternions",
    "local_header_href": "#installer-asset-formit-and-quaternions",
    "chunk_text": "### Installer Asset, FormIt and Quaternions\n\nNotes on FormIt and its API, the new automatically generated RevitLookup installer asset, transformations and quaternions:\n\n- [FormIt API and geographical context](#2)\n- [RevitLookup MSI installer asset](#3)\n- [Transform and quaternions](#4)"
  },
  {
    "original_filename": "1929_formit_quaternion",
    "header_text": "FormIt API and Geographical Context",
    "local_header_href": "#2",
    "chunk_text": "####<a name=\"2\"></a> FormIt API and Geographical Context\n\nGood things are happening\nwith [FormIt](https://formit.autodesk.com),\na multi-platform architectural modelling, conceptual design and analysis tool.\nWith FormIt, you can sketch, collaborate, analyse, and revise early-stage design concepts with BIM-based conceptual design.\n\nKean Walmsley took a closer look\nat [FormIt and its JavaScript API](https://www.keanw.com/2021/11/autodesk-formit-and-its-javascript-api.html) and\ndescribes in detail how to get started with FormIt plugins.\n\nThat prompted Radu [@radugidei](https://twitter.com/radugidei) Gidei\nto [mention](https://twitter.com/radugidei/status/1458370952652378113?s=20)\nthe Matterlab FormIt plugin making use of this to provide geographical context in Revit;\n\n> Nice one and great intro to FormIt API!\nLook forward to the VASA integration, sounds very cool! \nBtw, some of our team are working on some FormIt stuff as we speak, some cool things  coming for the community! (cough docs cough)\n\n- [Matterlab FormiIt 3D Context Creator](https://github.com/matterlab-co/FormIt-Context-Plugin)\n\n<center>\n<img src=\"img/formit_3d_context_creator.png\" alt=\"3D context creator\" title=\"3D context creator\" width=\"400\"/> <!-- 765 -->\n</center>\n\nThanks to Kean and Radu for sharing these!"
  },
  {
    "original_filename": "1929_formit_quaternion",
    "header_text": "RevitLookup MSI Installer Asset",
    "local_header_href": "#3",
    "chunk_text": "####<a name=\"3\"></a> RevitLookup MSI Installer Asset\n\nYet another update to RevitLookup brings us\nto [release 2022.0.2.5](https://github.com/jeremytammik/RevitLookup/releases/tag/2022.0.2.5),\nadding automatic generation of a release for the master branch and attaching the completed installer as an asset to the release:\n\n<center>\n<img src=\"img/revitlookup_2022_0_2_5.png\" alt=\"RevitLookup 2022.0.2.5\" title=\"RevitLookup 2022.0.2.5\" width=\"400\"/> <!-- 978 -->\n</center>\n\nThis is the result of [pull request #118 to release by GitAction](https://github.com/jeremytammik/RevitLookup/pull/118),\nincluding an intensive and very instructive conversation\nbetween [Roman @Nice3point](https://github.com/Nice3point)\nand Luiz Henrique [@ricaun](https://github.com/ricaun) Cassettari\non how to optimally set it up, and a renewed summary by Roman on how to handle future pull requests:\n\n> Once again, I will repeat the steps that you must take to publish:\n\n- Developers send PR to the `dev` branch.\n- We check, write a code review.\n- Accept PR.\n- Upgrade the build version in [`csproj` line 8](https://github.com/jeremytammik/RevitLookup/blob/dev/RevitLookup/RevitLookup.csproj#L8)\n- Log changes in the [changelog](https://github.com/jeremytammik/RevitLookup/blob/dev/Doc/Changelog.md);\n  multiple lines are supported;\n  the main thing is that a line does not start with a hyphen '-'; \n  that means the end of the description of the current release.\n- Merge the `dev` branch into `master`.\n- Release will be generated automatically.\n\nMany thanks to Luiz Henrique and Roman for their deep discussion, insight and implementation!"
  },
  {
    "original_filename": "1929_formit_quaternion",
    "header_text": "Transform and Quaternions",
    "local_header_href": "#4",
    "chunk_text": "####<a name=\"4\"></a> Transform and Quaternions\n\nIn\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\non [getting translation and rotation for a `FamilyInstance`](https://forums.autodesk.com/t5/revit-api-forum/get-translation-and-rotation-for-a-familyinstance-export/m-p/10758975),\nMatthew [mhannonQ65N2](https://forums.autodesk.com/t5/user/viewprofilepage/user-id/8377999) Hannon\nshares a very nice and succinct explanation of quaternions and how they relate to Revit transformations:\n\nFor rotations, what you are trying to do is transform between two different representations of the 3d rotation group (aka the Special Orthogonal group of dimension 3, SO(3)). Revit provides rotations in the form of a 3x3 matrix whose three columns are the BasisX, BasisY, and BasisZ properties of Transform. This rotates vectors by standard matrix multiplication.\n\nHowever, what you are using in SharpGLTF requires a quaternion. To be precise, it actually requires a unit quaternion, which is a quaternion of length 1. The equation for this is <i>x²+y²+z²+w²=1</i> (this is identical to the equation of the unit sphere in 4-dimensional space, known as the 3-sphere because its 'surface' is 3-dimensional). Furthermore, the product of two unit quaternions is also a unit quaternion. Unit quaternions rotate 3d vectors in a more mathematically complicated way that is actually faster to compute (I won't get into the details). A significant consequence of how unit quaternions are used to rotate vectors is that multiplying the unit quaternion by <i>-1</i> does not change how the vector is rotated. As such each 3d rotation can be represented by two different quaternions, <i>q</i>, and <i>-q</i>. As such, the group of unit quaternions is called a 'double cover' of SO(3).\n\nGiven an axis you wish to rotate about (as a unit vector, <b>v</b>) and the amount you wish to rotate, <b>θ</b>, (in radians), the process of constructing a unit quaternion for that rotation is straight forward. The x, y, and z components of the unit quaternion are the x, y, and z components of v, multiplied by sin(θ/2) and the fourth component is cos(θ/2).\n\nIf you don't know the axis and angle but only have the rotation matrix (i.e. a Revit Transform), there are algorithms for converting from a 3d rotation matrix to a quaternion, though I won't go into any here. Alternatively, it looks like in the latest version of SharpGLTF, AffineTransform has a constructor that takes a 4x4 matrix. To make such a matrix from a Revit Transform, the first 3 columns should be the BasisX, BasisY, and BasisZ of the Transform, with the fourth member of the column being zero, and the last column should be the Transform's origin, with the fourth member of the column being one.\n\nMany thanks to Matthew for this very nice overview!\n\nBarry @bnewcombe adds: ... Quarternion explanations always seem very confusing;\nthe best explanation (primer) video I found were\nthe [10 mins GameDev Quaternion tips](https://youtu.be/1yoFjjJRnLY).\nThank you, Barry!"
  }
]