[
  {
    "original_filename": "1655_revit_2019_sdk_apr",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<!--\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\nInstalling the Revit 2019 SDK April update in #RevitAPI @AutodeskRevit #bim #dynamobim @AutodeskForge #ForgeDevCon http://bit.ly/rvt2019sdkapril\n\nAfter the significant struggle I had to compile the initial release of the Revit 2019 SDK samples and set up RvtSamples 2019, I am happy to report that installing and compiling the Revit 2019 SDK April 27 update is a lot easier\n&ndash; Downloading the April 27 SDK update \n&ndash; Initial compilation &ndash; 41 warnings \n&ndash; Processor architecture mismatch suppressed &ndash; 5 warnings \n&ndash; Update reference to <code>RevitAPISteel.dll</code> &ndash; 3 warnings \n&ndash; Setting up <code>RvtSamples</code> \n&ndash; Updated <code>RvtSamples</code> download...\n\n--->"
  },
  {
    "original_filename": "1655_revit_2019_sdk_apr",
    "header_text": "Installing the Revit 2019 SDK April Update",
    "local_header_href": "#installing-the-revit-2019-sdk-april-update",
    "chunk_text": "### Installing the Revit 2019 SDK April Update\n\nAfter the significant struggle I had\nto [compile the initial release of the Revit 2019 SDK samples](http://thebuildingcoder.typepad.com/blog/2018/04/compiling-the-revit-2019-sdk-samples.html)\nand [set up RvtSamples 2019](http://thebuildingcoder.typepad.com/blog/2018/04/rvtsamples-2019.html),\nI am happy to report that installing and compiling the Revit 2019 SDK April 27 update is a lot easier:\n\n- [Downloading the April 27 SDK update](#2) \n- [Initial compilation &ndash; 41 warnings](#3) \n- [Processor architecture mismatch suppressed &ndash; 5 warnings](#4) \n- [Update reference to `RevitAPISteel.dll` &ndash; 3 warnings](#5) \n- [Setting up `RvtSamples`](#6) \n- [Updated `RvtSamples` download](#7) \n\n\n####<a name=\"2\"></a>Downloading the April 27 SDK Update\n\nWe are still waiting for the Revit 2019 SDK April 27 Update to appear in its proper location in\nthe [Revit Developer Centre](http://autodesk.com/developrevit)\nat [autodesk.com/developrevit](http://autodesk.com/developrevit),\nwhich nowadays points to a new location\nat [www.autodesk.com/developer-network/platform-technologies/revit](https://www.autodesk.com/developer-network/platform-technologies/revit).\n\nIf you are in a hurry, you can grab it right now from\nthe [direct `REVIT_2019_SDK.msi` download link](http://download.autodesk.com/us/revit-sdk/REVIT_2019_SDK.msi),\nwhich is [download.autodesk.com/us/revit-sdk/REVIT_2019_SDK.msi](http://download.autodesk.com/us/revit-sdk/REVIT_2019_SDK.msi).\n\nThe resulting Revit 2019 SDK update installer file dated April 27, 2018, is 375521280 bytes in size.\n\n\n####<a name=\"3\"></a>Initial compilation &ndash; 41 Warnings\n\nI ran the installer and loaded the SDK solution `SDKSamples` into Visual Studio.\n\nThe first compilation  worked pretty well right out of the box.\n\nIt reported [186 projects succeeded, 0 failed, 0 errors and 41 warnings](zip/revit_2019_sdk_samples_errors_warnings_9_1.txt).\n\nAlmost all the warnings are related to the processor architecture mismatch:\n\n- Warning: There was a mismatch between the processor architecture of the project being built \"MSIL\" and the processor architecture of the reference \"RevitAPI\", \"AMD64\". This mismatch may cause runtime failures. Please consider changing the targeted processor architecture of your project through the Configuration Manager so as to align the processor architectures between your project and references, or take a dependency on references with a processor architecture that matches the targeted processor architecture of your project.\tRebarFreeForm\t\t\t\n\nThese warnings can easily be suppressed using\nmy [`DisableMismatchWarning.exe` command line utility](https://github.com/jeremytammik/DisableMismatchWarning) \nto [recursively disable architecture mismatch warnings](http://thebuildingcoder.typepad.com/blog/2013/07/recursively-disable-architecture-mismatch-warning.html).\n\n####<a name=\"4\"></a>Eliminated Processor Architecture Mismatch Warnings &ndash; 5 Warnings\n\nAfter running the DisableMismatchWarning utility,\nthe [number of warnings is reduced from 41 to 5](zip/revit_2019_sdk_samples_errors_warnings_9_2.txt).\n\n- FrameBuilder: Could not find rule set file \"Migrated rules for FrameBuilder.ruleset\".\t\t\t\t\n- GeometryCreation_BooleanOperation: Could not find rule set file \"GeometryCreation_BooleanOperation.ruleset\".\t\t\t\t\n- ProximityDetection_WallJoinControl: Could not find rule set file \"ProximityDetection_WallJoinControl.ruleset\".\t\t\t\t\n- SampleCommandsSteelElements: The referenced component 'RevitAPISteel' could not be found.\t\t\t\t\n- SampleCommandsSteelElements: Could not resolve this reference. Could not locate the assembly \"RevitAPISteel\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\t\t\t\t\n\nI will ignore the first three for now.\n\nThe last two are more serious, of course.\n\n####<a name=\"5\"></a>Update Reference to RevitAPISteel.dll &ndash; 3 Warnings\n\nThe missing reference to the `RevitAPISteel.dll` .NET library assembly can be easily resolved by manually updating it to point to the existing DLL in the Revit executable folder:\n\n- C:\\Program Files\\Autodesk\\Revit 2019\\RevitAPISteel.dll\n\nThat reduced\nthe [number of warning messages from 5 to 3](zip/revit_2019_sdk_samples_errors_warnings_9_3.txt),\nwhich, as said, I will ignore:\n\n- FrameBuilder: Could not find rule set file \"Migrated rules for FrameBuilder.ruleset\".\t\t\t\t\n- GeometryCreation_BooleanOperation: Could not find rule set file \"GeometryCreation_BooleanOperation.ruleset\".\t\t\t\t\n- ProximityDetection_WallJoinControl: Could not find rule set file \"ProximityDetection_WallJoinControl.ruleset\".\t\t\t\t\n\n####<a name=\"6\"></a>Setting up RvtSamples\n\nWith the SDK samples compiling successfully, and the number of warnings reduced to a tolerable number, I next set up RvtSamples to load all the external commands.\n\nFirst of all, I added the add-in manifest and the RvtSamples input text file to the project for easier access and modification:\n\n<center>\n<img src=\"img/RvtSamples_project_files.png\" alt=\"RvtSamples project files\" width=\"269\"/>\n</center>\n\nNext, I updated the paths in both of them to point to my SDK samples folder.\n\nThe original input text file still refers to *C:/Revit Copernicus SDK/Samples/*.\n\nI replaced the backslashes to forward slashes for simpler regular expression editing and updated the paths to point to my installation in *C:/a/lib/revit/2019/SDK/Samples/*.\n\nTo test that all the external commands listed in the text file are found, I temporarily toggled the `testClassName` flag to true:\n\n<pre class=\"code\">\n  <span style=\"color:blue;\">bool</span>&nbsp;testClassName&nbsp;=&nbsp;<span style=\"color:blue;\">true</span>;&nbsp;<span style=\"color:green;\">//&nbsp;jeremy</span>\n</pre>\n\n<!----\n\nIt brings up the same old well-known indexing error that has remained unchanged for years:\n\n<center>\n<img src=\"img/RvtSamples_index_error.png\" alt=\"RvtSamples.txt index error\" width=\"372\"/>\n</center>\n\n<pre>\n  [Window Title]\n  RvtSamples External Application - RvtSamples\n  \n  [Main Instruction]\n  Index and count must refer to a location within the string.\n  Parameter name: count: n = 1364, k = 130, lines[k] = C:/a/lib/revit/2019/SDK_2_jeremy/Samples/PlacementOptions\\CS\\bin\\Debug\\PlacementOptions.dll\n  \n  [OK]\n</pre>\n\n---->\n\nWith that flag enabled, a number of warnings are issued:\n\n- VB not loaded DeleteObject 63\n- VB not loaded HelloRevit 84\n- Tooltip missing PlacementOptions 147 fixed\n- VB not loaded RotateFramingObjects 210\n- VB not loaded MaterialProperties 805\n- External command not found FabricationPartLayout 854\n- Assembly missing CreateShared 917 removed\n- Assembly missing CreateShared 924 removed\n- VB not loaded SlabProperties 1008\n- VB not loaded CreateBeamsColumnsBraces 1050\n- VB not loaded StructuralLayerFunction 1267\n- Assembly does not exist 1365\n\nAfter some more twiddling, just the seven or eight VB problems remain, and I am satisfied:\n\n<center>\n<img src=\"img/RvtSamples_2019_april_27_update.png\" alt=\"RvtSamples ribbon panel\" width=\"797\"/>\n</center>\n\nI mustn't forget to toggle off the debugging flag again...\n\n\n####<a name=\"7\"></a>Updated RvtSamples Download\n\nFor your convenience, here is my freshly\nbaked [RvtSamples_2019_april_update.zip archive file](/a/doc/revit/tbc/git/a/zip/RvtSamples_2019_april_update.zip)."
  }
]