[
  {
    "original_filename": "1643_revit_2019_sdk",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<!--\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\nCompiling the Revit 2019 SDK samples with NET Framework 4.7 #RevitAPI @AutodeskRevit #bim #dynamobim @AutodeskForge #ForgeDevCon http://bit.ly/rvt2019sdk\n\nI installed Revit 2019 and compiled the Revit 2019 SDK.\nThat was quite a struggle\n&ndash; Installing Revit 2019\n&ndash; Installing the Revit 2019 SDK\n&ndash; Installing the .NET Framework 4.7\n&ndash; Compiling the Revit 2019 SDK samples\n&ndash; Processor architecture mismatch warnings\n&ndash; DimensionLeaderEnd <code>OutputPath</code> missing\n&ndash; Numerous Revit API assembly reference conflicts\n&ndash; SampleCommandsSteelElements lacks components\n&ndash; AppearanceAssetEditing using deprecated API...\n\n--->"
  },
  {
    "original_filename": "1643_revit_2019_sdk",
    "header_text": "Compiling the Revit 2019 SDK Samples",
    "local_header_href": "#compiling-the-revit-2019-sdk-samples",
    "chunk_text": "### Compiling the Revit 2019 SDK Samples\n\nI installed Revit 2019 and compiled the Revit 2019 SDK.\n\nThat was quite a struggle:\n\n- [Installing Revit 2019](#2) \n- [Installing the Revit 2019 SDK](#3) \n- [Installing the .NET Framework 4.7](#4) \n- [Compiling the Revit 2019 SDK samples](#5) \n- [Processor architecture mismatch warnings](#6) \n- [DimensionLeaderEnd `OutputPath` missing](#7) \n- [Numerous Revit API assembly reference conflicts](#8) \n- [SampleCommandsSteelElements lacks components](#9) \n- [AppearanceAssetEditing using deprecated API](#10) \n\n\n####<a name=\"2\"></a>Installing Revit 2019\n\nThat was easy and unproblematic.\n\n####<a name=\"3\"></a>Installing the Revit 2019 SDK\n\nI searched the installation subfolders for `RevitSDK.exe` and found it here:\n\n- C:\\Autodesk\\Revit_2019_G1_Win_64bit_dlm\\Utilities\\SDK\\RevitSDK.exe\n\nThat was easy to install as well.\n\n####<a name=\"4\"></a>Installing the .NET Framework 4.7\n\nI set about compiling the SDK samples and discovered that this is not possible without first installing the .NET framework 4.7.\n\nI am still using Visual Studio 2015, by the way.\n\nFor that information, all further API details and system requirements, please refer to\nthe [Revit 2019 API Developers Guide](http://help.autodesk.com/view/RVT/2019/ENU/?guid=Revit_API_Revit_API_Developers_Guide_html).\n\nI searched for `install .net 4.7 framework` and was led\nto [download it from the Microsoft download centre](https://www.microsoft.com/en-us/download/confirmation.aspx?id=55167),\nproviding *NDP47-KB3186497-x86-x64-AllOS-ENU.exe*.\n\nThe .NET framework 4.7 was still not listed in the Visual Studio 2015 target framework options, though.\n\nHow to fix that is explained in the StackOverflow thread\non [using Visual Studio 2015 to target .NET framework 4.7](https://stackoverflow.com/questions/43420178/can-i-use-visual-studio-2015-to-target-net-framework-4-7):\n\n> Having the 4.7 runtime and having the \"4.7 Targeting pack\" to write code in 4.7 are two very different things.\n\n> The targeting packs are available from [microsoft.com/net/targeting]().\n\nAccordingly, I installed the 4.7 targeting pack *NDP47-DevPack-KB3186612-ENU.exe* (86492264 bytes).\n\nNow the .NET framework 4.7 is indeed listed in the VS target framework options, and I can load the SDK samples successfully with no warnings.\n\nUnfortunately, though, compiling them is quite another matter:\n\n\n####<a name=\"5\"></a>Compiling the Revit 2019 SDK Samples\n\nThe SDK samples solution now contains 186 projects.\n\nOn the first attempt, many of them compiled successfully.\n\nIn fact, there\nwere [182 projects succeeded and 4 failed with 2 errors and 70 warnings, cf. the error and warning list](zip/revit_2019_sdk_samples_errors_warnings_1.txt).\n\n<!---\nThe two errors concern DimensionLeaderEnd and ExtensibleStorageManager:\n\n- Error: The OutputPath property is not set for project 'DimensionLeaderEnd.csproj'.  Please check to make sure that you have specified a valid combination of Configuration and Platform for this project.  Configuration='Debug'  Platform='AnyCPU'.  This error may also appear if some other project is trying to follow a project-to-project reference to this project, this project has been unloaded or is not included in the solution, and the referencing project does not build using the same or an equivalent Configuration or Platform.\tDimensionLeaderEnd\t\t\t\n- Error: Metadata file 'C:\\a\\lib\\revit\\2019\\SDK\\Samples\\ExtensibleStorageManager\\SchemaWrapperTools\\CS\\bin\\Debug\\SchemaWrapperTools.dll' could not be found\tExtensibleStorageManager\tC:\\a\\lib\\revit\\2019\\SDK\\Samples\\ExtensibleStorageManager\\ExtensibleStorageManager\\CS\\CSC\t\t\n-->\n\n\n####<a name=\"6\"></a>Processor Architecture Mismatch Warnings\n\nMany of the warnings concern\nan [architecture mismatch warning](http://thebuildingcoder.typepad.com/blog/2013/06/processor-architecture-mismatch-warning.html):\n\n- Warning: There was a mismatch between the processor architecture of the project being built \"MSIL\" and the processor architecture of the reference \"RevitAPI\", \"AMD64\". This mismatch may cause runtime failures. Please consider changing the targeted processor architecture of your project through the Configuration Manager so as to align the processor architectures between your project and references, or take a dependency on references with a processor architecture that matches the targeted processor architecture of your project.\tRebarFreeForm\t\t\t\n\nThese warnings can be suppressed using\nmy [DisableMismatchWarning exe utility](https://github.com/jeremytammik/DisableMismatchWarning) \nto [recursively disable architecture mismatch warnings](http://thebuildingcoder.typepad.com/blog/2013/07/recursively-disable-architecture-mismatch-warning.html).\n\nAfter running that, the number of problems is reduced\nto [183 succeeded and 3 failed with 1 error and 40 warnings](zip/revit_2019_sdk_samples_errors_warnings_2.txt).\n\n\n####<a name=\"7\"></a>DimensionLeaderEnd OutputPath Missing\n\nNext, I addressed the first serious hurdle for successful compilation, which took me a while to figure out:\n\n- Error: The OutputPath property is not set for project 'DimensionLeaderEnd.csproj'.  Please check to make sure that you have specified a valid combination of Configuration and Platform for this project.  Configuration='Debug'  Platform='AnyCPU'.  This error may also appear if some other project is trying to follow a project-to-project reference to this project, this project has been unloaded or is not included in the solution, and the referencing project does not build using the same or an equivalent Configuration or Platform.\tDimensionLeaderEnd\t\t\t\n\nAfter some head scratching, I finally fixed it very easily, by manually adding an `OutputPath` tag to `Debug` `AnyCPU` `PropertyGroup` the project file:\n\n<pre class=\"code\">\n<span style=\"color:blue;\">&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">PropertyGroup</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">Configuration</span><span style=\"color:blue;\">&nbsp;</span><span style=\"color:red;\">Condition</span><span style=\"color:blue;\">=</span>&quot;<span style=\"color:blue;\">&nbsp;&#39;$(Configuration)&#39;&nbsp;==&nbsp;&#39;&#39;&nbsp;</span>&quot;<span style=\"color:blue;\">&gt;</span>Debug<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">Configuration</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">Platform</span><span style=\"color:blue;\">&nbsp;</span><span style=\"color:red;\">Condition</span><span style=\"color:blue;\">=</span>&quot;<span style=\"color:blue;\">&nbsp;&#39;$(Platform)&#39;&nbsp;==&nbsp;&#39;&#39;&nbsp;</span>&quot;<span style=\"color:blue;\">&gt;</span>AnyCPU<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">Platform</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">ProductVersion</span><span style=\"color:blue;\">&gt;</span>9.0.30729<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">ProductVersion</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">SchemaVersion</span><span style=\"color:blue;\">&gt;</span>2.0<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">SchemaVersion</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">ProjectGuid</span><span style=\"color:blue;\">&gt;</span>{4E3C160F-1FC8-4BD7-8E01-B62C58E79CD4}<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">ProjectGuid</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">OutputType</span><span style=\"color:blue;\">&gt;</span>Library<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">OutputType</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">AppDesignerFolder</span><span style=\"color:blue;\">&gt;</span>Properties<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">AppDesignerFolder</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">RootNamespace</span><span style=\"color:blue;\">&gt;</span>Revit.SDK.Samples.DimensionLeaderEnd.CS<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">RootNamespace</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">AssemblyName</span><span style=\"color:blue;\">&gt;</span>DimensionLeaderEnd<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">AssemblyName</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">StartupObject</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/</span><span style=\"color:#a31515;\">StartupObject</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">TargetFrameworkVersion</span><span style=\"color:blue;\">&gt;</span>v4.7<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">TargetFrameworkVersion</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">TargetFrameworkProfile</span><span style=\"color:blue;\">&nbsp;/&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style=\"color:#a31515;\">OutputPath</span><span style=\"color:blue;\">&gt;</span>bin\\x64\\Debug\\<span style=\"color:blue;\">&lt;/</span><span style=\"color:#a31515;\">OutputPath</span><span style=\"color:blue;\">&gt;</span>\n<span style=\"color:blue;\">&nbsp;&nbsp;&lt;/</span><span style=\"color:#a31515;\">PropertyGroup</span><span style=\"color:blue;\">&gt;</span>\n</pre>\n\nThis results in [0 errors, 29 warnings, 184 succeeded, 2 failed](zip/revit_2019_sdk_samples_errors_warnings_3.txt).\n\n####<a name=\"8\"></a>Numerous Revit API Assembly Reference Conflicts\n\nSome of the remaining warnings are caused by the AppearanceAssetEditing project and concern an assembly reference conflict:\n\n- Warning: Could not resolve this reference. Could not locate the assembly \"RevitAPIUI\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tAppearanceAssetEditing\t\t\t\n- Warning: No way to resolve conflict between \"RevitAPIUI, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" and \"RevitAPIUI\". Choosing \"RevitAPIUI, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" arbitrarily.\tAppearanceAssetEditing\t\t\t\n\nI deleted the existing references to RevitAPI.dll and RevitAPIUI.dll and added them again manually, pointing to the installed assemblies in the Revit.exe folder.\n\nThat reduced the number of warnings from 29 to 25, so we now have [0 errors, 25 warnings, 184 succeeded, 2 failed](zip/revit_2019_sdk_samples_errors_warnings_4.txt).\n\nI did the same for the RebarFreeForm project, resulting in 21 warnings, leaving [0 errors, 21 warnings, 184 succeeded, 2 failed](zip/revit_2019_sdk_samples_errors_warnings_5.txt).\n\nRebarFreeForm still has a problem with the RevitAddInUtility reference, though:\n\n- Warning: Could not resolve this reference. Could not locate the assembly \"RevitAddInUtility\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tRebarFreeForm\t\t\t\n- Warning: No way to resolve conflict between \"RevitAddInUtility, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" and \"RevitAddInUtility\". Choosing \"RevitAddInUtility, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" arbitrarily.\tRebarFreeForm\t\t\t\n\nThat one did not even need re-referencing; it is superfluous.\n\nI simply removed it entirely, resulting in 19 warnings, leaving [0 errors, 19 warnings, 184 succeeded, 2 failed](zip/revit_2019_sdk_samples_errors_warnings_6.txt).\n\n####<a name=\"9\"></a>SampleCommandsSteelElements Lacks Components\n\nThe SampleCommandsSteelElements cannot be compiled due to numerous unresolved references:\n\n- Warning: Could not resolve this reference. Could not locate the assembly \"RevitAddInUtility\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: Could not resolve this reference. Could not locate the assembly \"RvtDwgAddon\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: Could not resolve this reference. Could not locate the assembly \"ASObjectsMgd\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: Could not resolve this reference. Could not locate the assembly \"RevitAPI\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: No way to resolve conflict between \"RevitAddInUtility, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" and \"RevitAddInUtility\". Choosing \"RevitAddInUtility, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" arbitrarily.\tSampleCommandsSteelElements\t\t\t\n- Warning: The referenced component 'RevitAPISteel' could not be found.\tSampleCommandsSteelElements\t\t\t\n- Warning: Could not resolve this reference. Could not locate the assembly \"RevitAPISteel\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: The referenced component 'RvtDwgAddon' could not be found.\tSampleCommandsSteelElements\t\t\t\n- Warning: Could not resolve this reference. Could not locate the assembly \"ASCADLinkMgd\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: The referenced component 'ASCADLinkMgd' could not be found.\tSampleCommandsSteelElements\t\t\t\n- Warning: No way to resolve conflict between \"RevitAPIUI, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" and \"RevitAPIUI\". Choosing \"RevitAPIUI, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" arbitrarily.\tSampleCommandsSteelElements\t\t\t\n- Warning: Could not resolve this reference. Could not locate the assembly \"ASGeometryMgd\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: The referenced component 'ASGeometryMgd' could not be found.\tSampleCommandsSteelElements\t\t\t\n- Warning: Could not resolve this reference. Could not locate the assembly \"RevitAPIUI\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.\tSampleCommandsSteelElements\t\t\t\n- Warning: No way to resolve conflict between \"RevitAPI, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" and \"RevitAPI\". Choosing \"RevitAPI, Version=19.0.0.0, Culture=neutral, PublicKeyToken=null\" arbitrarily.\tSampleCommandsSteelElements\t\t\t\n- Warning: The referenced component 'ASObjectsMgd' could not be found.\tSampleCommandsSteelElements\t\t\t\n\nOne of these references refers to the module ASObjectsMgd.\n\nThis is in fact available in the add-ins packaged with Revit itself, in the subdirectory */AddIns/SteelConnections*:\n\n<pre>\n/v/C/Program Files/Autodesk/Revit 2019 $ find . | grep ASObjectsMgd\n./AddIns/SteelConnections/ASObjectsMgd.dll\n</pre>\n\nI found and re-referenced all the required references:\n\n<center>\n<img src=\"img/SampleCommandsSteelElements_references.png\" alt=\"SampleCommandsSteelElements references\" width=\"232\"/>\n</center>\n\nIt now compiles successfully, so we have just one failing project left.\n\nSampleCommandsSteelElements is now producing other warnings, though.\n\n\n####<a name=\"10\"></a>AppearanceAssetEditing Using Deprecated API\n\nThe remaining failing project is AppearanceAssetEditing.\n\nIt is producing new errors, so we now\nsee [185 succeeded, 1 failed, 7 errors, 9 warnings](zip/revit_2019_sdk_samples_errors_warnings_7.txt).\n\nThe seven errors in AppearanceAssetEditing are caused by deprecated API calls:\n\n- Error\tCS0618: 'AssetProperties.this[string]' is obsolete: ' This property is deprecated in Revit 2019 and will be removed in the next version of Revit. We suggest you use the 'FindByName(String)' or 'Get(int)' method instead.'\tAppearanceAssetEditing\tC:\\a\\lib\\revit\\2019\\SDK\\Samples\\AppearanceAssetEditing\\CS\\Application.cs\t208\tActive\n\nThese calls are classed as errors instead of warnings, causing the project compilation to fail, because this is explicitly requested in the project build properties &ndash; treat all warnings as errors:\n\n<center>\n<img src=\"img/AppearanceAssetEditing_build_properties.png\" alt=\"AppearanceAssetEditing build properties\" width=\"314\"/>\n</center>\n\nI changed the setting from 'All' to 'None'.\n\nNow I can build that project as well, and finally the Revit 2019 SDK compilation is complete.\n\n186 projects succeeded, 0 failed and 0 were skipped.\n\nZero errors now, but [16 warnings still remain](revit_2019_sdk_samples_errors_warnings_8.txt).\n\nI will ask the development team to clean this up asap to avoid forcing other Revit add-in developers to repeat these utterly unneccessary and frustrating steps."
  }
]