[
  {
    "original_filename": "1766_khl_snoop",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js\" type=\"text/javascript\"></script>\n</head>\n\n<!---\n\n- KHL Snoop\nJohn D'Alessandro, Software Engineer at [KLH Engineers, PSC](http://www.klhengrs.com)\nWe at KLH Engineers decided to roll our own Revit Snoop tool a while ago and we thought we’d show it to you so you can check it out.\nWe released it as a class library on our GitHub so that others can use it in their own tools and solutions.\nWe’re also accepting issues and PRs, so the more people use the tool the better it’ll get. Let me know if you have any feedback on it or questions.\nThe repo is at [KLH Engineers RevitDeveloperTools](https://github.com/klhengineers/RevitDeveloperTools).\nIt has some similarities and overlap with  [RevitLookup](), and adds a number of features not available there.\nThe README includes a feature list comparing the two snooping tools:\n\n- 15623936 [Revit API, pull text from annotation tags.]\n\n- vertex handling\n  [Q] When processing meshes or other collections of triangles, is there any way to know if one vertex is shared by multiple triangles?\n  Thus the final data does not have to contain duplicated vertices, and reuse the vertex index only, in order to save data size.\n  [A] I always use the following strategy when collecting mesh data:\n  Implement a comparison operator for the mesh vertices\n  Store all mesh vertices in their own dictionary, e.g., Dictionary<XYZ,int>. The int is just a dummy. I normally count the number of vertices received.\n  Each time I encounter a new mesh vertex, I check whether it is already listed in the dictionary. The comparison operator includes enough fuzz.\n  Look at GetCanonicVertices in\n  https://thebuildingcoder.typepad.com/blog/2016/01/tracking-element-modification.html\n  Here is another related post:\n  https://thebuildingcoder.typepad.com/blog/2017/08/birthday-post-on-the-xyz-class.html#3\n  In general, search The Building Coder for\n  XyzEqualityComparer\n  XyzComparable\n  XyzProximityComparer\n\n- img/pizza.jpg 720 px pi.z.z.a\n\ntwitter:\n\nNew PC, KLH database snooping tool, pulling annotation text and vertex handling in the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon http://bit.ly/klhsnoop\n\nI have been very busy and motivated indeed setting up a new computer this week.\nNonetheless, I was able to keep going full steam with Revit API related issues as well\n&ndash; Setting up a new MacBook\n&ndash; KLH Engineers RevitDeveloperTools snooping tool\n&ndash; Pulling text from annotation tags\n&ndash; Vertex handling\n&ndash; The true meaning of pizza...\n\nlinkedin:\n\nNew PC, KLH database snooping tool, pulling annotation text and vertex handling in the #RevitAPI\n\nhttp://bit.ly/klhsnoop\n\nI have been very busy and motivated indeed setting up a new computer this week.\n\nNonetheless, I was able to keep going full steam with Revit API related issues as well:\n\n- Setting up a new MacBook\n- KLH Engineers RevitDeveloperTools snooping tool\n- Pulling text from annotation tags\n- Vertex handling\n- The true meaning of pizza...\n\n#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk\n\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread\n\n-->"
  },
  {
    "original_filename": "1766_khl_snoop",
    "header_text": "New PC, KLH Snoop, Annotations and Vertex Handling",
    "local_header_href": "#new-pc-klh-snoop-annotations-and-vertex-handling",
    "chunk_text": "### New PC, KLH Snoop, Annotations and Vertex Handling\n\nI have been very busy and motivated indeed setting up a new computer this week.\n\nNonetheless, I was able to keep going full steam with Revit API related issues as well:\n\n- [Setting up a new MacBook](#2)\n- [KLH Engineers RevitDeveloperTools snooping tool](#3)\n- [Pulling text from annotation tags](#4)\n- [Vertex handling](#5)\n- [The true meaning of pizza](#6)\n\n<center>\n<img src=\"img/baby_lizard_on_macbook_1008.jpg\" alt=\"Baby lizard on MacBook\" width=\"300\"> <!-- 1008 -->\n</center>"
  },
  {
    "original_filename": "1766_khl_snoop",
    "header_text": "Setting up a New MacBook",
    "local_header_href": "#2",
    "chunk_text": "####<a name=\"2\"></a> Setting up a New MacBook\n\nI picked up my new computer on Monday, a MacBook Pro.\n\nMigration worked very well so far, installation was easier than ever before, and I am already almost completely done moving over.\n\nThese components are now up and running:\n\n- Google Chrome\n- Pulse Secure\n- Microsoft Office\n- Outlook credentials\n- Komodo Edit\n- iterm2\n- Parallels\n- Windows 10\n- Visual Studio 2017\n- Revit 2020\n- VeraCrypt and osxfuse\n- Skype\n- VLC\n- Firefox and downloadhelper\n- git\n- Personal Komodo editor scripts\n- Created and set up new GitHub SSH key\n- Migrated personal disk data to new machine\n- Restored bash profile\n- Python 3.7.4 \n- [pip](https://pypi.org/project/pip) &ndash; `pip3 install --upgrade pip`\n- [Python markdown](https://pypi.python.org/pypi/Markdown): `pip3 install Markdown`\n- [git-lfs](https://git-lfs.github.com) &ndash; [installation](https://help.github.com/en/articles/installing-git-large-file-storage) \n- Internet browser bookmarks\n\nA few security related issues remain to do:\n\n- Desktop Duo for VPN access\n- Replacing\nmy [obsolete TrueCrypt encryption system](https://www.comparitech.com/blog/information-security/truecrypt-is-discoutinued-try-these-free-alternatives) \n\nI am writing this blog on the new system, with significant help and inspiration provided by my baby lizard friend presented in the image above.\n\nBy chance, now that I almost finished, I also just read this helpful article\non [how to set up your new MacBook for coding](https://www.freecodecamp.org/news/how-to-set-up-a-brand-new-macbook) by Amber Wilkie\non [freeCodeCamp.org](https://www.freecodecamp.org).\nI have already completed many of the steps she suggests; still, a few are new and useful for me as well."
  },
  {
    "original_filename": "1766_khl_snoop",
    "header_text": "KLH Engineers RevitDeveloperTools Snooping Tool",
    "local_header_href": "#3",
    "chunk_text": "####<a name=\"3\"></a> KLH Engineers RevitDeveloperTools Snooping Tool\n\nMore Revit API related, John D'Alessandro, Software Engineer at [KLH Engineers, PSC](http://www.klhengrs.com) shared a powerful new Revit database snooping utility, explaining:\n\n> We at KLH Engineers decided to roll our own Revit Snoop tool a while ago and we thought we’d show it to you so you can check it out.\n\n<center>\n<img src=\"img/klh_snoop_screenshot.png\" alt=\"KLH Snoop\" width=\"886\">\n</center>\n\n> We released it as a class library on our GitHub so that others can use it in their own tools and solutions.\n\n> We’re also accepting issues and PRs, so the more people use the tool the better it’ll get. Let me know if you have any feedback on it or questions.\n\n> The repo is at [KLH Engineers RevitDeveloperTools](https://github.com/klhengineers/RevitDeveloperTools).\n\n> It has some similarities and overlap with  [RevitLookup](https://github.com/jeremytammik/RevitLookup), and adds a number of features not available there.\n\n> The README includes a feature list comparing the two snooping tools:\n\n<center>\n<img src=\"img/klh_snoop_feature_list.png\" alt=\"KLH Snoop feature list\" width=\"353\"> <!-- 1060 -->\n</center>\n\nMany thanks to John and KLH for implementing and generously sharing this powerful new snooping tool!"
  },
  {
    "original_filename": "1766_khl_snoop",
    "header_text": "Pulling Text from Annotation Tags",
    "local_header_href": "#4",
    "chunk_text": "####<a name=\"4\"></a> Pulling Text from Annotation Tags\n\nOne quick note on a small issue that was not discussed in\nthe public [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) seems\nworthwhile sharing here:\n\n**Question:** I'm trying to pull the text from the annotation tags on a drawing using the Revit API.\nIs that possible?\nHow? \n\n**Answer:** Yes, this is definitely possible.\n\nYou can use a filtered element collector to collect all the annotation tags, and then access their text via their properties.\n\nTo retrieve the tags, you need to determine what class they have. I assume they\nare [IndependentTag class instances](https://www.revitapidocs.com/2020/e52073e2-9d98-6fb5-eb43-288cf9ed2e28.htm).\n\nThe property to access their text is presumably\nthe [TagText property](https://www.revitapidocs.com/2020/8e297dee-920d-f620-6198-0bed494e3f04.htm).\n\nYou can install and use [RevitLookup](https://github.com/jeremytammik/RevitLookup) yourself\nto validate these assumptions of mine in your own specific model.\n\nIf these assumptions are correct, the final solution might look something like this in  C#:\n\n<pre class=\"code\">\n<span style=\"color:blue;\">#region</span>&nbsp;Pull&nbsp;Text&nbsp;from&nbsp;Annotation&nbsp;Tags\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;</span><span style=\"color:gray;\">&lt;</span><span style=\"color:gray;\">summary</span><span style=\"color:gray;\">&gt;</span>\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;Return&nbsp;the&nbsp;text&nbsp;from&nbsp;all&nbsp;annotation&nbsp;tags&nbsp;</span>\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;in&nbsp;a&nbsp;list&nbsp;of&nbsp;strings</span>\n<span style=\"color:gray;\">///</span><span style=\"color:green;\">&nbsp;</span><span style=\"color:gray;\">&lt;/</span><span style=\"color:gray;\">summary</span><span style=\"color:gray;\">&gt;</span>\n<span style=\"color:#2b91af;\">List</span>&lt;<span style=\"color:blue;\">string</span>&gt;&nbsp;PullTextFromAnnotationTags(\n&nbsp;&nbsp;<span style=\"color:#2b91af;\">Document</span>&nbsp;doc&nbsp;)\n{\n&nbsp;&nbsp;<span style=\"color:#2b91af;\">FilteredElementCollector</span>&nbsp;tags\n&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;<span style=\"color:blue;\">new</span>&nbsp;<span style=\"color:#2b91af;\">FilteredElementCollector</span>(&nbsp;doc&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.OfClass(&nbsp;<span style=\"color:blue;\">typeof</span>(&nbsp;<span style=\"color:#2b91af;\">IndependentTag</span>&nbsp;)&nbsp;);\n\n&nbsp;&nbsp;<span style=\"color:blue;\">return</span>&nbsp;<span style=\"color:blue;\">new</span>&nbsp;<span style=\"color:#2b91af;\">List</span>&lt;<span style=\"color:blue;\">string</span>&gt;(&nbsp;tags\n&nbsp;&nbsp;&nbsp;&nbsp;.Cast&lt;<span style=\"color:#2b91af;\">IndependentTag</span>&gt;()\n&nbsp;&nbsp;&nbsp;&nbsp;.Select&lt;<span style=\"color:#2b91af;\">IndependentTag</span>,&nbsp;<span style=\"color:blue;\">string</span>&gt;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;=&gt;&nbsp;t.TagText&nbsp;)&nbsp;);\n}\n<span style=\"color:blue;\">#endregion</span>&nbsp;<span style=\"color:green;\">// Pull&nbsp;Text&nbsp;from&nbsp;Annotation&nbsp;Tags</span>\n</pre>\n\nFor future reference, I also added this code to [The Building Coder samples](https://github.com/jeremytammik/the_building_coder_samples) in\nthe [CmdCollectorPerformance.cs module](https://github.com/jeremytammik/the_building_coder_samples/blob/master/BuildingCoder/BuildingCoder/CmdCollectorPerformance.cs#L1223-L1240)\n\nFinally, you can use the built-in Revit macro IDE (integrated development environment) to convert this code from C# to Python, if you like."
  },
  {
    "original_filename": "1766_khl_snoop",
    "header_text": "Vertex Handling",
    "local_header_href": "#5",
    "chunk_text": "####<a name=\"5\"></a> Vertex Handling\n\nAnother recent recurring question on vertex handling may also be of general interest:\n\n**Question:** When processing meshes or other collections of triangles, is there any way to know if one vertex is shared by multiple triangles?\n\nThus, the final data does not have to contain duplicate vertices and can reuse the existing vertex indices in order to save data size.\n\n**Answer:** I have often used strategies similar to the following when collecting mesh data:\n\n- Implement a comparison operator for the mesh vertex coordinate data.\n- Store all mesh vertices in a dedicated dictionary using the mesh vertex coordinates as keys, e.g., <code>Dictionary&lt;XYZ,int&gt;</code>.\nThe `int` is not really important, just the keys.\nI often use the `ìnt` value to count the number of vertices encountered at each location.\n- For each new mesh vertex received, check whether it is already listed in the dictionary.\nIf so, increment its count; else, add a new entry for it.\n\nThe comparison operator needs to accommodate an appropriate amount of [fuzz](https://thebuildingcoder.typepad.com/blog/2017/12/project-identifier-and-fuzzy-comparison.html#3),\ncf. this [dimensioning application](https://thebuildingcoder.typepad.com/blog/2018/12/rebars-in-host-net-framework-and-importance-of-fuzz.html#4).\n\nFor some examples, look at `GetCanonicVertices`\nfor [tracking element modification](https://thebuildingcoder.typepad.com/blog/2016/01/tracking-element-modification.html) and\nthis [post on the `XYZ` class](https://thebuildingcoder.typepad.com/blog/2017/08/birthday-post-on-the-xyz-class.html#3).\n\nFor yet more examples and use cases, you can search The Building Coder for\n\n- `XyzComparable`\n- `XyzEqualityComparer`\n- `XyzProximityComparer`"
  },
  {
    "original_filename": "1766_khl_snoop",
    "header_text": "The True Meaning of Pizza",
    "local_header_href": "#6",
    "chunk_text": "####<a name=\"6\"></a> The True Meaning of Pizza\n\nI am writing this visiting my friend Dani in Verbania, Italy.\n\nHence, this little note in closing:\n\nDid you ever wonder why pizza is called pizza?\n\nWell, pretty obviously, it simply represents the formula used by a hungry mathematician to determine its volume from its radius `z` and thickness `a`:\n\n<pre>\n  Volume = &pi; &middot; z <sup>2</sup> &middot; a = pi &middot; z &middot; z &middot; a\n</pre>\n\n<center>\n<img src=\"img/pizza.jpg\" alt=\"Pizza volume formula\" width=\"360\">\n<p style=\"font-size: 80%; font-style:italic\">Pizza volume formula V = pi&middot;z&middot;z&middot;a</p>\n</center>"
  }
]