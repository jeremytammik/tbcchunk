[
  {
    "original_filename": "1508_forge_py_script_ifc",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bc.css\">\n<script src=\"run_prettify.js\" type=\"text/javascript\"></script>\n<!--\n<script src=\"https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js\" type=\"text/javascript\"></script>\n-->\n</head>\n\n<!---\n\n[Forge](https://forge.autodesk.com) [Forge](http://autode.sk/2gRqSU1)\n[developer.autodesk.com](https://developer.autodesk.com) [developer.autodesk.com](http://autode.sk/2gRmOmI)\n[my apps](https://developer.autodesk.com/myapps) [my apps](http://autode.sk/2gRrf0Q)\n\n- Like Nazis at a Ku Klux Klan rally, they were comfortable ideologically, but not in terms of corporate culture.\n  Paul Beatty, The Sellout\n  Book review of Paul Beatty’s ‘The Sellout’ By Kevin Young, April 9, 2015\n  http://www.nytimes.com/2015/04/12/books/review/paul-beatty-sellout.html\n\n- open source IFC library\n  https://github.com/IfcOpenShell/IfcOpenShell\n  http://ifcopenshell.org/\n  http://academy.ifcopenshell.org/\n  https://github.com/jmirtsch/GeometryGymIFC\n  Jon Mirtschin @jmirtsch  \n\nForge Formats Python Script and IFC Open Shell #RevitAPI @AutodeskRevit #aec #bim #dynamobim @AutodeskForge #PaulBeatty @buildingSMART\nForge Formats Python & IFC Open Shell #RevitAPI #DynamoBim @AutodeskForge #PaulBeatty @buildingSMART\n\nI went back to answering way too many questions in the Revit API discussion forum yesterday.\nHowever, two other interesting topics also cropped up when I finally let go of that pastime, and I just finished a good book\n&ndash; The Sellout by Paul Beatty\n&ndash; IFC Ids and Open Shell\n&ndash; Forge Python scripts\n&ndash; py_forge_formats.py\n&ndash; forge_authenticate_app\n&ndash; forge_formats\n&ndash; jprettyprint\n&ndash; Mainline...\n\n-->"
  },
  {
    "original_filename": "1508_forge_py_script_ifc",
    "header_text": "Forge Formats Python Script and IFC Open Shell",
    "local_header_href": "#forge-formats-python-script-and-ifc-open-shell",
    "chunk_text": "### Forge Formats Python Script and IFC Open Shell\n\nI went back to answering way too many questions in\nthe [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api/bd-p/160) yesterday.\n\nHowever, two other interesting topics also cropped up when I finally let go of that pastime, and I just finished a good book:\n\n- [The Sellout by Paul Beatty](#2)\n- [IFC Ids and Open Shell](#3)\n- [Forge formats Python script](#4)\n    - [Setup and usage](#5)\n    - [forge_authenticate_app](#6)\n    - [forge_formats](#7)\n    - [jprettyprint](#8)\n    - [Mainline](#9)\n\n####<a name=\"2\"></a>The Sellout by Paul Beatty\n\nI just finished\nreading [The Sellout](https://en.wikipedia.org/wiki/The_Sellout_(book))\nby [Paul Beatty](https://en.wikipedia.org/wiki/Paul_Beatty).\n\nI struggled a bit initially before getting used to his style, then really deeply enjoyed this unique American satire on racism.\n\nIt won the [Man Booker Prize](https://en.wikipedia.org/wiki/Man_Booker_Prize), and Beatty is now the first writer from the United States ever to be thus honoured.\n\nIt hits hard to caringly and lovingly reach into and explore some pretty deep and subtly hidden everyday truths.\n\nIt is sometimes also just funny.\n\nHere is a metaphor I liked describing two men who don't quite fit in: \"Like Nazis at a Ku Klux Klan rally, they were comfortable ideologically, but not in terms of corporate culture.\"\n\n:-)\n\n<center>\n<img src=\"img/PaulBeatty.jpg\" alt=\"Paul Beatty\" width=\"220\"/>\n</center>\n\n\n####<a name=\"3\"></a>IFC Ids and Open Shell\n\n**Question:** Where can I ask questions about general IFC related stuff?\n\nI would like to hack together something to display IFC models in the browser.\n\nTo do that, the server is converting uploaded IFC files first to Collada, then to a JSON format used by [three.js](https://threejs.org).\n\nThis conversion process is problematic if the IFC IDs are not unique, which sometimes they are not.\n\nI could burp out an error at the user, but I'd rather try to fix it silently if possible.\n\nI've thought about 'fixing' the IFC file before conversion by simply searching for duplicated IFC IDs and creating new (unique) IDs for those elements.\n\nSince I'm only doing this conversion for 3D display purposes, do you think that could work, or is it fundamentally flawed?\n\nI'm basing this on the assumption that all IFC elements seem to be referred to by line number, not ID, so the specific ID doesn't really matter for my purposes, as long as it's unique.\n\n**Answer:** I am not an IFC expert by any means, but here is a recent Autodesk University class\nan [IFC Technical Overview] presented by someone who is &nbsp; :-)\n\nI was heavily involved a long, long time ago.\n\nYes, the IFC id just has to be unique within the context of the IFC file itself, afaik.\n\n[Q]: Are there any situations where several different IFC files cross reference each other and refer to their respective internal ids?\n\nI recently summarised all I know about\nthe [consistency of IFC GUID and `UniqueId`](http://thebuildingcoder.typepad.com/blog/2016/08/consistency-of-ifc-guid-and-uniqueid.html),\nincluding links to earlier discussions.\n\nIf the answer to [Q] is no, then you can assign any id you like, of course.\n\nEven if the answer is yes, but no such cross-referencing occurs in your situation, you should still be able to go ahead.\n\nAlso, if you are getting all your elements from Revit BIM, you can use the Revit element `UniqueId` just as it is. It is guaranteed to be unique, and thus enables cross referencing between different files and models... unless the files contain copies of element that occur elsewhere as well, e.g., you copied the BIM and the elements contained within it, of course. That obviously leads to duplication.\n\nRegarding the three.js viewer:\n\n- Are you aware of the [VA3C](https://va3c.github.io) three.js AEC viewer project?\n- Are you aware of [Forge](http://autode.sk/2gRqSU1) and its [developer resources](http://autode.sk/2gRmOmI)?\n- Are you aware of the [Revit IFC importer/exporter open source project](https://sourceforge.net/projects/ifcexporter)?\n\nYou might want to discuss your question with the Revit IFC open source community.\n\nYou might also want to\ncontact [Jon @jmirtsch Mirtschin](https://github.com/jmirtsch), author of\nthe [GeomGym IFC library](https://github.com/jmirtsch/GeometryGymIFC).\n\nThe [IfcOpenShell project](http://ifcopenshell.org) ([GitHub](https://github.com/IfcOpenShell/IfcOpenShell)) also looks very promising.\n\n**Response:** I actually currently use IfcOpenShell to convert from IFC to DAE via `IfcConvert`.\n\nAfter that I segment the DAE files so that each IFC storey/space/etc. gets its own file based on information in the IFC model, parsed using [Xbim](http://www.xbim.net).\n\nThat way, the clients can download only the storey/space they are interested in.\nThen I convert each storey/space DAE file to JSON, which is smaller and has much less memory requirements due to the browser not needing to parse an XML document (which it has to if loading the DAE file).\n\n**Answer:** Cool. That sounds like a very useful workflow. Might come in handy in other contexts as well.\n\nPeople just recently asked how to compress large BIM models for Forge. Your approach might help there too.\n\nOther suggestions include:\n\n- Simplify the BIM model before translation. Reduce geometry complexity, remove overly detailed aspects.\n- Split the BIM RVT into separate files, e.g., by level or discipline, before submitting them for Forge translation. You can use the Forge aggregation functionality to put them back together again at need.\n\n\n####<a name=\"4\"></a>Forge Formats Python Script\n\nI just published the beginning of a\nnew [collection of Forge Python scripts](https://github.com/jeremytammik/forge_python_script),\ncurrently with a count of one:\n\n[py_forge_formats.py](https://github.com/jeremytammik/forge_python_script/blob/master/py_forge_formats.py)\nimplements a Python wrapper around two basic RESTful Forge web service calls:\n\n- Authenticate an app &ndash; [forge_authenticate_app](#6)\n- Query the file formats currently supported by the translation processes &ndash; [forge_formats](#7)\n\nThe result is prettified using the [jprettyprint](#8) helper function.\n\nThe [mainline](#9) ties it all together and presents the final result, which looks like this at the time of writing:\n\n<pre class=\"prettyprint\">\n$ ./py_forge_formats.py\n9 Forge output formats:\n  dwg: f2d, f3d, rvt\n  fbx: f3d\n  ifc: rvt\n  iges: f3d, fbx, iam, ipt, wire\n  obj: asm, f3d, fbx, iam, ipt, neu, prt, sldasm, sldprt, step, stp, stpz,\n    wire, x_b, x_t, asm.NNN, neu.NNN, prt.NNN\n  step: f3d, fbx, iam, ipt, wire\n  stl: f3d, fbx, iam, ipt, wire\n  svf: 3dm, 3ds, asm, catpart, catproduct, cgr, collaboration, dae, dgn,\n    dlv3, dwf, dwfx, dwg, dwt, dxf, exp, f3d, fbx, g, gbxml, iam, idw,\n    ifc, ige, iges, igs, ipt, jt, max, model, neu, nwc, nwd, obj, pdf,\n    prt, rcp, rvt, sab, sat, session, skp, sldasm, sldprt, smb, smt,\n    ste, step, stl, stla, stlb, stp, stpz, wire, x_b, x_t, xas, xpr,\n    zip, asm.NNN, neu.NNN, prt.NNN\n  thumbnail: 3dm, 3ds, asm, catpart, catproduct, cgr, collaboration, dae, dgn,\n    dlv3, dwf, dwfx, dwg, dwt, dxf, exp, f3d, fbx, g, gbxml, iam, idw,\n    ifc, ige, iges, igs, ipt, jt, max, model, neu, nwc, nwd, obj, pdf,\n    prt, rcp, rvt, sab, sat, session, skp, sldasm, sldprt, smb, smt,\n    ste, step, stl, stla, stlb, stp, stpz, wire, x_b, x_t, xas, xpr,\n    zip, asm.NNN, neu.NNN, prt.NNN\n</pre>\n\nThis script replaces and improves on the\nprevious [forgeauth](https://github.com/jeremytammik/forge_python_script/blob/master/forgeauth)\nand [forgeformats](https://github.com/jeremytammik/forge_python_script/blob/master/forgeformats) Unix\nshell cURL scripts documented in the discussion of\nthe [`cURL` wrapper scripts to list Forge file formats](http://thebuildingcoder.typepad.com/blog/2016/10/forge-intro-formats-webinars-and-fusion-360-client-api.html#3).\n\nFor the sake of completeness, those two scripts have been added to this repository as well.\n\n####<a name=\"5\"></a>Setup and Usage\n\nTwo aspects need to be prepared: Forge and Python.\n\nBefore you can make any use of the Forge web services, you will need to register an app and request the API client id and client secret for it\nat [developer.autodesk.com](http://autode.sk/2gRmOmI)\n&gt; [my apps](http://autode.sk/2gRrf0Q).\n\nThese scripts assume that you have stored these credentials in the environment variables `FORGE_CLIENT_ID` and `FORGE_CLIENT_SECRET`.\n\nRegarding the Python components:\n\n- Install [Python](https://www.python.org).\n- Install the [requests Python library](http://docs.python-requests.org).\n\nNow you should be all set to run as shown above.\n\n####<a name=\"6\"></a>forge_authenticate_app\n\n<script src=\"https://gist.github.com/jeremytammik/819084fdc8bc52965b7ce8f3d64cc18b.js\"></script>\n\n####<a name=\"7\"></a>forge_formats\n\n<script src=\"https://gist.github.com/jeremytammik/4e8df567c15f8fab1fa40e17962045b9.js\"></script>\n\n####<a name=\"8\"></a>jprettyprint\n\n<script src=\"https://gist.github.com/jeremytammik/d3c3b02b5fe2636436cc6acc7173bef2.js\"></script>\n\n####<a name=\"9\"></a>Mainline\n\n<script src=\"https://gist.github.com/jeremytammik/9a9caddec09a44ddceaab677abcc9887.js\"></script>\n\n<hr/>"
  },
  {
    "original_filename": "1508_forge_py_script_ifc",
    "header_text": "Cloud and Mobile",
    "local_header_href": "#cloud-and-mobile",
    "chunk_text": "# Cloud and Mobile\n\n"
  },
  {
    "original_filename": "1508_forge_py_script_ifc",
    "header_text": "Forge Formats Python Scripts",
    "local_header_href": "#forge-formats-python-scripts",
    "chunk_text": "### Forge Formats Python Scripts\n\nBy [Jeremy Tammik](http://thebuildingcoder.typepad.com/blog/about-the-author.html)."
  }
]