[
  {
    "original_filename": "1322_a360_widget_dwg_export",
    "header_text": "Introduction",
    "local_header_href": "#introduction",
    "chunk_text": "<head>\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>\n<link href=\"bc.css\" rel=\"stylesheet\" type=\"text/css\"/>\n<!-- <script src=\"http://thebuildingcoder.typepad.com/google-code-prettify/run_prettify.js\"></script>-->\n</head>"
  },
  {
    "original_filename": "1322_a360_widget_dwg_export",
    "header_text": "A360 Viewer Widget and Selecting a DWG Export Setup",
    "local_header_href": "#a360-viewer-widget-and-selecting-a-dwg-export-setup",
    "chunk_text": "<h3>A360 Viewer Widget and Selecting a DWG Export Setup</h3><p>Today, let's look at the new <a href=\"#2\">A360 embeddable viewer widget</a> and <a href=\"#3\">selecting a DWG export setup</a>.</p><a name=\"2\"></a>"
  },
  {
    "original_filename": "1322_a360_widget_dwg_export",
    "header_text": "A360 Embeddable Viewer Widget",
    "local_header_href": "#a360-embeddable-viewer-widget",
    "chunk_text": "<h4>A360 Embeddable Viewer Widget</h4><p>The Autodesk View and Data API makes easy it to interactively view and explore a 3D model in the browser without any further software whatsoever.</p><p>As I just mentioned in the discussion on\n<a href=\"http://the3dwebcoder.typepad.com/blog/2015/05/50-ways-to-view-your-model.html\">\n50 ways to view your model</a>,\nthe new A360 Viewer Widget simplifies it further still, using a widget that can be embedded in web pages to view design files that are dragged and dropped onto it, enabling you to view them as you would in A360 inside any web page.</p><p>Try it out yourself right here; drop any model file of your choice onto this widget:</p><center>\n<div id=\"a360widgetDropAreaContainerTbc\" style=\"width: 450px\"></div>\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js\" type=\"text/javascript\"></script>\n<script src=\"https://api.autodesk.com/content/gateway/2013.1.363776.288/z/Scripts/a360Viewer/widget.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\nvar adskViewerWidget = adskViewerWidget();\nif ( 0 == $('#a360widgetDropAreaContainerTbc').children().length ) {\n  adskViewerWidget.Init('#a360widgetDropAreaContainerTbc', true);\n}\n</script>\n</center><p>For all further details, please refer to the discussion on\n<a href=\"http://the3dwebcoder.typepad.com/blog/2015/05/50-ways-to-view-your-model.html\">\n50 ways to view your model</a>.</p><p><strong>Addendum:</strong> Oops.\nAs explained by <a href=\"http://adndevblog.typepad.com/cloud_and_mobile/2015/05/a360-widget.html\">Stephen</a>,\nyou might notice that the embedded widget works fine on its home page for all browsers, but drag and drop on Typepad (i.e. the widget above) apparently only works in Chrome.\nThe widget should work fine on your own webpage, just not in a (Typepad) blog.\nWe've reported the problem to the dev team.</p><a name=\"3\"></a>"
  },
  {
    "original_filename": "1322_a360_widget_dwg_export",
    "header_text": "Selecting a DWG Export Setup",
    "local_header_href": "#selecting-a-dwg-export-setup",
    "chunk_text": "<h4>Selecting a DWG Export Setup</h4><p><strong>Question:</strong> How can I access the names of all the ExportLayerTables through the Revit API?</p><p>I can see how to get or set one single one for DWGExportOptions but can't see where they are listed.</p><p><strong>Answer:</strong> Does this documentation snippet help?</p>"
  },
  {
    "original_filename": "1322_a360_widget_dwg_export",
    "header_text": "Remarks",
    "local_header_href": "#remarks",
    "chunk_text": "<h4 class=\"darkblue\">Remarks</h4><p class=\"darkblue\">This table is structured as a mapping from ExportLayerKey to ExportLayerInfo members.\nThe ExportLayerKey contains the identification information for the layer table: the Revit category and subcategory names.\nIn addition, the key contains a SpecialType member used only to represent non-Revit categories that can be assigned specific layer information on export.\nThe ExportLayerInfo contains the exported layer name, colour name, and layer modifiers for standard and cut representations.</p><p class=\"darkblue\">The table can be accessed via direct iteration as a collection of KeyValuePairs, or by traversal of the stored keys obtained from GetKeys(), or via specific lookup of a key constructed externally. In all cases, the ExportLayerInfo returned will be a copy of the ExportLayerInfo from the table. In order to make changes to the ExportLayerInfo and use those settings during export, set the modified ExportLayerInfo back into the table using the same key.</p><p><strong>Response:</strong> I don't think so – that will help me once I have an ExportLayerTable but I need a list of all the ExportLayerTables currently in the project.</p><p>Actually I'm not convinced there is such a list.</p><p>This will get me all the named Export Setups, e.g., those in the main dialogue:</p><center>\n<img alt=\"DWG export\" src=\"img/dwg_export_01.png\" width=\"400\"/>\n</center><pre class=\"code\">\n  <span class=\"teal\">ExportLayerTable</span> lt;\n \n  <span class=\"blue\">var</span> filter2 = <span class=\"blue\">new</span> <span class=\"teal\">ElementClassFilter</span>(\n    <span class=\"blue\">typeof</span>( <span class=\"teal\">ExportDWGSettings</span> ) );\n \n  <span class=\"teal\">FilteredElementCollector</span> settings\n    = <span class=\"blue\">new</span> <span class=\"teal\">FilteredElementCollector</span>( mDoc );\n \n  settings = settings.WherePasses( filter2 );\n \n  <span class=\"blue\">foreach</span>( <span class=\"teal\">ExportDWGSettings</span> element <span class=\"blue\">in</span> settings )\n  {\n    <span class=\"teal\">DWGExportOptions</span> options\n      = element.GetDWGExportOptions();\n \n    lt = options.GetExportLayerTable();\n    <span class=\"blue\">if</span>( lt != <span class=\"blue\">null</span> )\n    {\n \n    }\n  }\n</pre><p>But once I have an ExportLayerTable it doesn't have a name, which now is making sense as once you're in the Modify DWG/DXF Export Setup dialog, you can't select the layer mappings by name:</p><center>\n<img alt=\"DWG export setup\" src=\"img/dwg_export_02.png\" width=\"400\"/>\n</center><p>So I think I was looking for the wrong thing, and can make do by selecting the named ExportDWGSettings.</p><p><strong>Later:</strong> I understand this now – I'd say since it was called an ExportLayerTable I was expecting something AutoCAD like (when will I ever learn :-).</p><p>I ended up with:</p><pre class=\"code\">\n  <span class=\"blue\">var</span> filter2 = <span class=\"blue\">new</span> <span class=\"teal\">ElementClassFilter</span>(\n    <span class=\"blue\">typeof</span>( <span class=\"teal\">ExportDWGSettings</span> ) );\n \n  mExportDWGSettings = <span class=\"blue\">new</span> <span class=\"teal\">FilteredElementCollector</span>(\n    mDoc );\n \n  mExportDWGSettings = mExportDWGSettings\n    .WherePasses( filter2 );\n \n  <span class=\"blue\">foreach</span>( <span class=\"teal\">ExportDWGSettings</span> element\n    <span class=\"blue\">in</span> mExportDWGSettings )\n  {\n    mExportSetupComboBox.Items.Add( element.Name );\n  }\n</pre><p>That builds me a combo list of all the DWG Export Setups that a user can select.\nThat provides the layer table and all the other export settings, which actually makes a lot more sense anyway.</p><p>Many thanks to Simon Jones for this little exploration!</p>"
  }
]